var Wo=Object.defineProperty;var qo=(r,e,n)=>e in r?Wo(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var W=(r,e,n)=>(qo(r,typeof e!="symbol"?e+"":e,n),n),ti=(r,e,n)=>{if(!e.has(r))throw TypeError("Cannot "+n)};var m=(r,e,n)=>(ti(r,e,"read from private field"),n?n.call(r):e.get(r)),K=(r,e,n)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,n)},Z=(r,e,n,o)=>(ti(r,e,"write to private field"),o?o.call(r,n):e.set(r,n),n);var wn=(r,e,n,o)=>({set _(u){Z(r,e,u,n)},get _(){return m(r,e,o)}}),P=(r,e,n)=>(ti(r,e,"access private method"),n);const Wn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};var Zp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Wp(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var n=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var u=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(n,o,u.get?u:{enumerable:!0,get:function(){return r[o]}})}),n}var Se={},qn={};qn.byteLength=Yo;qn.toByteArray=Ko;qn.fromByteArray=Qo;var rt=[],Le=[],Vo=typeof Uint8Array<"u"?Uint8Array:Array,ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xt=0,Go=ri.length;Xt<Go;++Xt)rt[Xt]=ri[Xt],Le[ri.charCodeAt(Xt)]=Xt;Le["-".charCodeAt(0)]=62;Le["_".charCodeAt(0)]=63;function Ta(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=r.indexOf("=");n===-1&&(n=e);var o=n===e?0:4-n%4;return[n,o]}function Yo(r){var e=Ta(r),n=e[0],o=e[1];return(n+o)*3/4-o}function Ho(r,e,n){return(e+n)*3/4-n}function Ko(r){var e,n=Ta(r),o=n[0],u=n[1],c=new Vo(Ho(r,o,u)),f=0,s=u>0?o-4:o,d;for(d=0;d<s;d+=4)e=Le[r.charCodeAt(d)]<<18|Le[r.charCodeAt(d+1)]<<12|Le[r.charCodeAt(d+2)]<<6|Le[r.charCodeAt(d+3)],c[f++]=e>>16&255,c[f++]=e>>8&255,c[f++]=e&255;return u===2&&(e=Le[r.charCodeAt(d)]<<2|Le[r.charCodeAt(d+1)]>>4,c[f++]=e&255),u===1&&(e=Le[r.charCodeAt(d)]<<10|Le[r.charCodeAt(d+1)]<<4|Le[r.charCodeAt(d+2)]>>2,c[f++]=e>>8&255,c[f++]=e&255),c}function Xo(r){return rt[r>>18&63]+rt[r>>12&63]+rt[r>>6&63]+rt[r&63]}function Jo(r,e,n){for(var o,u=[],c=e;c<n;c+=3)o=(r[c]<<16&16711680)+(r[c+1]<<8&65280)+(r[c+2]&255),u.push(Xo(o));return u.join("")}function Qo(r){for(var e,n=r.length,o=n%3,u=[],c=16383,f=0,s=n-o;f<s;f+=c)u.push(Jo(r,f,f+c>s?s:f+c));return o===1?(e=r[n-1],u.push(rt[e>>2]+rt[e<<4&63]+"==")):o===2&&(e=(r[n-2]<<8)+r[n-1],u.push(rt[e>>10]+rt[e>>4&63]+rt[e<<2&63]+"=")),u.join("")}var Oi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Oi.read=function(r,e,n,o,u){var c,f,s=u*8-o-1,d=(1<<s)-1,y=d>>1,_=-7,w=n?u-1:0,E=n?-1:1,b=r[e+w];for(w+=E,c=b&(1<<-_)-1,b>>=-_,_+=s;_>0;c=c*256+r[e+w],w+=E,_-=8);for(f=c&(1<<-_)-1,c>>=-_,_+=o;_>0;f=f*256+r[e+w],w+=E,_-=8);if(c===0)c=1-y;else{if(c===d)return f?NaN:(b?-1:1)*(1/0);f=f+Math.pow(2,o),c=c-y}return(b?-1:1)*f*Math.pow(2,c-o)};Oi.write=function(r,e,n,o,u,c){var f,s,d,y=c*8-u-1,_=(1<<y)-1,w=_>>1,E=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=o?0:c-1,v=o?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,f=_):(f=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-f))<1&&(f--,d*=2),f+w>=1?e+=E/d:e+=E*Math.pow(2,1-w),e*d>=2&&(f++,d/=2),f+w>=_?(s=0,f=_):f+w>=1?(s=(e*d-1)*Math.pow(2,u),f=f+w):(s=e*Math.pow(2,w-1)*Math.pow(2,u),f=0));u>=8;r[n+b]=s&255,b+=v,s/=256,u-=8);for(f=f<<u|s,y+=u;y>0;r[n+b]=f&255,b+=v,f/=256,y-=8);r[n+b-v]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=qn,n=Oi,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=k,r.INSPECT_MAX_BYTES=50;const u=2147483647;r.kMaxLength=u,s.TYPED_ARRAY_SUPPORT=c(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const a=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(a,t),a.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function f(a){if(a>u)throw new RangeError('The value "'+a+'" is invalid for option "size"');const t=new Uint8Array(a);return Object.setPrototypeOf(t,s.prototype),t}function s(a,t,i){if(typeof a=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(a)}return d(a,t,i)}s.poolSize=8192;function d(a,t,i){if(typeof a=="string")return E(a,t);if(ArrayBuffer.isView(a))return v(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(Q(a,ArrayBuffer)||a&&Q(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Q(a,SharedArrayBuffer)||a&&Q(a.buffer,SharedArrayBuffer)))return A(a,t,i);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const l=a.valueOf&&a.valueOf();if(l!=null&&l!==a)return s.from(l,t,i);const h=S(a);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return s.from(a[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}s.from=function(a,t,i){return d(a,t,i)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function y(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function _(a,t,i){return y(a),a<=0?f(a):t!==void 0?typeof i=="string"?f(a).fill(t,i):f(a).fill(t):f(a)}s.alloc=function(a,t,i){return _(a,t,i)};function w(a){return y(a),f(a<0?0:B(a)|0)}s.allocUnsafe=function(a){return w(a)},s.allocUnsafeSlow=function(a){return w(a)};function E(a,t){if((typeof t!="string"||t==="")&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const i=C(a,t)|0;let l=f(i);const h=l.write(a,t);return h!==i&&(l=l.slice(0,h)),l}function b(a){const t=a.length<0?0:B(a.length)|0,i=f(t);for(let l=0;l<t;l+=1)i[l]=a[l]&255;return i}function v(a){if(Q(a,Uint8Array)){const t=new Uint8Array(a);return A(t.buffer,t.byteOffset,t.byteLength)}return b(a)}function A(a,t,i){if(t<0||a.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');let l;return t===void 0&&i===void 0?l=new Uint8Array(a):i===void 0?l=new Uint8Array(a,t):l=new Uint8Array(a,t,i),Object.setPrototypeOf(l,s.prototype),l}function S(a){if(s.isBuffer(a)){const t=B(a.length)|0,i=f(t);return i.length===0||a.copy(i,0,0,t),i}if(a.length!==void 0)return typeof a.length!="number"||De(a.length)?f(0):b(a);if(a.type==="Buffer"&&Array.isArray(a.data))return b(a.data)}function B(a){if(a>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return a|0}function k(a){return+a!=a&&(a=0),s.alloc(+a)}s.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==s.prototype},s.compare=function(t,i){if(Q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),Q(i,Uint8Array)&&(i=s.from(i,i.offset,i.byteLength)),!s.isBuffer(t)||!s.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let l=t.length,h=i.length;for(let p=0,g=Math.min(l,h);p<g;++p)if(t[p]!==i[p]){l=t[p],h=i[p];break}return l<h?-1:h<l?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,i){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return s.alloc(0);let l;if(i===void 0)for(i=0,l=0;l<t.length;++l)i+=t[l].length;const h=s.allocUnsafe(i);let p=0;for(l=0;l<t.length;++l){let g=t[l];if(Q(g,Uint8Array))p+g.length>h.length?(s.isBuffer(g)||(g=s.from(g)),g.copy(h,p)):Uint8Array.prototype.set.call(h,g,p);else if(s.isBuffer(g))g.copy(h,p);else throw new TypeError('"list" argument must be an Array of Buffers');p+=g.length}return h};function C(a,t){if(s.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||Q(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);const i=a.length,l=arguments.length>2&&arguments[2]===!0;if(!l&&i===0)return 0;let h=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Pe(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Tt(a).length;default:if(h)return l?-1:Pe(a).length;t=(""+t).toLowerCase(),h=!0}}s.byteLength=C;function N(a,t,i){let l=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,t>>>=0,i<=t))return"";for(a||(a="utf8");;)switch(a){case"hex":return Sr(this,t,i);case"utf8":case"utf-8":return gt(this,t,i);case"ascii":return xr(this,t,i);case"latin1":case"binary":return Tr(this,t,i);case"base64":return Er(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Br(this,t,i);default:if(l)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),l=!0}}s.prototype._isBuffer=!0;function $(a,t,i){const l=a[t];a[t]=a[i],a[i]=l}s.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)$(this,i,i+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)$(this,i,i+3),$(this,i+1,i+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)$(this,i,i+7),$(this,i+1,i+6),$(this,i+2,i+5),$(this,i+3,i+4);return this},s.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?gt(this,0,t):N.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:s.compare(this,t)===0},s.prototype.inspect=function(){let t="";const i=r.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},o&&(s.prototype[o]=s.prototype.inspect),s.prototype.compare=function(t,i,l,h,p){if(Q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(i===void 0&&(i=0),l===void 0&&(l=t?t.length:0),h===void 0&&(h=0),p===void 0&&(p=this.length),i<0||l>t.length||h<0||p>this.length)throw new RangeError("out of range index");if(h>=p&&i>=l)return 0;if(h>=p)return-1;if(i>=l)return 1;if(i>>>=0,l>>>=0,h>>>=0,p>>>=0,this===t)return 0;let g=p-h,T=l-i;const F=Math.min(g,T),O=this.slice(h,p),R=t.slice(i,l);for(let U=0;U<F;++U)if(O[U]!==R[U]){g=O[U],T=R[U];break}return g<T?-1:T<g?1:0};function q(a,t,i,l,h){if(a.length===0)return-1;if(typeof i=="string"?(l=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,De(i)&&(i=h?0:a.length-1),i<0&&(i=a.length+i),i>=a.length){if(h)return-1;i=a.length-1}else if(i<0)if(h)i=0;else return-1;if(typeof t=="string"&&(t=s.from(t,l)),s.isBuffer(t))return t.length===0?-1:ce(a,t,i,l,h);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(a,t,i):Uint8Array.prototype.lastIndexOf.call(a,t,i):ce(a,[t],i,l,h);throw new TypeError("val must be string, number or Buffer")}function ce(a,t,i,l,h){let p=1,g=a.length,T=t.length;if(l!==void 0&&(l=String(l).toLowerCase(),l==="ucs2"||l==="ucs-2"||l==="utf16le"||l==="utf-16le")){if(a.length<2||t.length<2)return-1;p=2,g/=2,T/=2,i/=2}function F(R,U){return p===1?R[U]:R.readUInt16BE(U*p)}let O;if(h){let R=-1;for(O=i;O<g;O++)if(F(a,O)===F(t,R===-1?0:O-R)){if(R===-1&&(R=O),O-R+1===T)return R*p}else R!==-1&&(O-=O-R),R=-1}else for(i+T>g&&(i=g-T),O=i;O>=0;O--){let R=!0;for(let U=0;U<T;U++)if(F(a,O+U)!==F(t,U)){R=!1;break}if(R)return O}return-1}s.prototype.includes=function(t,i,l){return this.indexOf(t,i,l)!==-1},s.prototype.indexOf=function(t,i,l){return q(this,t,i,l,!0)},s.prototype.lastIndexOf=function(t,i,l){return q(this,t,i,l,!1)};function at(a,t,i,l){i=Number(i)||0;const h=a.length-i;l?(l=Number(l),l>h&&(l=h)):l=h;const p=t.length;l>p/2&&(l=p/2);let g;for(g=0;g<l;++g){const T=parseInt(t.substr(g*2,2),16);if(De(T))return g;a[i+g]=T}return g}function ke(a,t,i,l){return xe(Pe(t,a.length-i),a,i,l)}function jt(a,t,i,l){return xe(Or(t),a,i,l)}function yt(a,t,i,l){return xe(Tt(t),a,i,l)}function Ft(a,t,i,l){return xe(Rr(t,a.length-i),a,i,l)}s.prototype.write=function(t,i,l,h){if(i===void 0)h="utf8",l=this.length,i=0;else if(l===void 0&&typeof i=="string")h=i,l=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(l)?(l=l>>>0,h===void 0&&(h="utf8")):(h=l,l=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const p=this.length-i;if((l===void 0||l>p)&&(l=p),t.length>0&&(l<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let g=!1;for(;;)switch(h){case"hex":return at(this,t,i,l);case"utf8":case"utf-8":return ke(this,t,i,l);case"ascii":case"latin1":case"binary":return jt(this,t,i,l);case"base64":return yt(this,t,i,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ft(this,t,i,l);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),g=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Er(a,t,i){return t===0&&i===a.length?e.fromByteArray(a):e.fromByteArray(a.slice(t,i))}function gt(a,t,i){i=Math.min(a.length,i);const l=[];let h=t;for(;h<i;){const p=a[h];let g=null,T=p>239?4:p>223?3:p>191?2:1;if(h+T<=i){let F,O,R,U;switch(T){case 1:p<128&&(g=p);break;case 2:F=a[h+1],(F&192)===128&&(U=(p&31)<<6|F&63,U>127&&(g=U));break;case 3:F=a[h+1],O=a[h+2],(F&192)===128&&(O&192)===128&&(U=(p&15)<<12|(F&63)<<6|O&63,U>2047&&(U<55296||U>57343)&&(g=U));break;case 4:F=a[h+1],O=a[h+2],R=a[h+3],(F&192)===128&&(O&192)===128&&(R&192)===128&&(U=(p&15)<<18|(F&63)<<12|(O&63)<<6|R&63,U>65535&&U<1114112&&(g=U))}}g===null?(g=65533,T=1):g>65535&&(g-=65536,l.push(g>>>10&1023|55296),g=56320|g&1023),l.push(g),h+=T}return Ar(l)}const mt=4096;function Ar(a){const t=a.length;if(t<=mt)return String.fromCharCode.apply(String,a);let i="",l=0;for(;l<t;)i+=String.fromCharCode.apply(String,a.slice(l,l+=mt));return i}function xr(a,t,i){let l="";i=Math.min(a.length,i);for(let h=t;h<i;++h)l+=String.fromCharCode(a[h]&127);return l}function Tr(a,t,i){let l="";i=Math.min(a.length,i);for(let h=t;h<i;++h)l+=String.fromCharCode(a[h]);return l}function Sr(a,t,i){const l=a.length;(!t||t<0)&&(t=0),(!i||i<0||i>l)&&(i=l);let h="";for(let p=t;p<i;++p)h+=kr[a[p]];return h}function Br(a,t,i){const l=a.slice(t,i);let h="";for(let p=0;p<l.length-1;p+=2)h+=String.fromCharCode(l[p]+l[p+1]*256);return h}s.prototype.slice=function(t,i){const l=this.length;t=~~t,i=i===void 0?l:~~i,t<0?(t+=l,t<0&&(t=0)):t>l&&(t=l),i<0?(i+=l,i<0&&(i=0)):i>l&&(i=l),i<t&&(i=t);const h=this.subarray(t,i);return Object.setPrototypeOf(h,s.prototype),h};function M(a,t,i){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+t>i)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(t,i,l){t=t>>>0,i=i>>>0,l||M(t,i,this.length);let h=this[t],p=1,g=0;for(;++g<i&&(p*=256);)h+=this[t+g]*p;return h},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,i,l){t=t>>>0,i=i>>>0,l||M(t,i,this.length);let h=this[t+--i],p=1;for(;i>0&&(p*=256);)h+=this[t+--i]*p;return h},s.prototype.readUint8=s.prototype.readUInt8=function(t,i){return t=t>>>0,i||M(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,i){return t=t>>>0,i||M(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,i){return t=t>>>0,i||M(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,i){return t=t>>>0,i||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,i){return t=t>>>0,i||M(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=ne(function(t){t=t>>>0,he(t,"offset");const i=this[t],l=this[t+7];(i===void 0||l===void 0)&&we(t,this.length-8);const h=i+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,p=this[++t]+this[++t]*2**8+this[++t]*2**16+l*2**24;return BigInt(h)+(BigInt(p)<<BigInt(32))}),s.prototype.readBigUInt64BE=ne(function(t){t=t>>>0,he(t,"offset");const i=this[t],l=this[t+7];(i===void 0||l===void 0)&&we(t,this.length-8);const h=i*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],p=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+l;return(BigInt(h)<<BigInt(32))+BigInt(p)}),s.prototype.readIntLE=function(t,i,l){t=t>>>0,i=i>>>0,l||M(t,i,this.length);let h=this[t],p=1,g=0;for(;++g<i&&(p*=256);)h+=this[t+g]*p;return p*=128,h>=p&&(h-=Math.pow(2,8*i)),h},s.prototype.readIntBE=function(t,i,l){t=t>>>0,i=i>>>0,l||M(t,i,this.length);let h=i,p=1,g=this[t+--h];for(;h>0&&(p*=256);)g+=this[t+--h]*p;return p*=128,g>=p&&(g-=Math.pow(2,8*i)),g},s.prototype.readInt8=function(t,i){return t=t>>>0,i||M(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,i){t=t>>>0,i||M(t,2,this.length);const l=this[t]|this[t+1]<<8;return l&32768?l|4294901760:l},s.prototype.readInt16BE=function(t,i){t=t>>>0,i||M(t,2,this.length);const l=this[t+1]|this[t]<<8;return l&32768?l|4294901760:l},s.prototype.readInt32LE=function(t,i){return t=t>>>0,i||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,i){return t=t>>>0,i||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=ne(function(t){t=t>>>0,he(t,"offset");const i=this[t],l=this[t+7];(i===void 0||l===void 0)&&we(t,this.length-8);const h=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(l<<24);return(BigInt(h)<<BigInt(32))+BigInt(i+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),s.prototype.readBigInt64BE=ne(function(t){t=t>>>0,he(t,"offset");const i=this[t],l=this[t+7];(i===void 0||l===void 0)&&we(t,this.length-8);const h=(i<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(h)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+l)}),s.prototype.readFloatLE=function(t,i){return t=t>>>0,i||M(t,4,this.length),n.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,i){return t=t>>>0,i||M(t,4,this.length),n.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,i){return t=t>>>0,i||M(t,8,this.length),n.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,i){return t=t>>>0,i||M(t,8,this.length),n.read(this,t,!1,52,8)};function V(a,t,i,l,h,p){if(!s.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>h||t<p)throw new RangeError('"value" argument is out of bounds');if(i+l>a.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,i,l,h){if(t=+t,i=i>>>0,l=l>>>0,!h){const T=Math.pow(2,8*l)-1;V(this,t,i,l,T,0)}let p=1,g=0;for(this[i]=t&255;++g<l&&(p*=256);)this[i+g]=t/p&255;return i+l},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,i,l,h){if(t=+t,i=i>>>0,l=l>>>0,!h){const T=Math.pow(2,8*l)-1;V(this,t,i,l,T,0)}let p=l-1,g=1;for(this[i+p]=t&255;--p>=0&&(g*=256);)this[i+p]=t/g&255;return i+l},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,1,255,0),this[i]=t&255,i+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,2,65535,0),this[i]=t&255,this[i+1]=t>>>8,i+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=t&255,i+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=t&255,i+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255,i+4};function wt(a,t,i,l,h){xt(t,l,h,a,i,7);let p=Number(t&BigInt(4294967295));a[i++]=p,p=p>>8,a[i++]=p,p=p>>8,a[i++]=p,p=p>>8,a[i++]=p;let g=Number(t>>BigInt(32)&BigInt(4294967295));return a[i++]=g,g=g>>8,a[i++]=g,g=g>>8,a[i++]=g,g=g>>8,a[i++]=g,i}function vt(a,t,i,l,h){xt(t,l,h,a,i,7);let p=Number(t&BigInt(4294967295));a[i+7]=p,p=p>>8,a[i+6]=p,p=p>>8,a[i+5]=p,p=p>>8,a[i+4]=p;let g=Number(t>>BigInt(32)&BigInt(4294967295));return a[i+3]=g,g=g>>8,a[i+2]=g,g=g>>8,a[i+1]=g,g=g>>8,a[i]=g,i+8}s.prototype.writeBigUInt64LE=ne(function(t,i=0){return wt(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=ne(function(t,i=0){return vt(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(t,i,l,h){if(t=+t,i=i>>>0,!h){const F=Math.pow(2,8*l-1);V(this,t,i,l,F-1,-F)}let p=0,g=1,T=0;for(this[i]=t&255;++p<l&&(g*=256);)t<0&&T===0&&this[i+p-1]!==0&&(T=1),this[i+p]=(t/g>>0)-T&255;return i+l},s.prototype.writeIntBE=function(t,i,l,h){if(t=+t,i=i>>>0,!h){const F=Math.pow(2,8*l-1);V(this,t,i,l,F-1,-F)}let p=l-1,g=1,T=0;for(this[i+p]=t&255;--p>=0&&(g*=256);)t<0&&T===0&&this[i+p+1]!==0&&(T=1),this[i+p]=(t/g>>0)-T&255;return i+l},s.prototype.writeInt8=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=t&255,i+1},s.prototype.writeInt16LE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,2,32767,-32768),this[i]=t&255,this[i+1]=t>>>8,i+2},s.prototype.writeInt16BE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=t&255,i+2},s.prototype.writeInt32LE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,4,2147483647,-2147483648),this[i]=t&255,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},s.prototype.writeInt32BE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255,i+4},s.prototype.writeBigInt64LE=ne(function(t,i=0){return wt(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=ne(function(t,i=0){return vt(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _t(a,t,i,l,h,p){if(i+l>a.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function bt(a,t,i,l,h){return t=+t,i=i>>>0,h||_t(a,t,i,4),n.write(a,t,i,l,23,4),i+4}s.prototype.writeFloatLE=function(t,i,l){return bt(this,t,i,!0,l)},s.prototype.writeFloatBE=function(t,i,l){return bt(this,t,i,!1,l)};function Et(a,t,i,l,h){return t=+t,i=i>>>0,h||_t(a,t,i,8),n.write(a,t,i,l,52,8),i+8}s.prototype.writeDoubleLE=function(t,i,l){return Et(this,t,i,!0,l)},s.prototype.writeDoubleBE=function(t,i,l){return Et(this,t,i,!1,l)},s.prototype.copy=function(t,i,l,h){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(l||(l=0),!h&&h!==0&&(h=this.length),i>=t.length&&(i=t.length),i||(i=0),h>0&&h<l&&(h=l),h===l||t.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),t.length-i<h-l&&(h=t.length-i+l);const p=h-l;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,l,h):Uint8Array.prototype.set.call(t,this.subarray(l,h),i),p},s.prototype.fill=function(t,i,l,h){if(typeof t=="string"){if(typeof i=="string"?(h=i,i=0,l=this.length):typeof l=="string"&&(h=l,l=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!s.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(t.length===1){const g=t.charCodeAt(0);(h==="utf8"&&g<128||h==="latin1")&&(t=g)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(i<0||this.length<i||this.length<l)throw new RangeError("Out of range index");if(l<=i)return this;i=i>>>0,l=l===void 0?this.length:l>>>0,t||(t=0);let p;if(typeof t=="number")for(p=i;p<l;++p)this[p]=t;else{const g=s.isBuffer(t)?t:s.from(t,h),T=g.length;if(T===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(p=0;p<l-i;++p)this[p+i]=g[p%T]}return this};const fe={};function Me(a,t,i){fe[a]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}Me("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Me("ERR_INVALID_ARG_TYPE",function(a,t){return`The "${a}" argument must be of type number. Received type ${typeof t}`},TypeError),Me("ERR_OUT_OF_RANGE",function(a,t,i){let l=`The value of "${a}" is out of range.`,h=i;return Number.isInteger(i)&&Math.abs(i)>2**32?h=At(String(i)):typeof i=="bigint"&&(h=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(h=At(h)),h+="n"),l+=` It must be ${t}. Received ${h}`,l},RangeError);function At(a){let t="",i=a.length;const l=a[0]==="-"?1:0;for(;i>=l+4;i-=3)t=`_${a.slice(i-3,i)}${t}`;return`${a.slice(0,i)}${t}`}function Ir(a,t,i){he(t,"offset"),(a[t]===void 0||a[t+i]===void 0)&&we(t,a.length-(i+1))}function xt(a,t,i,l,h,p){if(a>i||a<t){const g=typeof t=="bigint"?"n":"";let T;throw p>3?t===0||t===BigInt(0)?T=`>= 0${g} and < 2${g} ** ${(p+1)*8}${g}`:T=`>= -(2${g} ** ${(p+1)*8-1}${g}) and < 2 ** ${(p+1)*8-1}${g}`:T=`>= ${t}${g} and <= ${i}${g}`,new fe.ERR_OUT_OF_RANGE("value",T,a)}Ir(l,h,p)}function he(a,t){if(typeof a!="number")throw new fe.ERR_INVALID_ARG_TYPE(t,"number",a)}function we(a,t,i){throw Math.floor(a)!==a?(he(a,i),new fe.ERR_OUT_OF_RANGE(i||"offset","an integer",a)):t<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${t}`,a)}const Cr=/[^+/0-9A-Za-z-_]/g;function Ur(a){if(a=a.split("=")[0],a=a.trim().replace(Cr,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function Pe(a,t){t=t||1/0;let i;const l=a.length;let h=null;const p=[];for(let g=0;g<l;++g){if(i=a.charCodeAt(g),i>55295&&i<57344){if(!h){if(i>56319){(t-=3)>-1&&p.push(239,191,189);continue}else if(g+1===l){(t-=3)>-1&&p.push(239,191,189);continue}h=i;continue}if(i<56320){(t-=3)>-1&&p.push(239,191,189),h=i;continue}i=(h-55296<<10|i-56320)+65536}else h&&(t-=3)>-1&&p.push(239,191,189);if(h=null,i<128){if((t-=1)<0)break;p.push(i)}else if(i<2048){if((t-=2)<0)break;p.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;p.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;p.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return p}function Or(a){const t=[];for(let i=0;i<a.length;++i)t.push(a.charCodeAt(i)&255);return t}function Rr(a,t){let i,l,h;const p=[];for(let g=0;g<a.length&&!((t-=2)<0);++g)i=a.charCodeAt(g),l=i>>8,h=i%256,p.push(h),p.push(l);return p}function Tt(a){return e.toByteArray(Ur(a))}function xe(a,t,i,l){let h;for(h=0;h<l&&!(h+i>=t.length||h>=a.length);++h)t[h+i]=a[h];return h}function Q(a,t){return a instanceof t||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===t.name}function De(a){return a!==a}const kr=function(){const a="0123456789abcdef",t=new Array(256);for(let i=0;i<16;++i){const l=i*16;for(let h=0;h<16;++h)t[l+h]=a[i]+a[h]}return t}();function ne(a){return typeof BigInt>"u"?Lr:a}function Lr(){throw new Error("BigInt not supported")}})(Se);function Sa(){throw new Error("setTimeout has not been defined")}function Ba(){throw new Error("clearTimeout has not been defined")}var Bt=Sa,It=Ba;typeof Wn.setTimeout=="function"&&(Bt=setTimeout);typeof Wn.clearTimeout=="function"&&(It=clearTimeout);function Ia(r){if(Bt===setTimeout)return setTimeout(r,0);if((Bt===Sa||!Bt)&&setTimeout)return Bt=setTimeout,setTimeout(r,0);try{return Bt(r,0)}catch{try{return Bt.call(null,r,0)}catch{return Bt.call(this,r,0)}}}function es(r){if(It===clearTimeout)return clearTimeout(r);if((It===Ba||!It)&&clearTimeout)return It=clearTimeout,clearTimeout(r);try{return It(r)}catch{try{return It.call(null,r)}catch{return It.call(this,r)}}}var ut=[],rr=!1,Nt,vn=-1;function ts(){!rr||!Nt||(rr=!1,Nt.length?ut=Nt.concat(ut):vn=-1,ut.length&&Ca())}function Ca(){if(!rr){var r=Ia(ts);rr=!0;for(var e=ut.length;e;){for(Nt=ut,ut=[];++vn<e;)Nt&&Nt[vn].run();vn=-1,e=ut.length}Nt=null,rr=!1,es(r)}}function rs(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ut.push(new Ua(r,e)),ut.length===1&&!rr&&Ia(Ca)}function Ua(r,e){this.fun=r,this.array=e}Ua.prototype.run=function(){this.fun.apply(null,this.array)};var ns="browser",is="browser",as=!0,os={},ss=[],us="",cs={},ls={},fs={};function Vt(){}var hs=Vt,ps=Vt,ds=Vt,ys=Vt,gs=Vt,ms=Vt,ws=Vt;function vs(r){throw new Error("process.binding is not supported")}function _s(){return"/"}function bs(r){throw new Error("process.chdir is not supported")}function Es(){return 0}var er=Wn.performance||{},As=er.now||er.mozNow||er.msNow||er.oNow||er.webkitNow||function(){return new Date().getTime()};function xs(r){var e=As.call(er)*.001,n=Math.floor(e),o=Math.floor(e%1*1e9);return r&&(n=n-r[0],o=o-r[1],o<0&&(n--,o+=1e9)),[n,o]}var Ts=new Date;function Ss(){var r=new Date,e=r-Ts;return e/1e3}var $r={nextTick:rs,title:ns,browser:as,env:os,argv:ss,version:us,versions:cs,on:hs,addListener:ps,once:ds,off:ys,removeListener:gs,removeAllListeners:ms,emit:ws,binding:vs,cwd:_s,chdir:bs,umask:Es,hrtime:xs,platform:is,release:ls,config:fs,uptime:Ss},Bs=Object.create,Ri=Object.defineProperty,Is=Object.getOwnPropertyDescriptor,Oa=Object.getOwnPropertyNames,Cs=Object.getPrototypeOf,Us=Object.prototype.hasOwnProperty,Re=(r,e)=>function(){return e||(0,r[Oa(r)[0]])((e={exports:{}}).exports,e),e.exports},Ra=(r,e)=>{for(var n in e)Ri(r,n,{get:e[n],enumerable:!0})},Os=(r,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of Oa(e))!Us.call(r,u)&&u!==n&&Ri(r,u,{get:()=>e[u],enumerable:!(o=Is(e,u))||o.enumerable});return r},ki=(r,e,n)=>(n=r!=null?Bs(Cs(r)):{},Os(e||!r||!r.__esModule?Ri(n,"default",{value:r,enumerable:!0}):n,r)),Rs=Re({"node_modules/obliterator/iterator.js"(r,e){function n(o){if(typeof o!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=o}typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=function(){return this}),n.of=function(){var o=arguments,u=o.length,c=0;return new n(function(){return c>=u?{done:!0}:{done:!1,value:o[c++]}})},n.empty=function(){var o=new n(function(){return{done:!0}});return o},n.fromSequence=function(o){var u=0,c=o.length;return new n(function(){return u>=c?{done:!0}:{done:!1,value:o[u++]}})},n.is=function(o){return o instanceof n?!0:typeof o=="object"&&o!==null&&typeof o.next=="function"},e.exports=n}}),ks=Re({"node_modules/obliterator/support.js"(r){r.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",r.SYMBOL_SUPPORT=typeof Symbol<"u"}}),Li=Re({"node_modules/obliterator/foreach.js"(r,e){var n=ks(),o=n.ARRAY_BUFFER_SUPPORT,u=n.SYMBOL_SUPPORT;e.exports=function(f,s){var d,y,_,w,E;if(!f)throw new Error("obliterator/forEach: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(f)||o&&ArrayBuffer.isView(f)||typeof f=="string"||f.toString()==="[object Arguments]"){for(_=0,w=f.length;_<w;_++)s(f[_],_);return}if(typeof f.forEach=="function"){f.forEach(s);return}if(u&&Symbol.iterator in f&&typeof f.next!="function"&&(f=f[Symbol.iterator]()),typeof f.next=="function"){for(d=f,_=0;E=d.next(),E.done!==!0;)s(E.value,_),_++;return}for(y in f)f.hasOwnProperty(y)&&s(f[y],y)}}}),ji=Re({"node_modules/mnemonist/utils/typed-arrays.js"(r){var e=Math.pow(2,8)-1,n=Math.pow(2,16)-1,o=Math.pow(2,32)-1,u=Math.pow(2,7)-1,c=Math.pow(2,15)-1,f=Math.pow(2,31)-1;r.getPointerArray=function(d){var y=d-1;if(y<=e)return Uint8Array;if(y<=n)return Uint16Array;if(y<=o)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},r.getSignedPointerArray=function(d){var y=d-1;return y<=u?Int8Array:y<=c?Int16Array:y<=f?Int32Array:Float64Array},r.getNumberType=function(d){return d===(d|0)?Math.sign(d)===-1?d<=127&&d>=-128?Int8Array:d<=32767&&d>=-32768?Int16Array:Int32Array:d<=255?Uint8Array:d<=65535?Uint16Array:Uint32Array:Float64Array};var s={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};r.getMinimalRepresentation=function(d,y){var _=null,w=0,E,b,v,A,S;for(A=0,S=d.length;A<S;A++)v=y?y(d[A]):d[A],b=r.getNumberType(v),E=s[b.name],E>w&&(w=E,_=b);return _},r.isTypedArray=function(d){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(d)},r.concat=function(){var d=0,y,_,w;for(y=0,w=arguments.length;y<w;y++)d+=arguments[y].length;var E=new arguments[0].constructor(d);for(y=0,_=0;y<w;y++)E.set(arguments[y],_),_+=arguments[y].length;return E},r.indices=function(d){for(var y=r.getPointerArray(d),_=new y(d),w=0;w<d;w++)_[w]=w;return _}}}),ka=Re({"node_modules/mnemonist/utils/iterables.js"(r){var e=Li(),n=ji();function o(s){return Array.isArray(s)||n.isTypedArray(s)}function u(s){if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size}function c(s){var d=u(s),y=typeof d=="number"?new Array(d):[],_=0;return e(s,function(w){y[_++]=w}),y}function f(s){var d=u(s),y=typeof d=="number"?n.getPointerArray(d):Array,_=typeof d=="number"?new Array(d):[],w=typeof d=="number"?new y(d):[],E=0;return e(s,function(b){_[E]=b,w[E]=E++}),[_,w]}r.isArrayLike=o,r.guessLength=u,r.toArray=c,r.toArrayWithIndices=f}}),Ls=Re({"node_modules/mnemonist/lru-cache.js"(r,e){var n=Rs(),o=Li(),u=ji(),c=ka();function f(s,d,y){if(arguments.length<2&&(y=s,s=null,d=null),this.capacity=y,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var _=u.getPointerArray(y);this.forward=new _(y),this.backward=new _(y),this.K=typeof s=="function"?new s(y):new Array(y),this.V=typeof d=="function"?new d(y):new Array(y),this.size=0,this.head=0,this.tail=0,this.items={}}f.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}},f.prototype.splayOnTop=function(s){var d=this.head;if(this.head===s)return this;var y=this.backward[s],_=this.forward[s];return this.tail===s?this.tail=y:this.backward[_]=y,this.forward[y]=_,this.backward[d]=s,this.head=s,this.forward[s]=d,this},f.prototype.set=function(s,d){var y=this.items[s];if(typeof y<"u"){this.splayOnTop(y),this.V[y]=d;return}this.size<this.capacity?y=this.size++:(y=this.tail,this.tail=this.backward[y],delete this.items[this.K[y]]),this.items[s]=y,this.K[y]=s,this.V[y]=d,this.forward[y]=this.head,this.backward[this.head]=y,this.head=y},f.prototype.setpop=function(s,d){var y=null,_=null,w=this.items[s];return typeof w<"u"?(this.splayOnTop(w),y=this.V[w],this.V[w]=d,{evicted:!1,key:s,value:y}):(this.size<this.capacity?w=this.size++:(w=this.tail,this.tail=this.backward[w],y=this.V[w],_=this.K[w],delete this.items[_]),this.items[s]=w,this.K[w]=s,this.V[w]=d,this.forward[w]=this.head,this.backward[this.head]=w,this.head=w,_?{evicted:!0,key:_,value:y}:null)},f.prototype.has=function(s){return s in this.items},f.prototype.get=function(s){var d=this.items[s];if(!(typeof d>"u"))return this.splayOnTop(d),this.V[d]},f.prototype.peek=function(s){var d=this.items[s];if(!(typeof d>"u"))return this.V[d]},f.prototype.forEach=function(s,d){d=arguments.length>1?d:this;for(var y=0,_=this.size,w=this.head,E=this.K,b=this.V,v=this.forward;y<_;)s.call(d,b[w],E[w],this),w=v[w],y++},f.prototype.keys=function(){var s=0,d=this.size,y=this.head,_=this.K,w=this.forward;return new n(function(){if(s>=d)return{done:!0};var E=_[y];return s++,s<d&&(y=w[y]),{done:!1,value:E}})},f.prototype.values=function(){var s=0,d=this.size,y=this.head,_=this.V,w=this.forward;return new n(function(){if(s>=d)return{done:!0};var E=_[y];return s++,s<d&&(y=w[y]),{done:!1,value:E}})},f.prototype.entries=function(){var s=0,d=this.size,y=this.head,_=this.K,w=this.V,E=this.forward;return new n(function(){if(s>=d)return{done:!0};var b=_[y],v=w[y];return s++,s<d&&(y=E[y]),{done:!1,value:[b,v]}})},typeof Symbol<"u"&&(f.prototype[Symbol.iterator]=f.prototype.entries),f.prototype.inspect=function(){for(var s=new Map,d=this.entries(),y;y=d.next(),!y.done;)s.set(y.value[0],y.value[1]);return Object.defineProperty(s,"constructor",{value:f,enumerable:!1}),s},typeof Symbol<"u"&&(f.prototype[Symbol.for("nodejs.util.inspect.custom")]=f.prototype.inspect),f.from=function(s,d,y,_){if(arguments.length<2){if(_=c.guessLength(s),typeof _!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(_=d,d=null,y=null);var w=new f(d,y,_);return o(s,function(E,b){w.set(b,E)}),w},e.exports=f}}),js=Re({"node_modules/mnemonist/lru-map.js"(r,e){var n=Ls(),o=Li(),u=ji(),c=ka();function f(s,d,y){if(arguments.length<2&&(y=s,s=null,d=null),this.capacity=y,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-map: capacity should be a finite positive integer.");var _=u.getPointerArray(y);this.forward=new _(y),this.backward=new _(y),this.K=typeof s=="function"?new s(y):new Array(y),this.V=typeof d=="function"?new d(y):new Array(y),this.size=0,this.head=0,this.tail=0,this.items=new Map}f.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()},f.prototype.set=function(s,d){var y=this.items.get(s);if(typeof y<"u"){this.splayOnTop(y),this.V[y]=d;return}this.size<this.capacity?y=this.size++:(y=this.tail,this.tail=this.backward[y],this.items.delete(this.K[y])),this.items.set(s,y),this.K[y]=s,this.V[y]=d,this.forward[y]=this.head,this.backward[this.head]=y,this.head=y},f.prototype.setpop=function(s,d){var y=null,_=null,w=this.items.get(s);return typeof w<"u"?(this.splayOnTop(w),y=this.V[w],this.V[w]=d,{evicted:!1,key:s,value:y}):(this.size<this.capacity?w=this.size++:(w=this.tail,this.tail=this.backward[w],y=this.V[w],_=this.K[w],this.items.delete(_)),this.items.set(s,w),this.K[w]=s,this.V[w]=d,this.forward[w]=this.head,this.backward[this.head]=w,this.head=w,_?{evicted:!0,key:_,value:y}:null)},f.prototype.has=function(s){return this.items.has(s)},f.prototype.get=function(s){var d=this.items.get(s);if(!(typeof d>"u"))return this.splayOnTop(d),this.V[d]},f.prototype.peek=function(s){var d=this.items.get(s);if(!(typeof d>"u"))return this.V[d]},f.prototype.splayOnTop=n.prototype.splayOnTop,f.prototype.forEach=n.prototype.forEach,f.prototype.keys=n.prototype.keys,f.prototype.values=n.prototype.values,f.prototype.entries=n.prototype.entries,typeof Symbol<"u"&&(f.prototype[Symbol.iterator]=f.prototype.entries),f.prototype.inspect=n.prototype.inspect,f.from=function(s,d,y,_){if(arguments.length<2){if(_=c.guessLength(s),typeof _!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(_=d,d=null,y=null);var w=new f(d,y,_);return o(s,function(E,b){w.set(b,E)}),w},e.exports=f}}),Fs=Re({"node_modules/ms/index.js"(r,e){var n=1e3,o=n*60,u=o*60,c=u*24,f=c*7,s=c*365.25;e.exports=function(E,b){b=b||{};var v=typeof E;if(v==="string"&&E.length>0)return d(E);if(v==="number"&&isFinite(E))return b.long?_(E):y(E);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(E))};function d(E){if(E=String(E),!(E.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(b){var v=parseFloat(b[1]),A=(b[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return v*s;case"weeks":case"week":case"w":return v*f;case"days":case"day":case"d":return v*c;case"hours":case"hour":case"hrs":case"hr":case"h":return v*u;case"minutes":case"minute":case"mins":case"min":case"m":return v*o;case"seconds":case"second":case"secs":case"sec":case"s":return v*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}}function y(E){var b=Math.abs(E);return b>=c?Math.round(E/c)+"d":b>=u?Math.round(E/u)+"h":b>=o?Math.round(E/o)+"m":b>=n?Math.round(E/n)+"s":E+"ms"}function _(E){var b=Math.abs(E);return b>=c?w(E,b,c,"day"):b>=u?w(E,b,u,"hour"):b>=o?w(E,b,o,"minute"):b>=n?w(E,b,n,"second"):E+" ms"}function w(E,b,v,A){var S=b>=v*1.5;return Math.round(E/v)+" "+A+(S?"s":"")}}}),Ns=Re({"node_modules/debug/src/common.js"(r,e){function n(o){c.debug=c,c.default=c,c.coerce=w,c.disable=d,c.enable=s,c.enabled=y,c.humanize=Fs(),c.destroy=E,Object.keys(o).forEach(b=>{c[b]=o[b]}),c.names=[],c.skips=[],c.formatters={};function u(b){let v=0;for(let A=0;A<b.length;A++)v=(v<<5)-v+b.charCodeAt(A),v|=0;return c.colors[Math.abs(v)%c.colors.length]}c.selectColor=u;function c(b){let v,A=null,S,B;function k(...C){if(!k.enabled)return;const N=k,$=Number(new Date),q=$-(v||$);N.diff=q,N.prev=v,N.curr=$,v=$,C[0]=c.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let ce=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(ke,jt)=>{if(ke==="%%")return"%";ce++;const yt=c.formatters[jt];if(typeof yt=="function"){const Ft=C[ce];ke=yt.call(N,Ft),C.splice(ce,1),ce--}return ke}),c.formatArgs.call(N,C),(N.log||c.log).apply(N,C)}return k.namespace=b,k.useColors=c.useColors(),k.color=c.selectColor(b),k.extend=f,k.destroy=c.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>A!==null?A:(S!==c.namespaces&&(S=c.namespaces,B=c.enabled(b)),B),set:C=>{A=C}}),typeof c.init=="function"&&c.init(k),k}function f(b,v){const A=c(this.namespace+(typeof v>"u"?":":v)+b);return A.log=this.log,A}function s(b){c.save(b),c.namespaces=b,c.names=[],c.skips=[];let v;const A=(typeof b=="string"?b:"").split(/[\s,]+/),S=A.length;for(v=0;v<S;v++)A[v]&&(b=A[v].replace(/\*/g,".*?"),b[0]==="-"?c.skips.push(new RegExp("^"+b.slice(1)+"$")):c.names.push(new RegExp("^"+b+"$")))}function d(){const b=[...c.names.map(_),...c.skips.map(_).map(v=>"-"+v)].join(",");return c.enable(""),b}function y(b){if(b[b.length-1]==="*")return!0;let v,A;for(v=0,A=c.skips.length;v<A;v++)if(c.skips[v].test(b))return!1;for(v=0,A=c.names.length;v<A;v++)if(c.names[v].test(b))return!0;return!1}function _(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function w(b){return b instanceof Error?b.stack||b.message:b}function E(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return c.enable(c.load()),c}e.exports=n}}),Ms=Re({"node_modules/debug/src/browser.js"(r,e){r.formatArgs=o,r.save=u,r.load=c,r.useColors=n,r.storage=f(),r.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;d.splice(1,0,y,"color: inherit");let _=0,w=0;d[0].replace(/%[a-zA-Z%]/g,E=>{E!=="%%"&&(_++,E==="%c"&&(w=_))}),d.splice(w,0,y)}r.log=console.debug||console.log||(()=>{});function u(d){try{d?r.storage.setItem("debug",d):r.storage.removeItem("debug")}catch{}}function c(){let d;try{d=r.storage.getItem("debug")}catch{}return!d&&typeof $r<"u"&&"env"in $r&&(d={}.DEBUG),d}function f(){try{return localStorage}catch{}}e.exports=Ns()(r);var{formatters:s}=e.exports;s.j=function(d){try{return JSON.stringify(d)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}}}),Ps=Re({"node_modules/base64-js/index.js"(r){r.byteLength=d,r.toByteArray=_,r.fromByteArray=b;var e=[],n=[],o=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(c=0,f=u.length;c<f;++c)e[c]=u[c],n[u.charCodeAt(c)]=c;var c,f;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;function s(v){var A=v.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=v.indexOf("=");S===-1&&(S=A);var B=S===A?0:4-S%4;return[S,B]}function d(v){var A=s(v),S=A[0],B=A[1];return(S+B)*3/4-B}function y(v,A,S){return(A+S)*3/4-S}function _(v){var A,S=s(v),B=S[0],k=S[1],C=new o(y(v,B,k)),N=0,$=k>0?B-4:B,q;for(q=0;q<$;q+=4)A=n[v.charCodeAt(q)]<<18|n[v.charCodeAt(q+1)]<<12|n[v.charCodeAt(q+2)]<<6|n[v.charCodeAt(q+3)],C[N++]=A>>16&255,C[N++]=A>>8&255,C[N++]=A&255;return k===2&&(A=n[v.charCodeAt(q)]<<2|n[v.charCodeAt(q+1)]>>4,C[N++]=A&255),k===1&&(A=n[v.charCodeAt(q)]<<10|n[v.charCodeAt(q+1)]<<4|n[v.charCodeAt(q+2)]>>2,C[N++]=A>>8&255,C[N++]=A&255),C}function w(v){return e[v>>18&63]+e[v>>12&63]+e[v>>6&63]+e[v&63]}function E(v,A,S){for(var B,k=[],C=A;C<S;C+=3)B=(v[C]<<16&16711680)+(v[C+1]<<8&65280)+(v[C+2]&255),k.push(w(B));return k.join("")}function b(v){for(var A,S=v.length,B=S%3,k=[],C=16383,N=0,$=S-B;N<$;N+=C)k.push(E(v,N,N+C>$?$:N+C));return B===1?(A=v[S-1],k.push(e[A>>2]+e[A<<4&63]+"==")):B===2&&(A=(v[S-2]<<8)+v[S-1],k.push(e[A>>10]+e[A>>4&63]+e[A<<2&63]+"=")),k.join("")}}}),Ds=Re({"node_modules/ieee754/index.js"(r){r.read=function(e,n,o,u,c){var f,s,d=c*8-u-1,y=(1<<d)-1,_=y>>1,w=-7,E=o?c-1:0,b=o?-1:1,v=e[n+E];for(E+=b,f=v&(1<<-w)-1,v>>=-w,w+=d;w>0;f=f*256+e[n+E],E+=b,w-=8);for(s=f&(1<<-w)-1,f>>=-w,w+=u;w>0;s=s*256+e[n+E],E+=b,w-=8);if(f===0)f=1-_;else{if(f===y)return s?NaN:(v?-1:1)*(1/0);s=s+Math.pow(2,u),f=f-_}return(v?-1:1)*s*Math.pow(2,f-u)},r.write=function(e,n,o,u,c,f){var s,d,y,_=f*8-c-1,w=(1<<_)-1,E=w>>1,b=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=u?0:f-1,A=u?1:-1,S=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(d=isNaN(n)?1:0,s=w):(s=Math.floor(Math.log(n)/Math.LN2),n*(y=Math.pow(2,-s))<1&&(s--,y*=2),s+E>=1?n+=b/y:n+=b*Math.pow(2,1-E),n*y>=2&&(s++,y/=2),s+E>=w?(d=0,s=w):s+E>=1?(d=(n*y-1)*Math.pow(2,c),s=s+E):(d=n*Math.pow(2,E-1)*Math.pow(2,c),s=0));c>=8;e[o+v]=d&255,v+=A,d/=256,c-=8);for(s=s<<c|d,_+=c;_>0;e[o+v]=s&255,v+=A,s/=256,_-=8);e[o+v-A]|=S*128}}}),$s=Re({"node_modules/buffer/index.js"(r){var e=Ps(),n=Ds(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=k,r.INSPECT_MAX_BYTES=50;var u=2147483647;r.kMaxLength=u,s.TYPED_ARRAY_SUPPORT=c(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const a=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(a,t),a.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function f(a){if(a>u)throw new RangeError('The value "'+a+'" is invalid for option "size"');const t=new Uint8Array(a);return Object.setPrototypeOf(t,s.prototype),t}function s(a,t,i){if(typeof a=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(a)}return d(a,t,i)}s.poolSize=8192;function d(a,t,i){if(typeof a=="string")return E(a,t);if(ArrayBuffer.isView(a))return v(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(Q(a,ArrayBuffer)||a&&Q(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Q(a,SharedArrayBuffer)||a&&Q(a.buffer,SharedArrayBuffer)))return A(a,t,i);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const l=a.valueOf&&a.valueOf();if(l!=null&&l!==a)return s.from(l,t,i);const h=S(a);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return s.from(a[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}s.from=function(a,t,i){return d(a,t,i)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function y(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function _(a,t,i){return y(a),a<=0?f(a):t!==void 0?typeof i=="string"?f(a).fill(t,i):f(a).fill(t):f(a)}s.alloc=function(a,t,i){return _(a,t,i)};function w(a){return y(a),f(a<0?0:B(a)|0)}s.allocUnsafe=function(a){return w(a)},s.allocUnsafeSlow=function(a){return w(a)};function E(a,t){if((typeof t!="string"||t==="")&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const i=C(a,t)|0;let l=f(i);const h=l.write(a,t);return h!==i&&(l=l.slice(0,h)),l}function b(a){const t=a.length<0?0:B(a.length)|0,i=f(t);for(let l=0;l<t;l+=1)i[l]=a[l]&255;return i}function v(a){if(Q(a,Uint8Array)){const t=new Uint8Array(a);return A(t.buffer,t.byteOffset,t.byteLength)}return b(a)}function A(a,t,i){if(t<0||a.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');let l;return t===void 0&&i===void 0?l=new Uint8Array(a):i===void 0?l=new Uint8Array(a,t):l=new Uint8Array(a,t,i),Object.setPrototypeOf(l,s.prototype),l}function S(a){if(s.isBuffer(a)){const t=B(a.length)|0,i=f(t);return i.length===0||a.copy(i,0,0,t),i}if(a.length!==void 0)return typeof a.length!="number"||De(a.length)?f(0):b(a);if(a.type==="Buffer"&&Array.isArray(a.data))return b(a.data)}function B(a){if(a>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return a|0}function k(a){return+a!=a&&(a=0),s.alloc(+a)}s.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==s.prototype},s.compare=function(t,i){if(Q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),Q(i,Uint8Array)&&(i=s.from(i,i.offset,i.byteLength)),!s.isBuffer(t)||!s.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let l=t.length,h=i.length;for(let p=0,g=Math.min(l,h);p<g;++p)if(t[p]!==i[p]){l=t[p],h=i[p];break}return l<h?-1:h<l?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,i){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return s.alloc(0);let l;if(i===void 0)for(i=0,l=0;l<t.length;++l)i+=t[l].length;const h=s.allocUnsafe(i);let p=0;for(l=0;l<t.length;++l){let g=t[l];if(Q(g,Uint8Array))p+g.length>h.length?(s.isBuffer(g)||(g=s.from(g)),g.copy(h,p)):Uint8Array.prototype.set.call(h,g,p);else if(s.isBuffer(g))g.copy(h,p);else throw new TypeError('"list" argument must be an Array of Buffers');p+=g.length}return h};function C(a,t){if(s.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||Q(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);const i=a.length,l=arguments.length>2&&arguments[2]===!0;if(!l&&i===0)return 0;let h=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Pe(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Tt(a).length;default:if(h)return l?-1:Pe(a).length;t=(""+t).toLowerCase(),h=!0}}s.byteLength=C;function N(a,t,i){let l=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,t>>>=0,i<=t))return"";for(a||(a="utf8");;)switch(a){case"hex":return Sr(this,t,i);case"utf8":case"utf-8":return gt(this,t,i);case"ascii":return xr(this,t,i);case"latin1":case"binary":return Tr(this,t,i);case"base64":return Er(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Br(this,t,i);default:if(l)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),l=!0}}s.prototype._isBuffer=!0;function $(a,t,i){const l=a[t];a[t]=a[i],a[i]=l}s.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)$(this,i,i+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)$(this,i,i+3),$(this,i+1,i+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)$(this,i,i+7),$(this,i+1,i+6),$(this,i+2,i+5),$(this,i+3,i+4);return this},s.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?gt(this,0,t):N.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:s.compare(this,t)===0},s.prototype.inspect=function(){let t="";const i=r.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},o&&(s.prototype[o]=s.prototype.inspect),s.prototype.compare=function(t,i,l,h,p){if(Q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(i===void 0&&(i=0),l===void 0&&(l=t?t.length:0),h===void 0&&(h=0),p===void 0&&(p=this.length),i<0||l>t.length||h<0||p>this.length)throw new RangeError("out of range index");if(h>=p&&i>=l)return 0;if(h>=p)return-1;if(i>=l)return 1;if(i>>>=0,l>>>=0,h>>>=0,p>>>=0,this===t)return 0;let g=p-h,T=l-i;const F=Math.min(g,T),O=this.slice(h,p),R=t.slice(i,l);for(let U=0;U<F;++U)if(O[U]!==R[U]){g=O[U],T=R[U];break}return g<T?-1:T<g?1:0};function q(a,t,i,l,h){if(a.length===0)return-1;if(typeof i=="string"?(l=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,De(i)&&(i=h?0:a.length-1),i<0&&(i=a.length+i),i>=a.length){if(h)return-1;i=a.length-1}else if(i<0)if(h)i=0;else return-1;if(typeof t=="string"&&(t=s.from(t,l)),s.isBuffer(t))return t.length===0?-1:ce(a,t,i,l,h);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(a,t,i):Uint8Array.prototype.lastIndexOf.call(a,t,i):ce(a,[t],i,l,h);throw new TypeError("val must be string, number or Buffer")}function ce(a,t,i,l,h){let p=1,g=a.length,T=t.length;if(l!==void 0&&(l=String(l).toLowerCase(),l==="ucs2"||l==="ucs-2"||l==="utf16le"||l==="utf-16le")){if(a.length<2||t.length<2)return-1;p=2,g/=2,T/=2,i/=2}function F(R,U){return p===1?R[U]:R.readUInt16BE(U*p)}let O;if(h){let R=-1;for(O=i;O<g;O++)if(F(a,O)===F(t,R===-1?0:O-R)){if(R===-1&&(R=O),O-R+1===T)return R*p}else R!==-1&&(O-=O-R),R=-1}else for(i+T>g&&(i=g-T),O=i;O>=0;O--){let R=!0;for(let U=0;U<T;U++)if(F(a,O+U)!==F(t,U)){R=!1;break}if(R)return O}return-1}s.prototype.includes=function(t,i,l){return this.indexOf(t,i,l)!==-1},s.prototype.indexOf=function(t,i,l){return q(this,t,i,l,!0)},s.prototype.lastIndexOf=function(t,i,l){return q(this,t,i,l,!1)};function at(a,t,i,l){i=Number(i)||0;const h=a.length-i;l?(l=Number(l),l>h&&(l=h)):l=h;const p=t.length;l>p/2&&(l=p/2);let g;for(g=0;g<l;++g){const T=parseInt(t.substr(g*2,2),16);if(De(T))return g;a[i+g]=T}return g}function ke(a,t,i,l){return xe(Pe(t,a.length-i),a,i,l)}function jt(a,t,i,l){return xe(Or(t),a,i,l)}function yt(a,t,i,l){return xe(Tt(t),a,i,l)}function Ft(a,t,i,l){return xe(Rr(t,a.length-i),a,i,l)}s.prototype.write=function(t,i,l,h){if(i===void 0)h="utf8",l=this.length,i=0;else if(l===void 0&&typeof i=="string")h=i,l=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(l)?(l=l>>>0,h===void 0&&(h="utf8")):(h=l,l=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const p=this.length-i;if((l===void 0||l>p)&&(l=p),t.length>0&&(l<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let g=!1;for(;;)switch(h){case"hex":return at(this,t,i,l);case"utf8":case"utf-8":return ke(this,t,i,l);case"ascii":case"latin1":case"binary":return jt(this,t,i,l);case"base64":return yt(this,t,i,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ft(this,t,i,l);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),g=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Er(a,t,i){return t===0&&i===a.length?e.fromByteArray(a):e.fromByteArray(a.slice(t,i))}function gt(a,t,i){i=Math.min(a.length,i);const l=[];let h=t;for(;h<i;){const p=a[h];let g=null,T=p>239?4:p>223?3:p>191?2:1;if(h+T<=i){let F,O,R,U;switch(T){case 1:p<128&&(g=p);break;case 2:F=a[h+1],(F&192)===128&&(U=(p&31)<<6|F&63,U>127&&(g=U));break;case 3:F=a[h+1],O=a[h+2],(F&192)===128&&(O&192)===128&&(U=(p&15)<<12|(F&63)<<6|O&63,U>2047&&(U<55296||U>57343)&&(g=U));break;case 4:F=a[h+1],O=a[h+2],R=a[h+3],(F&192)===128&&(O&192)===128&&(R&192)===128&&(U=(p&15)<<18|(F&63)<<12|(O&63)<<6|R&63,U>65535&&U<1114112&&(g=U))}}g===null?(g=65533,T=1):g>65535&&(g-=65536,l.push(g>>>10&1023|55296),g=56320|g&1023),l.push(g),h+=T}return Ar(l)}var mt=4096;function Ar(a){const t=a.length;if(t<=mt)return String.fromCharCode.apply(String,a);let i="",l=0;for(;l<t;)i+=String.fromCharCode.apply(String,a.slice(l,l+=mt));return i}function xr(a,t,i){let l="";i=Math.min(a.length,i);for(let h=t;h<i;++h)l+=String.fromCharCode(a[h]&127);return l}function Tr(a,t,i){let l="";i=Math.min(a.length,i);for(let h=t;h<i;++h)l+=String.fromCharCode(a[h]);return l}function Sr(a,t,i){const l=a.length;(!t||t<0)&&(t=0),(!i||i<0||i>l)&&(i=l);let h="";for(let p=t;p<i;++p)h+=kr[a[p]];return h}function Br(a,t,i){const l=a.slice(t,i);let h="";for(let p=0;p<l.length-1;p+=2)h+=String.fromCharCode(l[p]+l[p+1]*256);return h}s.prototype.slice=function(t,i){const l=this.length;t=~~t,i=i===void 0?l:~~i,t<0?(t+=l,t<0&&(t=0)):t>l&&(t=l),i<0?(i+=l,i<0&&(i=0)):i>l&&(i=l),i<t&&(i=t);const h=this.subarray(t,i);return Object.setPrototypeOf(h,s.prototype),h};function M(a,t,i){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+t>i)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(t,i,l){t=t>>>0,i=i>>>0,l||M(t,i,this.length);let h=this[t],p=1,g=0;for(;++g<i&&(p*=256);)h+=this[t+g]*p;return h},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,i,l){t=t>>>0,i=i>>>0,l||M(t,i,this.length);let h=this[t+--i],p=1;for(;i>0&&(p*=256);)h+=this[t+--i]*p;return h},s.prototype.readUint8=s.prototype.readUInt8=function(t,i){return t=t>>>0,i||M(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,i){return t=t>>>0,i||M(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,i){return t=t>>>0,i||M(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,i){return t=t>>>0,i||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,i){return t=t>>>0,i||M(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=ne(function(t){t=t>>>0,he(t,"offset");const i=this[t],l=this[t+7];(i===void 0||l===void 0)&&we(t,this.length-8);const h=i+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,p=this[++t]+this[++t]*2**8+this[++t]*2**16+l*2**24;return BigInt(h)+(BigInt(p)<<BigInt(32))}),s.prototype.readBigUInt64BE=ne(function(t){t=t>>>0,he(t,"offset");const i=this[t],l=this[t+7];(i===void 0||l===void 0)&&we(t,this.length-8);const h=i*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],p=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+l;return(BigInt(h)<<BigInt(32))+BigInt(p)}),s.prototype.readIntLE=function(t,i,l){t=t>>>0,i=i>>>0,l||M(t,i,this.length);let h=this[t],p=1,g=0;for(;++g<i&&(p*=256);)h+=this[t+g]*p;return p*=128,h>=p&&(h-=Math.pow(2,8*i)),h},s.prototype.readIntBE=function(t,i,l){t=t>>>0,i=i>>>0,l||M(t,i,this.length);let h=i,p=1,g=this[t+--h];for(;h>0&&(p*=256);)g+=this[t+--h]*p;return p*=128,g>=p&&(g-=Math.pow(2,8*i)),g},s.prototype.readInt8=function(t,i){return t=t>>>0,i||M(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,i){t=t>>>0,i||M(t,2,this.length);const l=this[t]|this[t+1]<<8;return l&32768?l|4294901760:l},s.prototype.readInt16BE=function(t,i){t=t>>>0,i||M(t,2,this.length);const l=this[t+1]|this[t]<<8;return l&32768?l|4294901760:l},s.prototype.readInt32LE=function(t,i){return t=t>>>0,i||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,i){return t=t>>>0,i||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=ne(function(t){t=t>>>0,he(t,"offset");const i=this[t],l=this[t+7];(i===void 0||l===void 0)&&we(t,this.length-8);const h=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(l<<24);return(BigInt(h)<<BigInt(32))+BigInt(i+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),s.prototype.readBigInt64BE=ne(function(t){t=t>>>0,he(t,"offset");const i=this[t],l=this[t+7];(i===void 0||l===void 0)&&we(t,this.length-8);const h=(i<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(h)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+l)}),s.prototype.readFloatLE=function(t,i){return t=t>>>0,i||M(t,4,this.length),n.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,i){return t=t>>>0,i||M(t,4,this.length),n.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,i){return t=t>>>0,i||M(t,8,this.length),n.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,i){return t=t>>>0,i||M(t,8,this.length),n.read(this,t,!1,52,8)};function V(a,t,i,l,h,p){if(!s.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>h||t<p)throw new RangeError('"value" argument is out of bounds');if(i+l>a.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,i,l,h){if(t=+t,i=i>>>0,l=l>>>0,!h){const T=Math.pow(2,8*l)-1;V(this,t,i,l,T,0)}let p=1,g=0;for(this[i]=t&255;++g<l&&(p*=256);)this[i+g]=t/p&255;return i+l},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,i,l,h){if(t=+t,i=i>>>0,l=l>>>0,!h){const T=Math.pow(2,8*l)-1;V(this,t,i,l,T,0)}let p=l-1,g=1;for(this[i+p]=t&255;--p>=0&&(g*=256);)this[i+p]=t/g&255;return i+l},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,1,255,0),this[i]=t&255,i+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,2,65535,0),this[i]=t&255,this[i+1]=t>>>8,i+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=t&255,i+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=t&255,i+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255,i+4};function wt(a,t,i,l,h){xt(t,l,h,a,i,7);let p=Number(t&BigInt(4294967295));a[i++]=p,p=p>>8,a[i++]=p,p=p>>8,a[i++]=p,p=p>>8,a[i++]=p;let g=Number(t>>BigInt(32)&BigInt(4294967295));return a[i++]=g,g=g>>8,a[i++]=g,g=g>>8,a[i++]=g,g=g>>8,a[i++]=g,i}function vt(a,t,i,l,h){xt(t,l,h,a,i,7);let p=Number(t&BigInt(4294967295));a[i+7]=p,p=p>>8,a[i+6]=p,p=p>>8,a[i+5]=p,p=p>>8,a[i+4]=p;let g=Number(t>>BigInt(32)&BigInt(4294967295));return a[i+3]=g,g=g>>8,a[i+2]=g,g=g>>8,a[i+1]=g,g=g>>8,a[i]=g,i+8}s.prototype.writeBigUInt64LE=ne(function(t,i=0){return wt(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=ne(function(t,i=0){return vt(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(t,i,l,h){if(t=+t,i=i>>>0,!h){const F=Math.pow(2,8*l-1);V(this,t,i,l,F-1,-F)}let p=0,g=1,T=0;for(this[i]=t&255;++p<l&&(g*=256);)t<0&&T===0&&this[i+p-1]!==0&&(T=1),this[i+p]=(t/g>>0)-T&255;return i+l},s.prototype.writeIntBE=function(t,i,l,h){if(t=+t,i=i>>>0,!h){const F=Math.pow(2,8*l-1);V(this,t,i,l,F-1,-F)}let p=l-1,g=1,T=0;for(this[i+p]=t&255;--p>=0&&(g*=256);)t<0&&T===0&&this[i+p+1]!==0&&(T=1),this[i+p]=(t/g>>0)-T&255;return i+l},s.prototype.writeInt8=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=t&255,i+1},s.prototype.writeInt16LE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,2,32767,-32768),this[i]=t&255,this[i+1]=t>>>8,i+2},s.prototype.writeInt16BE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=t&255,i+2},s.prototype.writeInt32LE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,4,2147483647,-2147483648),this[i]=t&255,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},s.prototype.writeInt32BE=function(t,i,l){return t=+t,i=i>>>0,l||V(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255,i+4},s.prototype.writeBigInt64LE=ne(function(t,i=0){return wt(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=ne(function(t,i=0){return vt(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _t(a,t,i,l,h,p){if(i+l>a.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function bt(a,t,i,l,h){return t=+t,i=i>>>0,h||_t(a,t,i,4),n.write(a,t,i,l,23,4),i+4}s.prototype.writeFloatLE=function(t,i,l){return bt(this,t,i,!0,l)},s.prototype.writeFloatBE=function(t,i,l){return bt(this,t,i,!1,l)};function Et(a,t,i,l,h){return t=+t,i=i>>>0,h||_t(a,t,i,8),n.write(a,t,i,l,52,8),i+8}s.prototype.writeDoubleLE=function(t,i,l){return Et(this,t,i,!0,l)},s.prototype.writeDoubleBE=function(t,i,l){return Et(this,t,i,!1,l)},s.prototype.copy=function(t,i,l,h){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(l||(l=0),!h&&h!==0&&(h=this.length),i>=t.length&&(i=t.length),i||(i=0),h>0&&h<l&&(h=l),h===l||t.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),t.length-i<h-l&&(h=t.length-i+l);const p=h-l;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,l,h):Uint8Array.prototype.set.call(t,this.subarray(l,h),i),p},s.prototype.fill=function(t,i,l,h){if(typeof t=="string"){if(typeof i=="string"?(h=i,i=0,l=this.length):typeof l=="string"&&(h=l,l=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!s.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(t.length===1){const g=t.charCodeAt(0);(h==="utf8"&&g<128||h==="latin1")&&(t=g)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(i<0||this.length<i||this.length<l)throw new RangeError("Out of range index");if(l<=i)return this;i=i>>>0,l=l===void 0?this.length:l>>>0,t||(t=0);let p;if(typeof t=="number")for(p=i;p<l;++p)this[p]=t;else{const g=s.isBuffer(t)?t:s.from(t,h),T=g.length;if(T===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(p=0;p<l-i;++p)this[p+i]=g[p%T]}return this};var fe={};function Me(a,t,i){fe[a]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}Me("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Me("ERR_INVALID_ARG_TYPE",function(a,t){return`The "${a}" argument must be of type number. Received type ${typeof t}`},TypeError),Me("ERR_OUT_OF_RANGE",function(a,t,i){let l=`The value of "${a}" is out of range.`,h=i;return Number.isInteger(i)&&Math.abs(i)>2**32?h=At(String(i)):typeof i=="bigint"&&(h=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(h=At(h)),h+="n"),l+=` It must be ${t}. Received ${h}`,l},RangeError);function At(a){let t="",i=a.length;const l=a[0]==="-"?1:0;for(;i>=l+4;i-=3)t=`_${a.slice(i-3,i)}${t}`;return`${a.slice(0,i)}${t}`}function Ir(a,t,i){he(t,"offset"),(a[t]===void 0||a[t+i]===void 0)&&we(t,a.length-(i+1))}function xt(a,t,i,l,h,p){if(a>i||a<t){const g=typeof t=="bigint"?"n":"";let T;throw p>3?t===0||t===BigInt(0)?T=`>= 0${g} and < 2${g} ** ${(p+1)*8}${g}`:T=`>= -(2${g} ** ${(p+1)*8-1}${g}) and < 2 ** ${(p+1)*8-1}${g}`:T=`>= ${t}${g} and <= ${i}${g}`,new fe.ERR_OUT_OF_RANGE("value",T,a)}Ir(l,h,p)}function he(a,t){if(typeof a!="number")throw new fe.ERR_INVALID_ARG_TYPE(t,"number",a)}function we(a,t,i){throw Math.floor(a)!==a?(he(a,i),new fe.ERR_OUT_OF_RANGE(i||"offset","an integer",a)):t<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${t}`,a)}var Cr=/[^+/0-9A-Za-z-_]/g;function Ur(a){if(a=a.split("=")[0],a=a.trim().replace(Cr,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function Pe(a,t){t=t||1/0;let i;const l=a.length;let h=null;const p=[];for(let g=0;g<l;++g){if(i=a.charCodeAt(g),i>55295&&i<57344){if(!h){if(i>56319){(t-=3)>-1&&p.push(239,191,189);continue}else if(g+1===l){(t-=3)>-1&&p.push(239,191,189);continue}h=i;continue}if(i<56320){(t-=3)>-1&&p.push(239,191,189),h=i;continue}i=(h-55296<<10|i-56320)+65536}else h&&(t-=3)>-1&&p.push(239,191,189);if(h=null,i<128){if((t-=1)<0)break;p.push(i)}else if(i<2048){if((t-=2)<0)break;p.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;p.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;p.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return p}function Or(a){const t=[];for(let i=0;i<a.length;++i)t.push(a.charCodeAt(i)&255);return t}function Rr(a,t){let i,l,h;const p=[];for(let g=0;g<a.length&&!((t-=2)<0);++g)i=a.charCodeAt(g),l=i>>8,h=i%256,p.push(h),p.push(l);return p}function Tt(a){return e.toByteArray(Ur(a))}function xe(a,t,i,l){let h;for(h=0;h<l&&!(h+i>=t.length||h>=a.length);++h)t[h+i]=a[h];return h}function Q(a,t){return a instanceof t||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===t.name}function De(a){return a!==a}var kr=function(){const a="0123456789abcdef",t=new Array(256);for(let i=0;i<16;++i){const l=i*16;for(let h=0;h<16;++h)t[l+h]=a[i]+a[h]}return t}();function ne(a){return typeof BigInt>"u"?Lr:a}function Lr(){throw new Error("BigInt not supported")}}});function oe(r){return r!=null&&typeof r=="object"&&r["@@functional/placeholder"]===!0}function Ee(r){return function e(n){return arguments.length===0||oe(n)?e:r.apply(this,arguments)}}function le(r){return function e(n,o){switch(arguments.length){case 0:return e;case 1:return oe(n)?e:Ee(function(u){return r(n,u)});default:return oe(n)&&oe(o)?e:oe(n)?Ee(function(u){return r(u,o)}):oe(o)?Ee(function(u){return r(n,u)}):r(n,o)}}}function Vn(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(n){return e.apply(this,arguments)};case 2:return function(n,o){return e.apply(this,arguments)};case 3:return function(n,o,u){return e.apply(this,arguments)};case 4:return function(n,o,u,c){return e.apply(this,arguments)};case 5:return function(n,o,u,c,f){return e.apply(this,arguments)};case 6:return function(n,o,u,c,f,s){return e.apply(this,arguments)};case 7:return function(n,o,u,c,f,s,d){return e.apply(this,arguments)};case 8:return function(n,o,u,c,f,s,d,y){return e.apply(this,arguments)};case 9:return function(n,o,u,c,f,s,d,y,_){return e.apply(this,arguments)};case 10:return function(n,o,u,c,f,s,d,y,_,w){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function La(r,e,n){return function(){for(var o=[],u=0,c=r,f=0,s=!1;f<e.length||u<arguments.length;){var d;f<e.length&&(!oe(e[f])||u>=arguments.length)?d=e[f]:(d=arguments[u],u+=1),o[f]=d,oe(d)?s=!0:c-=1,f+=1}return!s&&c<=0?n.apply(this,o):Vn(Math.max(0,c),La(r,o,n))}}var Zs=le(function(r,e){return r===1?Ee(e):Vn(r,La(r,[],e))}),ja=Zs;function Fi(r){return function e(n,o,u){switch(arguments.length){case 0:return e;case 1:return oe(n)?e:le(function(c,f){return r(n,c,f)});case 2:return oe(n)&&oe(o)?e:oe(n)?le(function(c,f){return r(c,o,f)}):oe(o)?le(function(c,f){return r(n,c,f)}):Ee(function(c){return r(n,o,c)});default:return oe(n)&&oe(o)&&oe(u)?e:oe(n)&&oe(o)?le(function(c,f){return r(c,f,u)}):oe(n)&&oe(u)?le(function(c,f){return r(c,o,f)}):oe(o)&&oe(u)?le(function(c,f){return r(n,c,f)}):oe(n)?Ee(function(c){return r(c,o,u)}):oe(o)?Ee(function(c){return r(n,c,u)}):oe(u)?Ee(function(c){return r(n,o,c)}):r(n,o,u)}}}var Ni=Array.isArray||function(r){return r!=null&&r.length>=0&&Object.prototype.toString.call(r)==="[object Array]"};function zs(r){return r!=null&&typeof r["@@transducer/step"]=="function"}function Mi(r,e,n){return function(){if(arguments.length===0)return n();var o=arguments[arguments.length-1];if(!Ni(o)){for(var u=0;u<r.length;){if(typeof o[r[u]]=="function")return o[r[u]].apply(o,Array.prototype.slice.call(arguments,0,-1));u+=1}if(zs(o)){var c=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return c(o)}}return n.apply(this,arguments)}}function Ws(r){return r&&r["@@transducer/reduced"]?r:{"@@transducer/value":r,"@@transducer/reduced":!0}}var Wr={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}};function ta(r){for(var e=[],n;!(n=r.next()).done;)e.push(n.value);return e}function ra(r,e,n){for(var o=0,u=n.length;o<u;){if(r(e,n[o]))return!0;o+=1}return!1}function qs(r){var e=String(r).match(/^function (\w*)/);return e==null?"":e[1]}function Bn(r,e){return Object.prototype.hasOwnProperty.call(e,r)}function Vs(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var ni=typeof Object.is=="function"?Object.is:Vs,na=Object.prototype.toString,Gs=function(){return na.call(arguments)==="[object Arguments]"?function(r){return na.call(r)==="[object Arguments]"}:function(r){return Bn("callee",r)}}(),Ys=Gs,Hs=!{toString:null}.propertyIsEnumerable("toString"),ia=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],aa=function(){return arguments.propertyIsEnumerable("length")}(),Ks=function(r,e){for(var n=0;n<r.length;){if(r[n]===e)return!0;n+=1}return!1},Xs=Ee(typeof Object.keys=="function"&&!aa?function(r){return Object(r)!==r?[]:Object.keys(r)}:function(r){if(Object(r)!==r)return[];var e,n,o=[],u=aa&&Ys(r);for(e in r)Bn(e,r)&&(!u||e!=="length")&&(o[o.length]=e);if(Hs)for(n=ia.length-1;n>=0;)e=ia[n],Bn(e,r)&&!Ks(o,e)&&(o[o.length]=e),n-=1;return o}),lr=Xs,Js=Ee(function(r){return r===null?"Null":r===void 0?"Undefined":Object.prototype.toString.call(r).slice(8,-1)}),oa=Js;function sa(r,e,n,o){var u=ta(r),c=ta(e);function f(s,d){return Pi(s,d,n.slice(),o.slice())}return!ra(function(s,d){return!ra(f,d,s)},c,u)}function Pi(r,e,n,o){if(ni(r,e))return!0;var u=oa(r);if(u!==oa(e))return!1;if(typeof r["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof r["fantasy-land/equals"]=="function"&&r["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](r);if(typeof r.equals=="function"||typeof e.equals=="function")return typeof r.equals=="function"&&r.equals(e)&&typeof e.equals=="function"&&e.equals(r);switch(u){case"Arguments":case"Array":case"Object":if(typeof r.constructor=="function"&&qs(r.constructor)==="Promise")return r===e;break;case"Boolean":case"Number":case"String":if(!(typeof r==typeof e&&ni(r.valueOf(),e.valueOf())))return!1;break;case"Date":if(!ni(r.valueOf(),e.valueOf()))return!1;break;case"Error":return r.name===e.name&&r.message===e.message;case"RegExp":if(!(r.source===e.source&&r.global===e.global&&r.ignoreCase===e.ignoreCase&&r.multiline===e.multiline&&r.sticky===e.sticky&&r.unicode===e.unicode))return!1;break}for(var c=n.length-1;c>=0;){if(n[c]===r)return o[c]===e;c-=1}switch(u){case"Map":return r.size!==e.size?!1:sa(r.entries(),e.entries(),n.concat([r]),o.concat([e]));case"Set":return r.size!==e.size?!1:sa(r.values(),e.values(),n.concat([r]),o.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var f=lr(r);if(f.length!==lr(e).length)return!1;var s=n.concat([r]),d=o.concat([e]);for(c=f.length-1;c>=0;){var y=f[c];if(!(Bn(y,e)&&Pi(e[y],r[y],s,d)))return!1;c-=1}return!0}var Qs=le(function(r,e){return Pi(r,e,[],[])}),Fa=Qs;function eu(r,e,n){var o,u;if(typeof r.indexOf=="function")switch(typeof e){case"number":if(e===0){for(o=1/e;n<r.length;){if(u=r[n],u===0&&1/u===o)return n;n+=1}return-1}else if(e!==e){for(;n<r.length;){if(u=r[n],typeof u=="number"&&u!==u)return n;n+=1}return-1}return r.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return r.indexOf(e,n);case"object":if(e===null)return r.indexOf(e,n)}for(;n<r.length;){if(Fa(r[n],e))return n;n+=1}return-1}function tu(r,e){return eu(e,r,0)>=0}function Zr(r,e){for(var n=0,o=e.length,u=Array(o);n<o;)u[n]=r(e[n]),n+=1;return u}function ii(r){var e=r.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var jr=function(r){return(r<10?"0":"")+r},ru=typeof Date.prototype.toISOString=="function"?function(r){return r.toISOString()}:function(r){return r.getUTCFullYear()+"-"+jr(r.getUTCMonth()+1)+"-"+jr(r.getUTCDate())+"T"+jr(r.getUTCHours())+":"+jr(r.getUTCMinutes())+":"+jr(r.getUTCSeconds())+"."+(r.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},nu=ru;function iu(r){return function(){return!r.apply(this,arguments)}}function Na(r,e,n){for(var o=0,u=n.length;o<u;)e=r(e,n[o]),o+=1;return e}function au(r,e){for(var n=0,o=e.length,u=[];n<o;)r(e[n])&&(u[u.length]=e[n]),n+=1;return u}function ou(r){return Object.prototype.toString.call(r)==="[object Object]"}var su=function(){function r(e,n){this.xf=n,this.f=e}return r.prototype["@@transducer/init"]=Wr.init,r.prototype["@@transducer/result"]=Wr.result,r.prototype["@@transducer/step"]=function(e,n){return this.f(n)?this.xf["@@transducer/step"](e,n):e},r}();function uu(r){return function(e){return new su(r,e)}}var cu=le(Mi(["fantasy-land/filter","filter"],uu,function(r,e){return ou(e)?Na(function(n,o){return r(e[o])&&(n[o]=e[o]),n},{},lr(e)):au(r,e)})),lu=cu,fu=le(function(r,e){return lu(iu(r),e)}),hu=fu;function Ma(r,e){var n=function(c){var f=e.concat([r]);return tu(c,f)?"<Circular>":Ma(c,f)},o=function(c,f){return Zr(function(s){return ii(s)+": "+n(c[s])},f.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+Zr(n,r).join(", ")+"))";case"[object Array]":return"["+Zr(n,r).concat(o(r,hu(function(c){return/^\d+$/.test(c)},lr(r)))).join(", ")+"]";case"[object Boolean]":return typeof r=="object"?"new Boolean("+n(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?n(NaN):ii(nu(r)))+")";case"[object Map]":return"new Map("+n(Array.from(r))+")";case"[object Null]":return"null";case"[object Number]":return typeof r=="object"?"new Number("+n(r.valueOf())+")":1/r===-1/0?"-0":r.toString(10);case"[object Set]":return"new Set("+n(Array.from(r).sort())+")";case"[object String]":return typeof r=="object"?"new String("+n(r.valueOf())+")":ii(r);case"[object Undefined]":return"undefined";default:if(typeof r.toString=="function"){var u=r.toString();if(u!=="[object Object]")return u}return"{"+o(r,lr(r)).join(", ")+"}"}}var pu=Ee(function(r){return Ma(r,[])}),ua=pu,du=le(function(r,e){if(r===e)return e;function n(s,d){if(s>d!=d>s)return d>s?d:s}var o=n(r,e);if(o!==void 0)return o;var u=n(typeof r,typeof e);if(u!==void 0)return u===typeof r?r:e;var c=ua(r),f=n(c,ua(e));return f!==void 0&&f===c?r:e}),yu=du,gu=function(){function r(e,n){this.xf=n,this.f=e}return r.prototype["@@transducer/init"]=Wr.init,r.prototype["@@transducer/result"]=Wr.result,r.prototype["@@transducer/step"]=function(e,n){return this.xf["@@transducer/step"](e,this.f(n))},r}(),mu=function(r){return function(e){return new gu(r,e)}},wu=mu,vu=le(Mi(["fantasy-land/map","map"],wu,function(r,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return ja(e.length,function(){return r.call(this,e.apply(this,arguments))});case"[object Object]":return Na(function(n,o){return n[o]=r(e[o]),n},{},lr(e));default:return Zr(r,e)}})),_u=vu,Pa=Number.isInteger||function(r){return r<<0===r};function Da(r){return Object.prototype.toString.call(r)==="[object String]"}var bu=le(function(r,e){var n=r<0?e.length+r:r;return Da(e)?e.charAt(n):e[n]}),$a=bu,Eu=le(function(r,e){if(e!=null)return Pa(r)?$a(r,e):e[r]}),Gn=Eu,Au=le(function(r,e){return _u(Gn(r),e)}),xu=Au,Tu=Ee(function(r){return Ni(r)?!0:!r||typeof r!="object"||Da(r)?!1:r.length===0?!0:r.length>0?r.hasOwnProperty(0)&&r.hasOwnProperty(r.length-1):!1}),Su=Tu,ca=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Bu(r,e,n){return function(o,u,c){if(Su(c))return r(o,u,c);if(c==null)return u;if(typeof c["fantasy-land/reduce"]=="function")return e(o,u,c,"fantasy-land/reduce");if(c[ca]!=null)return n(o,u,c[ca]());if(typeof c.next=="function")return n(o,u,c);if(typeof c.reduce=="function")return e(o,u,c,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function Iu(r,e,n){for(var o=0,u=n.length;o<u;){if(e=r["@@transducer/step"](e,n[o]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}o+=1}return r["@@transducer/result"](e)}var Cu=le(function(r,e){return Vn(r.length,function(){return r.apply(e,arguments)})}),Uu=Cu;function Ou(r,e,n){for(var o=n.next();!o.done;){if(e=r["@@transducer/step"](e,o.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}o=n.next()}return r["@@transducer/result"](e)}function Ru(r,e,n,o){return r["@@transducer/result"](n[o](Uu(r["@@transducer/step"],r),e))}var ku=Bu(Iu,Ru,Ou),Lu=ku,ju=function(){function r(e){this.f=e}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(e){return e},r.prototype["@@transducer/step"]=function(e,n){return this.f(e,n)},r}();function Fu(r){return new ju(r)}var Nu=Fi(function(r,e,n){return Lu(typeof r=="function"?Fu(r):r,e,n)}),Za=Nu;function Mu(r,e){return function(){return e.call(this,r.apply(this,arguments))}}function za(r,e){return function(){var n=arguments.length;if(n===0)return e();var o=arguments[n-1];return Ni(o)||typeof o[r]!="function"?e.apply(this,arguments):o[r].apply(o,Array.prototype.slice.call(arguments,0,n-1))}}var Pu=Fi(za("slice",function(r,e,n){return Array.prototype.slice.call(n,r,e)})),Du=Pu,$u=Ee(za("tail",Du(1,1/0))),Zu=$u;function Wa(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Vn(arguments[0].length,Za(Mu,arguments[0],Zu(arguments)))}var zu=le(function(r,e){return ja(Za(yu,0,xu("length",e)),function(){var n=arguments,o=this;return r.apply(o,Zr(function(u){return u.apply(o,n)},e))})}),Wu=zu,qu=le(function(r,e){return e==null||e!==e?r:e}),fi=qu,Vu=function(){function r(e,n){this.xf=n,this.f=e,this.found=!1}return r.prototype["@@transducer/init"]=Wr.init,r.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},r.prototype["@@transducer/step"]=function(e,n){return this.f(n)&&(this.found=!0,e=Ws(this.xf["@@transducer/step"](e,n))),e},r}();function Gu(r){return function(e){return new Vu(r,e)}}var Yu=le(Mi(["find"],Gu,function(r,e){for(var n=0,o=e.length;n<o;){if(r(e[n]))return e[n];n+=1}})),Hu=Yu,Ku=Ee(function(r){return Wu(function(){return Array.prototype.slice.call(arguments,0)},r)}),Xu=Ku,Ju=le(function(r,e){return r.map(function(n){for(var o=e,u=0,c;u<n.length;){if(o==null)return;c=n[u],o=Pa(c)?$a(c,o):o[c],u+=1}return o})}),Qu=Ju,ec=le(function(r,e){return Qu([r],e)[0]}),qa=ec,tc=Fi(function(r,e,n){return Fa(r,Gn(e,n))}),rc=tc,In=class extends Error{constructor(){super(...arguments);W(this,"name","InvalidSchedulerLocation")}},nc=class extends Error{constructor(){super(...arguments);W(this,"name","SchedulerTagNotFound")}},ic=class extends Error{constructor(){super(...arguments);W(this,"name","TransactionNotFound")}},ac="Url",oc="Time-To-Live",sc="Scheduler",hi=r=>Wa(fi([]),Hu(rc(r,"name")),fi({}),Gn("value")),Va=r=>Wa(e=>{if(!e)throw new ic(r);return e},Gn("tags"),fi([]));function Ga({fetch:r,GATEWAY_URL:e}){return async({query:n,variables:o})=>r(`${e}/graphql`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n,variables:o})}).then(u=>u.json())}function uc({fetch:r,GATEWAY_URL:e}){let n=Ga({fetch:r,GATEWAY_URL:e}),o=pi({fetch:r,GATEWAY_URL:e}),u=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async c=>n({query:u,variables:{transactionIds:[c]}}).then(qa(["data","transactions","edges","0","node"])).then(Va(`Process ${c} was not found on gateway ${e}`)).then(hi(sc)).then(f=>{if(!f)throw new nc('No "Scheduler" tag found on process');return o(f)})}function pi({fetch:r,GATEWAY_URL:e}){let n=Ga({fetch:r,GATEWAY_URL:e}),o=`
    query GetSchedulerLocation ($owner: String!) {
      transactions (
        owners: [$owner]
        tags: [
          { name: "Data-Protocol", values: ["ao"] },
          { name: "Type", values: ["Scheduler-Location"] }
        ]
        # Only need the most recent Scheduler-Location
        sort: HEIGHT_DESC
        first: 1
      ) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async u=>n({query:o,variables:{owner:u}}).then(qa(["data","transactions","edges","0","node"])).then(Va(`Could not find 'Scheduler-Location' owner by wallet ${u}`)).then(Xu([hi(ac),hi(oc)])).then(([c,f])=>{if(!c)throw new In('No "Url" tag found on Scheduler-Location');if(!f)throw new In('No "Time-To-Live" tag found on Scheduler-Location');return{url:c,ttl:f,owner:u}})}var Jt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Ya=new Set,di=typeof $r=="object"&&$r?$r:{},Ha=(r,e,n,o)=>{typeof di.emitWarning=="function"?di.emitWarning(r,e,n,o):console.error(`[${n}] ${e}: ${r}`)},Cn=globalThis.AbortController,la=globalThis.AbortSignal,xa;if(typeof Cn>"u"){la=class{constructor(){W(this,"onabort");W(this,"_onabort",[]);W(this,"reason");W(this,"aborted",!1)}addEventListener(n,o){this._onabort.push(o)}},Cn=class{constructor(){W(this,"signal",new la);e()}abort(n){var o,u;if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let c of this.signal._onabort)c(n);(u=(o=this.signal).onabort)==null||u.call(o,n)}}};let r=((xa=di.env)==null?void 0:xa.LRU_CACHE_IGNORE_AC_WARNING)!=="1",e=()=>{r&&(r=!1,Ha("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var cc=r=>!Ya.has(r),Ct=r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),Ka=r=>Ct(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?_n:null:null,_n=class extends Array{constructor(r){super(r),this.fill(0)}},lt,ar,lc=(lt=class{constructor(e,n){W(this,"heap");W(this,"length");if(!m(lt,ar))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){let n=Ka(e);if(!n)return[];Z(lt,ar,!0);let o=new lt(e,n);return Z(lt,ar,!1),o}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},ar=new WeakMap,K(lt,ar,!1),lt),Ze,Ie,ze,We,or,ye,qe,pe,ae,G,_e,Ce,ve,ge,Ve,me,Ge,Ye,Ue,He,kt,be,sn,yi,Mt,ot,un,Oe,zn,Xa,Pt,sr,cn,et,Ut,tt,Ot,ln,gi,ur,bn,cr,En,re,ie,fn,mi,Dt,Mr,hn,fc=(hn=class{constructor(e){K(this,sn);K(this,zn);K(this,et);K(this,tt);K(this,ln);K(this,ur);K(this,cr);K(this,re);K(this,fn);K(this,Dt);K(this,Ze,void 0);K(this,Ie,void 0);K(this,ze,void 0);K(this,We,void 0);K(this,or,void 0);W(this,"ttl");W(this,"ttlResolution");W(this,"ttlAutopurge");W(this,"updateAgeOnGet");W(this,"updateAgeOnHas");W(this,"allowStale");W(this,"noDisposeOnSet");W(this,"noUpdateTTL");W(this,"maxEntrySize");W(this,"sizeCalculation");W(this,"noDeleteOnFetchRejection");W(this,"noDeleteOnStaleGet");W(this,"allowStaleOnFetchAbort");W(this,"allowStaleOnFetchRejection");W(this,"ignoreFetchAbort");K(this,ye,void 0);K(this,qe,void 0);K(this,pe,void 0);K(this,ae,void 0);K(this,G,void 0);K(this,_e,void 0);K(this,Ce,void 0);K(this,ve,void 0);K(this,ge,void 0);K(this,Ve,void 0);K(this,me,void 0);K(this,Ge,void 0);K(this,Ye,void 0);K(this,Ue,void 0);K(this,He,void 0);K(this,kt,void 0);K(this,be,void 0);K(this,Mt,()=>{});K(this,ot,()=>{});K(this,un,()=>{});K(this,Oe,()=>!1);K(this,Pt,e=>{});K(this,sr,(e,n,o)=>{});K(this,cn,(e,n,o,u)=>{if(o||u)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:n=0,ttl:o,ttlResolution:u=1,ttlAutopurge:c,updateAgeOnGet:f,updateAgeOnHas:s,allowStale:d,dispose:y,disposeAfter:_,noDisposeOnSet:w,noUpdateTTL:E,maxSize:b=0,maxEntrySize:v=0,sizeCalculation:A,fetchMethod:S,noDeleteOnFetchRejection:B,noDeleteOnStaleGet:k,allowStaleOnFetchRejection:C,allowStaleOnFetchAbort:N,ignoreFetchAbort:$}=e;if(n!==0&&!Ct(n))throw new TypeError("max option must be a nonnegative integer");let q=n?Ka(n):Array;if(!q)throw new Error("invalid max value: "+n);if(Z(this,Ze,n),Z(this,Ie,b),this.maxEntrySize=v||m(this,Ie),this.sizeCalculation=A,this.sizeCalculation){if(!m(this,Ie)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("fetchMethod must be a function if specified");if(Z(this,or,S),Z(this,kt,!!S),Z(this,pe,new Map),Z(this,ae,new Array(n).fill(void 0)),Z(this,G,new Array(n).fill(void 0)),Z(this,_e,new q(n)),Z(this,Ce,new q(n)),Z(this,ve,0),Z(this,ge,0),Z(this,Ve,lc.create(n)),Z(this,ye,0),Z(this,qe,0),typeof y=="function"&&Z(this,ze,y),typeof _=="function"?(Z(this,We,_),Z(this,me,[])):(Z(this,We,void 0),Z(this,me,void 0)),Z(this,He,!!m(this,ze)),Z(this,be,!!m(this,We)),this.noDisposeOnSet=!!w,this.noUpdateTTL=!!E,this.noDeleteOnFetchRejection=!!B,this.allowStaleOnFetchRejection=!!C,this.allowStaleOnFetchAbort=!!N,this.ignoreFetchAbort=!!$,this.maxEntrySize!==0){if(m(this,Ie)!==0&&!Ct(m(this,Ie)))throw new TypeError("maxSize must be a positive integer if specified");if(!Ct(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");P(this,zn,Xa).call(this)}if(this.allowStale=!!d,this.noDeleteOnStaleGet=!!k,this.updateAgeOnGet=!!f,this.updateAgeOnHas=!!s,this.ttlResolution=Ct(u)||u===0?u:1,this.ttlAutopurge=!!c,this.ttl=o||0,this.ttl){if(!Ct(this.ttl))throw new TypeError("ttl must be a positive integer if specified");P(this,sn,yi).call(this)}if(m(this,Ze)===0&&this.ttl===0&&m(this,Ie)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!m(this,Ze)&&!m(this,Ie)){let ce="LRU_CACHE_UNBOUNDED";cc(ce)&&(Ya.add(ce),Ha("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ce,hn))}}static unsafeExposeInternals(e){return{starts:m(e,Ye),ttls:m(e,Ue),sizes:m(e,Ge),keyMap:m(e,pe),keyList:m(e,ae),valList:m(e,G),next:m(e,_e),prev:m(e,Ce),get head(){return m(e,ve)},get tail(){return m(e,ge)},free:m(e,Ve),isBackgroundFetch:n=>{var o;return P(o=e,re,ie).call(o,n)},backgroundFetch:(n,o,u,c)=>{var f;return P(f=e,cr,En).call(f,n,o,u,c)},moveToTail:n=>{var o;return P(o=e,Dt,Mr).call(o,n)},indexes:n=>{var o;return P(o=e,et,Ut).call(o,n)},rindexes:n=>{var o;return P(o=e,tt,Ot).call(o,n)},isStale:n=>{var o;return m(o=e,Oe).call(o,n)}}}get max(){return m(this,Ze)}get maxSize(){return m(this,Ie)}get calculatedSize(){return m(this,qe)}get size(){return m(this,ye)}get fetchMethod(){return m(this,or)}get dispose(){return m(this,ze)}get disposeAfter(){return m(this,We)}getRemainingTTL(e){return m(this,pe).has(e)?1/0:0}*entries(){for(let e of P(this,et,Ut).call(this))m(this,G)[e]!==void 0&&m(this,ae)[e]!==void 0&&!P(this,re,ie).call(this,m(this,G)[e])&&(yield[m(this,ae)[e],m(this,G)[e]])}*rentries(){for(let e of P(this,tt,Ot).call(this))m(this,G)[e]!==void 0&&m(this,ae)[e]!==void 0&&!P(this,re,ie).call(this,m(this,G)[e])&&(yield[m(this,ae)[e],m(this,G)[e]])}*keys(){for(let e of P(this,et,Ut).call(this)){let n=m(this,ae)[e];n!==void 0&&!P(this,re,ie).call(this,m(this,G)[e])&&(yield n)}}*rkeys(){for(let e of P(this,tt,Ot).call(this)){let n=m(this,ae)[e];n!==void 0&&!P(this,re,ie).call(this,m(this,G)[e])&&(yield n)}}*values(){for(let e of P(this,et,Ut).call(this))m(this,G)[e]!==void 0&&!P(this,re,ie).call(this,m(this,G)[e])&&(yield m(this,G)[e])}*rvalues(){for(let e of P(this,tt,Ot).call(this))m(this,G)[e]!==void 0&&!P(this,re,ie).call(this,m(this,G)[e])&&(yield m(this,G)[e])}[Symbol.iterator](){return this.entries()}find(e,n={}){for(let o of P(this,et,Ut).call(this)){let u=m(this,G)[o],c=P(this,re,ie).call(this,u)?u.__staleWhileFetching:u;if(c!==void 0&&e(c,m(this,ae)[o],this))return this.get(m(this,ae)[o],n)}}forEach(e,n=this){for(let o of P(this,et,Ut).call(this)){let u=m(this,G)[o],c=P(this,re,ie).call(this,u)?u.__staleWhileFetching:u;c!==void 0&&e.call(n,c,m(this,ae)[o],this)}}rforEach(e,n=this){for(let o of P(this,tt,Ot).call(this)){let u=m(this,G)[o],c=P(this,re,ie).call(this,u)?u.__staleWhileFetching:u;c!==void 0&&e.call(n,c,m(this,ae)[o],this)}}purgeStale(){let e=!1;for(let n of P(this,tt,Ot).call(this,{allowStale:!0}))m(this,Oe).call(this,n)&&(this.delete(m(this,ae)[n]),e=!0);return e}info(e){let n=m(this,pe).get(e);if(n===void 0)return;let o=m(this,G)[n],u=P(this,re,ie).call(this,o)?o.__staleWhileFetching:o;if(u===void 0)return;let c={value:u};if(m(this,Ue)&&m(this,Ye)){let f=m(this,Ue)[n],s=m(this,Ye)[n];if(f&&s){let d=f-(Jt.now()-s);c.ttl=d,c.start=Date.now()}}return m(this,Ge)&&(c.size=m(this,Ge)[n]),c}dump(){let e=[];for(let n of P(this,et,Ut).call(this,{allowStale:!0})){let o=m(this,ae)[n],u=m(this,G)[n],c=P(this,re,ie).call(this,u)?u.__staleWhileFetching:u;if(c===void 0||o===void 0)continue;let f={value:c};if(m(this,Ue)&&m(this,Ye)){f.ttl=m(this,Ue)[n];let s=Jt.now()-m(this,Ye)[n];f.start=Math.floor(Date.now()-s)}m(this,Ge)&&(f.size=m(this,Ge)[n]),e.unshift([o,f])}return e}load(e){this.clear();for(let[n,o]of e){if(o.start){let u=Date.now()-o.start;o.start=Jt.now()-u}this.set(n,o.value,o)}}set(e,n,o={}){var E,b,v,A,S;if(n===void 0)return this.delete(e),this;let{ttl:u=this.ttl,start:c,noDisposeOnSet:f=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:d}=o,{noUpdateTTL:y=this.noUpdateTTL}=o,_=m(this,cn).call(this,e,n,o.size||0,s);if(this.maxEntrySize&&_>this.maxEntrySize)return d&&(d.set="miss",d.maxEntrySizeExceeded=!0),this.delete(e),this;let w=m(this,ye)===0?void 0:m(this,pe).get(e);if(w===void 0)w=m(this,ye)===0?m(this,ge):m(this,Ve).length!==0?m(this,Ve).pop():m(this,ye)===m(this,Ze)?P(this,ur,bn).call(this,!1):m(this,ye),m(this,ae)[w]=e,m(this,G)[w]=n,m(this,pe).set(e,w),m(this,_e)[m(this,ge)]=w,m(this,Ce)[w]=m(this,ge),Z(this,ge,w),wn(this,ye)._++,m(this,sr).call(this,w,_,d),d&&(d.set="add"),y=!1;else{P(this,Dt,Mr).call(this,w);let B=m(this,G)[w];if(n!==B){if(m(this,kt)&&P(this,re,ie).call(this,B)){B.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:k}=B;k!==void 0&&!f&&(m(this,He)&&((E=m(this,ze))==null||E.call(this,k,e,"set")),m(this,be)&&((b=m(this,me))==null||b.push([k,e,"set"])))}else f||(m(this,He)&&((v=m(this,ze))==null||v.call(this,B,e,"set")),m(this,be)&&((A=m(this,me))==null||A.push([B,e,"set"])));if(m(this,Pt).call(this,w),m(this,sr).call(this,w,_,d),m(this,G)[w]=n,d){d.set="replace";let k=B&&P(this,re,ie).call(this,B)?B.__staleWhileFetching:B;k!==void 0&&(d.oldValue=k)}}else d&&(d.set="update")}if(u!==0&&!m(this,Ue)&&P(this,sn,yi).call(this),m(this,Ue)&&(y||m(this,un).call(this,w,u,c),d&&m(this,ot).call(this,d,w)),!f&&m(this,be)&&m(this,me)){let B=m(this,me),k;for(;k=B==null?void 0:B.shift();)(S=m(this,We))==null||S.call(this,...k)}return this}pop(){var e;try{for(;m(this,ye);){let n=m(this,G)[m(this,ve)];if(P(this,ur,bn).call(this,!0),P(this,re,ie).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(m(this,be)&&m(this,me)){let n=m(this,me),o;for(;o=n==null?void 0:n.shift();)(e=m(this,We))==null||e.call(this,...o)}}}has(e,n={}){let{updateAgeOnHas:o=this.updateAgeOnHas,status:u}=n,c=m(this,pe).get(e);if(c!==void 0){let f=m(this,G)[c];if(P(this,re,ie).call(this,f)&&f.__staleWhileFetching===void 0)return!1;if(m(this,Oe).call(this,c))u&&(u.has="stale",m(this,ot).call(this,u,c));else return o&&m(this,Mt).call(this,c),u&&(u.has="hit",m(this,ot).call(this,u,c)),!0}else u&&(u.has="miss");return!1}peek(e,n={}){let{allowStale:o=this.allowStale}=n,u=m(this,pe).get(e);if(u===void 0||!o&&m(this,Oe).call(this,u))return;let c=m(this,G)[u];return P(this,re,ie).call(this,c)?c.__staleWhileFetching:c}async fetch(e,n={}){let{allowStale:o=this.allowStale,updateAgeOnGet:u=this.updateAgeOnGet,noDeleteOnStaleGet:c=this.noDeleteOnStaleGet,ttl:f=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:d=0,sizeCalculation:y=this.sizeCalculation,noUpdateTTL:_=this.noUpdateTTL,noDeleteOnFetchRejection:w=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:E=this.allowStaleOnFetchRejection,ignoreFetchAbort:b=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:A,forceRefresh:S=!1,status:B,signal:k}=n;if(!m(this,kt))return B&&(B.fetch="get"),this.get(e,{allowStale:o,updateAgeOnGet:u,noDeleteOnStaleGet:c,status:B});let C={allowStale:o,updateAgeOnGet:u,noDeleteOnStaleGet:c,ttl:f,noDisposeOnSet:s,size:d,sizeCalculation:y,noUpdateTTL:_,noDeleteOnFetchRejection:w,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:v,ignoreFetchAbort:b,status:B,signal:k},N=m(this,pe).get(e);if(N===void 0){B&&(B.fetch="miss");let $=P(this,cr,En).call(this,e,N,C,A);return $.__returned=$}else{let $=m(this,G)[N];if(P(this,re,ie).call(this,$)){let ke=o&&$.__staleWhileFetching!==void 0;return B&&(B.fetch="inflight",ke&&(B.returnedStale=!0)),ke?$.__staleWhileFetching:$.__returned=$}let q=m(this,Oe).call(this,N);if(!S&&!q)return B&&(B.fetch="hit"),P(this,Dt,Mr).call(this,N),u&&m(this,Mt).call(this,N),B&&m(this,ot).call(this,B,N),$;let ce=P(this,cr,En).call(this,e,N,C,A),at=ce.__staleWhileFetching!==void 0&&o;return B&&(B.fetch=q?"stale":"refresh",at&&q&&(B.returnedStale=!0)),at?ce.__staleWhileFetching:ce.__returned=ce}}get(e,n={}){let{allowStale:o=this.allowStale,updateAgeOnGet:u=this.updateAgeOnGet,noDeleteOnStaleGet:c=this.noDeleteOnStaleGet,status:f}=n,s=m(this,pe).get(e);if(s!==void 0){let d=m(this,G)[s],y=P(this,re,ie).call(this,d);return f&&m(this,ot).call(this,f,s),m(this,Oe).call(this,s)?(f&&(f.get="stale"),y?(f&&o&&d.__staleWhileFetching!==void 0&&(f.returnedStale=!0),o?d.__staleWhileFetching:void 0):(c||this.delete(e),f&&o&&(f.returnedStale=!0),o?d:void 0)):(f&&(f.get="hit"),y?d.__staleWhileFetching:(P(this,Dt,Mr).call(this,s),u&&m(this,Mt).call(this,s),d))}else f&&(f.get="miss")}delete(e){var o,u,c,f;let n=!1;if(m(this,ye)!==0){let s=m(this,pe).get(e);if(s!==void 0)if(n=!0,m(this,ye)===1)this.clear();else{m(this,Pt).call(this,s);let d=m(this,G)[s];if(P(this,re,ie).call(this,d)?d.__abortController.abort(new Error("deleted")):(m(this,He)||m(this,be))&&(m(this,He)&&((o=m(this,ze))==null||o.call(this,d,e,"delete")),m(this,be)&&((u=m(this,me))==null||u.push([d,e,"delete"]))),m(this,pe).delete(e),m(this,ae)[s]=void 0,m(this,G)[s]=void 0,s===m(this,ge))Z(this,ge,m(this,Ce)[s]);else if(s===m(this,ve))Z(this,ve,m(this,_e)[s]);else{let y=m(this,Ce)[s];m(this,_e)[y]=m(this,_e)[s];let _=m(this,_e)[s];m(this,Ce)[_]=m(this,Ce)[s]}wn(this,ye)._--,m(this,Ve).push(s)}}if(m(this,be)&&((c=m(this,me))!=null&&c.length)){let s=m(this,me),d;for(;d=s==null?void 0:s.shift();)(f=m(this,We))==null||f.call(this,...d)}return n}clear(){var e,n,o;for(let u of P(this,tt,Ot).call(this,{allowStale:!0})){let c=m(this,G)[u];if(P(this,re,ie).call(this,c))c.__abortController.abort(new Error("deleted"));else{let f=m(this,ae)[u];m(this,He)&&((e=m(this,ze))==null||e.call(this,c,f,"delete")),m(this,be)&&((n=m(this,me))==null||n.push([c,f,"delete"]))}}if(m(this,pe).clear(),m(this,G).fill(void 0),m(this,ae).fill(void 0),m(this,Ue)&&m(this,Ye)&&(m(this,Ue).fill(0),m(this,Ye).fill(0)),m(this,Ge)&&m(this,Ge).fill(0),Z(this,ve,0),Z(this,ge,0),m(this,Ve).length=0,Z(this,qe,0),Z(this,ye,0),m(this,be)&&m(this,me)){let u=m(this,me),c;for(;c=u==null?void 0:u.shift();)(o=m(this,We))==null||o.call(this,...c)}}},Ze=new WeakMap,Ie=new WeakMap,ze=new WeakMap,We=new WeakMap,or=new WeakMap,ye=new WeakMap,qe=new WeakMap,pe=new WeakMap,ae=new WeakMap,G=new WeakMap,_e=new WeakMap,Ce=new WeakMap,ve=new WeakMap,ge=new WeakMap,Ve=new WeakMap,me=new WeakMap,Ge=new WeakMap,Ye=new WeakMap,Ue=new WeakMap,He=new WeakMap,kt=new WeakMap,be=new WeakMap,sn=new WeakSet,yi=function(){let e=new _n(m(this,Ze)),n=new _n(m(this,Ze));Z(this,Ue,e),Z(this,Ye,n),Z(this,un,(c,f,s=Jt.now())=>{if(n[c]=f!==0?s:0,e[c]=f,f!==0&&this.ttlAutopurge){let d=setTimeout(()=>{m(this,Oe).call(this,c)&&this.delete(m(this,ae)[c])},f+1);d.unref&&d.unref()}}),Z(this,Mt,c=>{n[c]=e[c]!==0?Jt.now():0}),Z(this,ot,(c,f)=>{if(e[f]){let s=e[f],d=n[f];if(!s||!d)return;c.ttl=s,c.start=d,c.now=o||u();let y=c.now-d;c.remainingTTL=s-y}});let o=0,u=()=>{let c=Jt.now();if(this.ttlResolution>0){o=c;let f=setTimeout(()=>o=0,this.ttlResolution);f.unref&&f.unref()}return c};this.getRemainingTTL=c=>{let f=m(this,pe).get(c);if(f===void 0)return 0;let s=e[f],d=n[f];if(!s||!d)return 1/0;let y=(o||u())-d;return s-y},Z(this,Oe,c=>{let f=n[c],s=e[c];return!!s&&!!f&&(o||u())-f>s})},Mt=new WeakMap,ot=new WeakMap,un=new WeakMap,Oe=new WeakMap,zn=new WeakSet,Xa=function(){let e=new _n(m(this,Ze));Z(this,qe,0),Z(this,Ge,e),Z(this,Pt,n=>{Z(this,qe,m(this,qe)-e[n]),e[n]=0}),Z(this,cn,(n,o,u,c)=>{if(P(this,re,ie).call(this,o))return 0;if(!Ct(u))if(c){if(typeof c!="function")throw new TypeError("sizeCalculation must be a function");if(u=c(o,n),!Ct(u))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return u}),Z(this,sr,(n,o,u)=>{if(e[n]=o,m(this,Ie)){let c=m(this,Ie)-e[n];for(;m(this,qe)>c;)P(this,ur,bn).call(this,!0)}Z(this,qe,m(this,qe)+e[n]),u&&(u.entrySize=o,u.totalCalculatedSize=m(this,qe))})},Pt=new WeakMap,sr=new WeakMap,cn=new WeakMap,et=new WeakSet,Ut=function*({allowStale:e=this.allowStale}={}){if(m(this,ye))for(let n=m(this,ge);!(!P(this,ln,gi).call(this,n)||((e||!m(this,Oe).call(this,n))&&(yield n),n===m(this,ve)));)n=m(this,Ce)[n]},tt=new WeakSet,Ot=function*({allowStale:e=this.allowStale}={}){if(m(this,ye))for(let n=m(this,ve);!(!P(this,ln,gi).call(this,n)||((e||!m(this,Oe).call(this,n))&&(yield n),n===m(this,ge)));)n=m(this,_e)[n]},ln=new WeakSet,gi=function(e){return e!==void 0&&m(this,pe).get(m(this,ae)[e])===e},ur=new WeakSet,bn=function(e){var c,f;let n=m(this,ve),o=m(this,ae)[n],u=m(this,G)[n];return m(this,kt)&&P(this,re,ie).call(this,u)?u.__abortController.abort(new Error("evicted")):(m(this,He)||m(this,be))&&(m(this,He)&&((c=m(this,ze))==null||c.call(this,u,o,"evict")),m(this,be)&&((f=m(this,me))==null||f.push([u,o,"evict"]))),m(this,Pt).call(this,n),e&&(m(this,ae)[n]=void 0,m(this,G)[n]=void 0,m(this,Ve).push(n)),m(this,ye)===1?(Z(this,ve,Z(this,ge,0)),m(this,Ve).length=0):Z(this,ve,m(this,_e)[n]),m(this,pe).delete(o),wn(this,ye)._--,n},cr=new WeakSet,En=function(e,n,o,u){let c=n===void 0?void 0:m(this,G)[n];if(P(this,re,ie).call(this,c))return c;let f=new Cn,{signal:s}=o;s==null||s.addEventListener("abort",()=>f.abort(s.reason),{signal:f.signal});let d={signal:f.signal,options:o,context:u},y=(A,S=!1)=>{let{aborted:B}=f.signal,k=o.ignoreFetchAbort&&A!==void 0;if(o.status&&(B&&!S?(o.status.fetchAborted=!0,o.status.fetchError=f.signal.reason,k&&(o.status.fetchAbortIgnored=!0)):o.status.fetchResolved=!0),B&&!k&&!S)return w(f.signal.reason);let C=b;return m(this,G)[n]===b&&(A===void 0?C.__staleWhileFetching?m(this,G)[n]=C.__staleWhileFetching:this.delete(e):(o.status&&(o.status.fetchUpdated=!0),this.set(e,A,d.options))),A},_=A=>(o.status&&(o.status.fetchRejected=!0,o.status.fetchError=A),w(A)),w=A=>{let{aborted:S}=f.signal,B=S&&o.allowStaleOnFetchAbort,k=B||o.allowStaleOnFetchRejection,C=k||o.noDeleteOnFetchRejection,N=b;if(m(this,G)[n]===b&&(!C||N.__staleWhileFetching===void 0?this.delete(e):B||(m(this,G)[n]=N.__staleWhileFetching)),k)return o.status&&N.__staleWhileFetching!==void 0&&(o.status.returnedStale=!0),N.__staleWhileFetching;if(N.__returned===N)throw A},E=(A,S)=>{var k;let B=(k=m(this,or))==null?void 0:k.call(this,e,c,d);B&&B instanceof Promise&&B.then(C=>A(C===void 0?void 0:C),S),f.signal.addEventListener("abort",()=>{(!o.ignoreFetchAbort||o.allowStaleOnFetchAbort)&&(A(void 0),o.allowStaleOnFetchAbort&&(A=C=>y(C,!0)))})};o.status&&(o.status.fetchDispatched=!0);let b=new Promise(E).then(y,_),v=Object.assign(b,{__abortController:f,__staleWhileFetching:c,__returned:void 0});return n===void 0?(this.set(e,v,{...d.options,status:void 0}),n=m(this,pe).get(e)):m(this,G)[n]=v,v},re=new WeakSet,ie=function(e){if(!m(this,kt))return!1;let n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Cn},fn=new WeakSet,mi=function(e,n){m(this,Ce)[n]=e,m(this,_e)[e]=n},Dt=new WeakSet,Mr=function(e){e!==m(this,ge)&&(e===m(this,ve)?Z(this,ve,m(this,_e)[e]):P(this,fn,mi).call(this,m(this,Ce)[e],m(this,_e)[e]),P(this,fn,mi).call(this,m(this,ge),e),Z(this,ge,e))},hn),$t,pn;function hc({size:r}){return $t||(pn=r,$t=new fc({max:r,maxSize:1e6*5,sizeCalculation:e=>JSON.stringify(e).length,allowStale:!0}),$t)}function pc({cache:r=$t}){return async e=>{if(pn)return r.get(e)}}function dc({cache:r=$t}){return async(e,{url:n,address:o},u)=>{if(pn)return r.set(e,{url:n,address:o},{ttl:u})}}function yc({cache:r=$t}){return async e=>{if(pn)return r.get(e)}}function gc({cache:r=$t}){return async(e,n,o)=>{if(pn)return r.set(e,{url:n,address:e},{ttl:o})}}function mc({fetch:r}){return async(e,n)=>{let o=await r(`${e}?process-id=${n}`,{method:"GET",redirect:"manual"});return[301,302,307,308].includes(o.status)?new URL(o.headers.get("Location")).origin:e}}function wc({loadProcessScheduler:r,cache:e,followRedirects:n,checkForRedirect:o}){let u=async(c,f,s)=>{let d={url:s,address:f.owner};return await Promise.all([e.setByProcess(c,d,f.ttl),e.setByOwner(f.owner,s,f.ttl)]),d};return c=>e.getByProcess(c).then(f=>f||r(c).then(async s=>{let d=s.url;return n&&(d=await o(s.url,c)),u(c,s,d)}))}function vc({loadScheduler:r,cache:e}){return n=>e.getByOwner(n).then(o=>o?{url:o.url}:r(n).then(u=>e.setByOwner(n,u.url,u.ttl).then(()=>({url:u.url}))).catch(u=>{if(!(u instanceof In))throw u}))}function _c({loadScheduler:r,cache:e}){return n=>e.getByOwner(n).then(o=>o?!0:r(n).then(u=>e.setByOwner(n,u.url,u.ttl)).then(()=>!0).catch(u=>{if(u instanceof In)return!1;throw u}))}var bc="https://arweave.net";function Ja({cacheSize:r=100,GATEWAY_URL:e=bc,followRedirects:n=!1}={}){let o=hc({size:r}),u=yc({cache:o}),c=pc({cache:o}),f=gc({cache:o}),s=dc({cache:o}),d=wc({loadProcessScheduler:uc({fetch,GATEWAY_URL:e}),cache:{getByProcess:c,getByOwner:u,setByProcess:s,setByOwner:f},followRedirects:n,checkForRedirect:mc({fetch})}),y=_c({loadScheduler:pi({fetch,GATEWAY_URL:e}),cache:{getByProcess:c,getByOwner:u,setByProcess:s,setByOwner:f}}),_=vc({loadScheduler:pi({fetch,GATEWAY_URL:e}),cache:{getByProcess:c,getByOwner:u,setByProcess:s,setByOwner:f}});return{locate:d,validate:y,raw:_}}var Ec=globalThis.GATEWAY_URL||void 0,Ac=globalThis.SCHEDULER_UTILS_CACHE_SIZE||void 0,xc=globalThis.SCHEDULER_UTILS_FOLLOW_REDIRECTS==="true"||void 0;Ja({GATEWAY_URL:Ec,cacheSize:Ac,followRedirects:xc});var st=r=>({fork:r,toPromise:()=>new Promise((e,n)=>r(n,e)),map:e=>st((n,o)=>r(n,u=>o(e(u)))),bimap:(e,n)=>st((o,u)=>r(c=>o(e(c)),c=>u(n(c)))),chain:e=>st((n,o)=>r(n,u=>e(u).fork(n,o))),bichain:(e,n)=>st((o,u)=>r(c=>e(c).fork(o,u),c=>n(c).fork(o,u))),fold:(e,n)=>st((o,u)=>r(c=>e(c).fork(o,u),c=>n(c).fork(o,u)))}),J=r=>st((e,n)=>n(r)),zt=r=>st((e,n)=>n(r)),Gt=r=>st((e,n)=>e(r)),ue=r=>(...e)=>st((n,o)=>r(...e).then(o).catch(n));function Tc({fetch:r,MU_URL:e,logger:n}){const o=n.child("deployMessage");return u=>J(u).chain(ue(({processId:c,data:f,tags:s,anchor:d,signer:y})=>y({data:f,tags:s,target:c,anchor:d}))).chain(c=>J(c).chain(ue(async f=>r(e,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:f.raw}))).bichain(f=>Gt(new Error(`Error while communicating with MU: ${JSON.stringify(f)}`)),ue(async f=>{if(f.ok)return f.json();throw new Error(`${f.status}: ${await f.text()}`)})).bimap(o.tap("Error encountered when writing message via MU"),o.tap("Successfully wrote message via MU")).map(f=>({res:f,messageId:c.id}))).toPromise()}function Sc({fetch:r,MU_URL:e,logger:n}){const o=n.child("deployProcess");return u=>J(u).chain(ue(({data:c,tags:f,signer:s})=>s({data:c,tags:f}))).chain(c=>J(c).chain(ue(async f=>r(e,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:f.raw}))).bichain(f=>Gt(new Error(`Error while communicating with MU: ${JSON.stringify(f)}`)),ue(async f=>{if(f.ok)return f.json();throw new Error(`${f.status}: ${await f.text()}`)})).bimap(o.tap("Error encountered when deploying process via MU"),o.tap("Successfully deployed process via MU")).map(f=>({res:f,processId:c.id}))).toPromise()}function Bc({fetch:r,MU_URL:e,logger:n}){const o=n.child("deployMonitor");return u=>J(u).chain(ue(({processId:c,data:f,tags:s,anchor:d,signer:y})=>y({data:f,tags:s,target:c,anchor:d}))).chain(c=>J(c).chain(ue(async f=>r(e+"/monitor/"+u.processId,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:f.raw}))).bichain(f=>Gt(new Error(`Error while communicating with MU: ${JSON.stringify(f)}`)),ue(async f=>{if(f.ok)return{ok:!0};throw new Error(`${f.status}: ${await f.text()}`)})).bimap(o.tap("Error encountered when subscribing to process via MU"),o.tap("Successfully subscribed to process via MU")).map(f=>({res:f,messageId:c.id}))).toPromise()}function Ic({fetch:r,MU_URL:e,logger:n}){const o=n.child("deployUnmonitor");return u=>J(u).chain(ue(({processId:c,data:f,tags:s,anchor:d,signer:y})=>y({data:f,tags:s,target:c,anchor:d}))).chain(c=>J(c).chain(ue(async f=>r(e+"/monitor/"+u.processId,{method:"DELETE",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:f.raw}))).bichain(f=>Gt(new Error(`Error while communicating with MU: ${JSON.stringify(f)}`)),ue(async f=>{if(f.ok)return{ok:!0};throw new Error(`${f.status}: ${await f.text()}`)})).bimap(o.tap("Error encountered when unsubscribing to process via MU"),o.tap("Successfully unsubscribed to process via MU")).map(f=>({res:f,messageId:c.id}))).toPromise()}function Cc({fetch:r,CU_URL:e,logger:n}){return o=>J(o).map(n.tap("posting dryrun request to CU")).chain(ue(u=>r(`${e}/dry-run?process-id=${u.Target}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(c=>c.json()))).toPromise()}function Uc({fetch:r,CU_URL:e,logger:n}){return({id:o,processId:u})=>J(`${e}/result/${o}?process-id=${u}`).map(n.tap("fetching message result from CU")).chain(ue(async c=>r(c,{method:"GET",headers:{Accept:"application/json"}}).then(f=>f.json()))).toPromise()}function Oc({fetch:r,CU_URL:e,logger:n}){return({process:o,from:u,to:c,sort:f,limit:s})=>{const d=new URL(`${e}/results/${o}`),y=new URLSearchParams(d.search);return u&&y.append("from",u),c&&y.append("to",c),f&&y.append("sort",f),s&&y.append("limit",s),d.search=y,J(d.toString()).map(n.tap("fetching message result from CU")).chain(ue(async _=>r(_,{method:"GET",headers:{Accept:"application/json"}}).then(w=>w.json()))).toPromise()}}var Rc=ki(js(),1),Pr,kc=({MAX_SIZE:r})=>Pr||(Pr=new Rc.default(r),Pr),ai=({logger:r,fetch:e,cache:n=Pr})=>async({suUrl:o,processId:u})=>n.has(u)?n.get(u):e(`${o}/processes/${u}`,{method:"GET"}).then(async c=>{if(c.ok)return c.json();throw r("Error Encountered when fetching process meta from SU '%s' for process '%s'",o,u),new Error(`Encountered Error fetching scheduled messages from Scheduler Unit: ${c.status}: ${await c.text()}`)}).then(c=>(r("Caching process meta for process '%s'",u),n.set(u,{tags:c.tags}),c)),Lc=function(){return!1},jc=Lc,Fc=function(){return!0},Di=Fc,ht={"@@functional/placeholder":!0};function se(r){return r!=null&&typeof r=="object"&&r["@@functional/placeholder"]===!0}function de(r){return function e(n){return arguments.length===0||se(n)?e:r.apply(this,arguments)}}function te(r){return function e(n,o){switch(arguments.length){case 0:return e;case 1:return se(n)?e:de(function(u){return r(n,u)});default:return se(n)&&se(o)?e:se(n)?de(function(u){return r(u,o)}):se(o)?de(function(u){return r(n,u)}):r(n,o)}}}function Nc(r,e){r=r||[],e=e||[];var n,o=r.length,u=e.length,c=[];for(n=0;n<o;)c[c.length]=r[n],n+=1;for(n=0;n<u;)c[c.length]=e[n],n+=1;return c}function dn(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(n){return e.apply(this,arguments)};case 2:return function(n,o){return e.apply(this,arguments)};case 3:return function(n,o,u){return e.apply(this,arguments)};case 4:return function(n,o,u,c){return e.apply(this,arguments)};case 5:return function(n,o,u,c,f){return e.apply(this,arguments)};case 6:return function(n,o,u,c,f,s){return e.apply(this,arguments)};case 7:return function(n,o,u,c,f,s,d){return e.apply(this,arguments)};case 8:return function(n,o,u,c,f,s,d,y){return e.apply(this,arguments)};case 9:return function(n,o,u,c,f,s,d,y,_){return e.apply(this,arguments)};case 10:return function(n,o,u,c,f,s,d,y,_,w){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Qa(r,e,n){return function(){for(var o=[],u=0,c=r,f=0,s=!1;f<e.length||u<arguments.length;){var d;f<e.length&&(!se(e[f])||u>=arguments.length)?d=e[f]:(d=arguments[u],u+=1),o[f]=d,se(d)?s=!0:c-=1,f+=1}return!s&&c<=0?n.apply(this,o):dn(Math.max(0,c),Qa(r,o,n))}}var Mc=te(function(e,n){return e===1?de(n):dn(e,Qa(e,[],n))}),Yn=Mc;function Yt(r){return function e(n,o,u){switch(arguments.length){case 0:return e;case 1:return se(n)?e:te(function(c,f){return r(n,c,f)});case 2:return se(n)&&se(o)?e:se(n)?te(function(c,f){return r(c,o,f)}):se(o)?te(function(c,f){return r(n,c,f)}):de(function(c){return r(n,o,c)});default:return se(n)&&se(o)&&se(u)?e:se(n)&&se(o)?te(function(c,f){return r(c,f,u)}):se(n)&&se(u)?te(function(c,f){return r(c,o,f)}):se(o)&&se(u)?te(function(c,f){return r(n,c,f)}):se(n)?de(function(c){return r(c,o,u)}):se(o)?de(function(c){return r(n,c,u)}):se(u)?de(function(c){return r(n,o,c)}):r(n,o,u)}}}var fr=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function Pc(r){return r!=null&&typeof r["@@transducer/step"]=="function"}function Hn(r,e,n){return function(){if(arguments.length===0)return n();var o=arguments[arguments.length-1];if(!fr(o)){for(var u=0;u<r.length;){if(typeof o[r[u]]=="function")return o[r[u]].apply(o,Array.prototype.slice.call(arguments,0,-1));u+=1}if(Pc(o)){var c=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return c(o)}}return n.apply(this,arguments)}}var nt={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}};function fa(r){for(var e=[],n;!(n=r.next()).done;)e.push(n.value);return e}function ha(r,e,n){for(var o=0,u=n.length;o<u;){if(r(e,n[o]))return!0;o+=1}return!1}function Dc(r){var e=String(r).match(/^function (\w*)/);return e==null?"":e[1]}function hr(r,e){return Object.prototype.hasOwnProperty.call(e,r)}function $c(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var oi=typeof Object.is=="function"?Object.is:$c,pa=Object.prototype.toString,Zc=function(){return pa.call(arguments)==="[object Arguments]"?function(e){return pa.call(e)==="[object Arguments]"}:function(e){return hr("callee",e)}}(),zc=Zc,Wc=!{toString:null}.propertyIsEnumerable("toString"),da=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ya=function(){return arguments.propertyIsEnumerable("length")}(),qc=function(e,n){for(var o=0;o<e.length;){if(e[o]===n)return!0;o+=1}return!1},Vc=de(typeof Object.keys=="function"&&!ya?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var n,o,u=[],c=ya&&zc(e);for(n in e)hr(n,e)&&(!c||n!=="length")&&(u[u.length]=n);if(Wc)for(o=da.length-1;o>=0;)n=da[o],hr(n,e)&&!qc(u,n)&&(u[u.length]=n),o-=1;return u}),pr=Vc,Gc=de(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),ga=Gc;function ma(r,e,n,o){var u=fa(r),c=fa(e);function f(s,d){return $i(s,d,n.slice(),o.slice())}return!ha(function(s,d){return!ha(f,d,s)},c,u)}function $i(r,e,n,o){if(oi(r,e))return!0;var u=ga(r);if(u!==ga(e))return!1;if(typeof r["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof r["fantasy-land/equals"]=="function"&&r["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](r);if(typeof r.equals=="function"||typeof e.equals=="function")return typeof r.equals=="function"&&r.equals(e)&&typeof e.equals=="function"&&e.equals(r);switch(u){case"Arguments":case"Array":case"Object":if(typeof r.constructor=="function"&&Dc(r.constructor)==="Promise")return r===e;break;case"Boolean":case"Number":case"String":if(!(typeof r==typeof e&&oi(r.valueOf(),e.valueOf())))return!1;break;case"Date":if(!oi(r.valueOf(),e.valueOf()))return!1;break;case"Error":return r.name===e.name&&r.message===e.message;case"RegExp":if(!(r.source===e.source&&r.global===e.global&&r.ignoreCase===e.ignoreCase&&r.multiline===e.multiline&&r.sticky===e.sticky&&r.unicode===e.unicode))return!1;break}for(var c=n.length-1;c>=0;){if(n[c]===r)return o[c]===e;c-=1}switch(u){case"Map":return r.size!==e.size?!1:ma(r.entries(),e.entries(),n.concat([r]),o.concat([e]));case"Set":return r.size!==e.size?!1:ma(r.values(),e.values(),n.concat([r]),o.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var f=pr(r);if(f.length!==pr(e).length)return!1;var s=n.concat([r]),d=o.concat([e]);for(c=f.length-1;c>=0;){var y=f[c];if(!(hr(y,e)&&$i(e[y],r[y],s,d)))return!1;c-=1}return!0}var Yc=te(function(e,n){return $i(e,n,[],[])}),nr=Yc;function Hc(r,e,n){var o,u;if(typeof r.indexOf=="function")switch(typeof e){case"number":if(e===0){for(o=1/e;n<r.length;){if(u=r[n],u===0&&1/u===o)return n;n+=1}return-1}else if(e!==e){for(;n<r.length;){if(u=r[n],typeof u=="number"&&u!==u)return n;n+=1}return-1}return r.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return r.indexOf(e,n);case"object":if(e===null)return r.indexOf(e,n)}for(;n<r.length;){if(nr(r[n],e))return n;n+=1}return-1}function eo(r,e){return Hc(e,r,0)>=0}function An(r,e){for(var n=0,o=e.length,u=Array(o);n<o;)u[n]=r(e[n]),n+=1;return u}function si(r){var e=r.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var Fr=function(e){return(e<10?"0":"")+e},Kc=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+Fr(e.getUTCMonth()+1)+"-"+Fr(e.getUTCDate())+"T"+Fr(e.getUTCHours())+":"+Fr(e.getUTCMinutes())+":"+Fr(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},Xc=Kc;function Jc(r){return function(){return!r.apply(this,arguments)}}function to(r,e,n){for(var o=0,u=n.length;o<u;)e=r(e,n[o]),o+=1;return e}function Qc(r,e){for(var n=0,o=e.length,u=[];n<o;)r(e[n])&&(u[u.length]=e[n]),n+=1;return u}function el(r){return Object.prototype.toString.call(r)==="[object Object]"}var tl=function(){function r(e,n){this.xf=n,this.f=e}return r.prototype["@@transducer/init"]=nt.init,r.prototype["@@transducer/result"]=nt.result,r.prototype["@@transducer/step"]=function(e,n){return this.f(n)?this.xf["@@transducer/step"](e,n):e},r}();function rl(r){return function(e){return new tl(r,e)}}var nl=te(Hn(["fantasy-land/filter","filter"],rl,function(r,e){return el(e)?to(function(n,o){return r(e[o])&&(n[o]=e[o]),n},{},pr(e)):Qc(r,e)})),il=nl,al=te(function(e,n){return il(Jc(e),n)}),ro=al;function no(r,e){var n=function(f){var s=e.concat([r]);return eo(f,s)?"<Circular>":no(f,s)},o=function(c,f){return An(function(s){return si(s)+": "+n(c[s])},f.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+An(n,r).join(", ")+"))";case"[object Array]":return"["+An(n,r).concat(o(r,ro(function(c){return/^\d+$/.test(c)},pr(r)))).join(", ")+"]";case"[object Boolean]":return typeof r=="object"?"new Boolean("+n(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?n(NaN):si(Xc(r)))+")";case"[object Map]":return"new Map("+n(Array.from(r))+")";case"[object Null]":return"null";case"[object Number]":return typeof r=="object"?"new Number("+n(r.valueOf())+")":1/r===-1/0?"-0":r.toString(10);case"[object Set]":return"new Set("+n(Array.from(r).sort())+")";case"[object String]":return typeof r=="object"?"new String("+n(r.valueOf())+")":si(r);case"[object Undefined]":return"undefined";default:if(typeof r.toString=="function"){var u=r.toString();if(u!=="[object Object]")return u}return"{"+o(r,pr(r)).join(", ")+"}"}}var ol=de(function(e){return no(e,[])}),ir=ol,sl=te(function(e,n){if(e===n)return n;function o(d,y){if(d>y!=y>d)return y>d?y:d}var u=o(e,n);if(u!==void 0)return u;var c=o(typeof e,typeof n);if(c!==void 0)return c===typeof e?e:n;var f=ir(e),s=o(f,ir(n));return s!==void 0&&s===f?e:n}),io=sl,ul=function(){function r(e,n){this.xf=n,this.f=e}return r.prototype["@@transducer/init"]=nt.init,r.prototype["@@transducer/result"]=nt.result,r.prototype["@@transducer/step"]=function(e,n){return this.xf["@@transducer/step"](e,this.f(n))},r}(),cl=function(e){return function(n){return new ul(e,n)}},ao=cl,ll=te(Hn(["fantasy-land/map","map"],ao,function(e,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return Yn(n.length,function(){return e.call(this,n.apply(this,arguments))});case"[object Object]":return to(function(o,u){return o[u]=e(n[u]),o},{},pr(n));default:return An(e,n)}})),Kn=ll,Xn=Number.isInteger||function(e){return e<<0===e};function Un(r){return Object.prototype.toString.call(r)==="[object String]"}var fl=te(function(e,n){var o=e<0?n.length+e:e;return Un(n)?n.charAt(o):n[o]}),oo=fl,hl=te(function(e,n){if(n!=null)return Xn(e)?oo(e,n):n[e]}),Ht=hl,pl=te(function(e,n){return Kn(Ht(e),n)}),dl=pl,yl=de(function(e){return fr(e)?!0:!e||typeof e!="object"||Un(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),Zi=yl,wa=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function gl(r,e,n){return function(u,c,f){if(Zi(f))return r(u,c,f);if(f==null)return c;if(typeof f["fantasy-land/reduce"]=="function")return e(u,c,f,"fantasy-land/reduce");if(f[wa]!=null)return n(u,c,f[wa]());if(typeof f.next=="function")return n(u,c,f);if(typeof f.reduce=="function")return e(u,c,f,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function so(r,e,n){for(var o=0,u=n.length;o<u;){if(e=r["@@transducer/step"](e,n[o]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}o+=1}return r["@@transducer/result"](e)}var ml=te(function(e,n){return dn(e.length,function(){return e.apply(n,arguments)})}),wl=ml;function vl(r,e,n){for(var o=n.next();!o.done;){if(e=r["@@transducer/step"](e,o.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}o=n.next()}return r["@@transducer/result"](e)}function _l(r,e,n,o){return r["@@transducer/result"](n[o](wl(r["@@transducer/step"],r),e))}var bl=gl(so,_l,vl),uo=bl,El=function(){function r(e){this.f=e}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(e){return e},r.prototype["@@transducer/step"]=function(e,n){return this.f(e,n)},r}();function Al(r){return new El(r)}var xl=Yt(function(r,e,n){return uo(typeof r=="function"?Al(r):r,e,n)}),dr=xl,Tl=de(function(e){return Yn(dr(io,0,dl("length",e)),function(){for(var n=0,o=e.length;n<o;){if(!e[n].apply(this,arguments))return!1;n+=1}return!0})}),Sl=Tl,Bl=de(function(e){return function(){return e}}),zi=Bl,Il=te(function(e,n){return Nc(n,[e])}),Wi=Il;function Cl(r,e,n){if(Xn(r)&&fr(n)){var o=[].concat(n);return o[r]=e,o}var u={};for(var c in n)u[c]=n[c];return u[r]=e,u}var Ul=de(function(e){return e==null}),On=Ul,Ol=Yt(function r(e,n,o){if(e.length===0)return n;var u=e[0];if(e.length>1){var c=!On(o)&&hr(u,o)&&typeof o[u]=="object"?o[u]:Xn(e[1])?[]:{};n=r(Array.prototype.slice.call(e,1),n,c)}return Cl(u,n,o)}),Rl=Ol,kl=Yt(function(e,n,o){return Rl([e],n,o)}),Xe=kl;function wi(r){var e=Object.prototype.toString.call(r);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}function Ll(r){return function e(n){for(var o,u,c,f=[],s=0,d=n.length;s<d;){if(Zi(n[s]))for(o=r?e(n[s]):n[s],c=0,u=o.length;c<u;)f[f.length]=o[c],c+=1;else f[f.length]=n[s];s+=1}return f}}function jl(r){return{"@@transducer/value":r,"@@transducer/reduced":!0}}var co="@@transducer/init",vi="@@transducer/step",lo="@@transducer/result",Fl=function(){function r(e){this.xf=e}return r.prototype[co]=nt.init,r.prototype[lo]=nt.result,r.prototype[vi]=function(e,n){var o=this.xf[vi](e,n);return o["@@transducer/reduced"]?jl(o):o},r}(),Nl=function(){function r(e){this.xf=new Fl(e)}return r.prototype[co]=nt.init,r.prototype[lo]=nt.result,r.prototype[vi]=function(e,n){return Zi(n)?uo(this.xf,e,n):so(this.xf,e,[n])},r}(),Ml=function(e){return new Nl(e)},Pl=Ml;function Dl(r){return function(e){return ao(r)(Pl(e))}}var $l=te(Hn(["fantasy-land/chain","chain"],Dl,function(e,n){return typeof n=="function"?function(o){return e(n(o))(o)}:Ll(!1)(Kn(e,n))})),Zl=$l;function zl(r,e){return function(){return e.call(this,r.apply(this,arguments))}}function fo(r,e){return function(){var n=arguments.length;if(n===0)return e();var o=arguments[n-1];return fr(o)||typeof o[r]!="function"?e.apply(this,arguments):o[r].apply(o,Array.prototype.slice.call(arguments,0,n-1))}}var Wl=Yt(fo("slice",function(e,n,o){return Array.prototype.slice.call(o,e,n)})),ql=Wl,Vl=de(fo("tail",ql(1,1/0))),Gl=Vl;function yr(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return dn(arguments[0].length,dr(zl,arguments[0],Gl(arguments)))}function Yl(r){return r}var Hl=de(Yl),_r=Hl,Kl=te(function(e,n){if(fr(e)){if(fr(n))return e.concat(n);throw new TypeError(ir(n)+" is not an array")}if(Un(e)){if(Un(n))return e+n;throw new TypeError(ir(n)+" is not a string")}if(e!=null&&wi(e["fantasy-land/concat"]))return e["fantasy-land/concat"](n);if(e!=null&&wi(e.concat))return e.concat(n);throw new TypeError(ir(e)+' does not have a method named "concat" or "fantasy-land/concat"')}),qi=Kl,Xl=de(function(e){var n=dr(io,0,Kn(function(o){return o[0].length},e));return dn(n,function(){for(var o=0;o<e.length;){if(e[o][0].apply(this,arguments))return e[o][1].apply(this,arguments);o+=1}})}),ho=Xl,Jl=te(function(e,n){return n==null||n!==n?e:n}),Jn=Jl,Ql=te(function(e,n){if(e.length===0||On(n))return!1;for(var o=n,u=0;u<e.length;)if(!On(o)&&hr(e[u],o))o=o[e[u]],u+=1;else return!1;return!0}),ef=Ql,tf=te(function(e,n){return ef([e],n)}),rf=tf,nf=Yt(function(e,n,o){return Yn(Math.max(e.length,n.length,o.length),function(){return e.apply(this,arguments)?n.apply(this,arguments):o.apply(this,arguments)})}),Vi=nf,af=te(eo),of=af,sf=te(function(e,n){return Yn(e+1,function(){var o=arguments[e];if(o!=null&&wi(o[n]))return o[n].apply(o,Array.prototype.slice.call(arguments,0,e));throw new TypeError(ir(o)+' does not have a method named "'+n+'"')})}),uf=sf,cf=te(function(e,n){return n instanceof e||n!=null&&(n.constructor===e||e.name==="Object"&&typeof n=="object")}),zr=cf,lf=de(function(e){return!On(e)}),ui=lf,ff=uf(1,"join"),hf=ff,pf=te(function(e,n){return e.map(function(o){for(var u=n,c=0,f;c<o.length;){if(u==null)return;f=o[c],u=Xn(f)?oo(f,u):u[f],c+=1}return u})}),df=pf,yf=te(function(e,n){return df([e],n)[0]}),gf=yf,mf=Yt(function(e,n,o){return nr(e,Ht(n,o))}),va=mf,wf=Yt(function(e,n,o){return Jn(e,Ht(n,o))}),vf=wf,_f=function(){function r(e,n){this.xf=n,this.f=e}return r.prototype["@@transducer/init"]=nt.init,r.prototype["@@transducer/result"]=nt.result,r.prototype["@@transducer/step"]=function(e,n){return this.f(n),this.xf["@@transducer/step"](e,n)},r}();function bf(r){return function(e){return new _f(r,e)}}var Ef=te(Hn([],bf,function(e,n){return e(n),n})),Af=Ef,ee;(function(r){r.assertEqual=u=>u;function e(u){}r.assertIs=e;function n(u){throw new Error}r.assertNever=n,r.arrayToEnum=u=>{const c={};for(const f of u)c[f]=f;return c},r.getValidEnumValues=u=>{const c=r.objectKeys(u).filter(s=>typeof u[u[s]]!="number"),f={};for(const s of c)f[s]=u[s];return r.objectValues(f)},r.objectValues=u=>r.objectKeys(u).map(function(c){return u[c]}),r.objectKeys=typeof Object.keys=="function"?u=>Object.keys(u):u=>{const c=[];for(const f in u)Object.prototype.hasOwnProperty.call(u,f)&&c.push(f);return c},r.find=(u,c)=>{for(const f of u)if(c(f))return f},r.isInteger=typeof Number.isInteger=="function"?u=>Number.isInteger(u):u=>typeof u=="number"&&isFinite(u)&&Math.floor(u)===u;function o(u,c=" | "){return u.map(f=>typeof f=="string"?`'${f}'`:f).join(c)}r.joinValues=o,r.jsonStringifyReplacer=(u,c)=>typeof c=="bigint"?c.toString():c})(ee||(ee={}));var _i;(function(r){r.mergeShapes=(e,n)=>({...e,...n})})(_i||(_i={}));var L=ee.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rt=r=>{switch(typeof r){case"undefined":return L.undefined;case"string":return L.string;case"number":return isNaN(r)?L.nan:L.number;case"boolean":return L.boolean;case"function":return L.function;case"bigint":return L.bigint;case"symbol":return L.symbol;case"object":return Array.isArray(r)?L.array:r===null?L.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?L.promise:typeof Map<"u"&&r instanceof Map?L.map:typeof Set<"u"&&r instanceof Set?L.set:typeof Date<"u"&&r instanceof Date?L.date:L.object;default:return L.unknown}},I=ee.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xf=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),Fe=class extends Error{constructor(r){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=r}get errors(){return this.issues}format(r){const e=r||function(u){return u.message},n={_errors:[]},o=u=>{for(const c of u.issues)if(c.code==="invalid_union")c.unionErrors.map(o);else if(c.code==="invalid_return_type")o(c.returnTypeError);else if(c.code==="invalid_arguments")o(c.argumentsError);else if(c.path.length===0)n._errors.push(e(c));else{let f=n,s=0;for(;s<c.path.length;){const d=c.path[s];s===c.path.length-1?(f[d]=f[d]||{_errors:[]},f[d]._errors.push(e(c))):f[d]=f[d]||{_errors:[]},f=f[d],s++}}};return o(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ee.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(r=e=>e.message){const e={},n=[];for(const o of this.issues)o.path.length>0?(e[o.path[0]]=e[o.path[0]]||[],e[o.path[0]].push(r(o))):n.push(r(o));return{formErrors:n,fieldErrors:e}}get formErrors(){return this.flatten()}};Fe.create=r=>new Fe(r);var qr=(r,e)=>{let n;switch(r.code){case I.invalid_type:r.received===L.undefined?n="Required":n=`Expected ${r.expected}, received ${r.received}`;break;case I.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(r.expected,ee.jsonStringifyReplacer)}`;break;case I.unrecognized_keys:n=`Unrecognized key(s) in object: ${ee.joinValues(r.keys,", ")}`;break;case I.invalid_union:n="Invalid input";break;case I.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ee.joinValues(r.options)}`;break;case I.invalid_enum_value:n=`Invalid enum value. Expected ${ee.joinValues(r.options)}, received '${r.received}'`;break;case I.invalid_arguments:n="Invalid function arguments";break;case I.invalid_return_type:n="Invalid function return type";break;case I.invalid_date:n="Invalid date";break;case I.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(n=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?n=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?n=`Invalid input: must end with "${r.validation.endsWith}"`:ee.assertNever(r.validation):r.validation!=="regex"?n=`Invalid ${r.validation}`:n="Invalid";break;case I.too_small:r.type==="array"?n=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?n=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?n=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?n=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:n="Invalid input";break;case I.too_big:r.type==="array"?n=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?n=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?n=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?n=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?n=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:n="Invalid input";break;case I.custom:n="Invalid input";break;case I.invalid_intersection_types:n="Intersection results could not be merged";break;case I.not_multiple_of:n=`Number must be a multiple of ${r.multipleOf}`;break;case I.not_finite:n="Number must be finite";break;default:n=e.defaultError,ee.assertNever(r)}return{message:n}},po=qr;function Tf(r){po=r}function Rn(){return po}var kn=r=>{const{data:e,path:n,errorMaps:o,issueData:u}=r,c=[...n,...u.path||[]],f={...u,path:c};let s="";const d=o.filter(y=>!!y).slice().reverse();for(const y of d)s=y(f,{data:e,defaultError:s}).message;return{...u,path:c,message:u.message||s}},Sf=[];function j(r,e){const n=kn({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Rn(),qr].filter(o=>!!o)});r.common.issues.push(n)}var Be=class yo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const o=[];for(const u of n){if(u.status==="aborted")return Y;u.status==="dirty"&&e.dirty(),o.push(u.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,n){const o=[];for(const u of n)o.push({key:await u.key,value:await u.value});return yo.mergeObjectSync(e,o)}static mergeObjectSync(e,n){const o={};for(const u of n){const{key:c,value:f}=u;if(c.status==="aborted"||f.status==="aborted")return Y;c.status==="dirty"&&e.dirty(),f.status==="dirty"&&e.dirty(),c.value!=="__proto__"&&(typeof f.value<"u"||u.alwaysSet)&&(o[c.value]=f.value)}return{status:e.value,value:o}}},Y=Object.freeze({status:"aborted"}),go=r=>({status:"dirty",value:r}),Ae=r=>({status:"valid",value:r}),bi=r=>r.status==="aborted",Ei=r=>r.status==="dirty",Vr=r=>r.status==="valid",Ln=r=>typeof Promise<"u"&&r instanceof Promise,D;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(D||(D={}));var it=class{constructor(r,e,n,o){this._cachedPath=[],this.parent=r,this.data=e,this._path=n,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},_a=(r,e)=>{if(Vr(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Fe(r.common.issues);return this._error=n,this._error}}};function H(r){if(!r)return{};const{errorMap:e,invalid_type_error:n,required_error:o,description:u}=r;if(e&&(n||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:u}:{errorMap:(f,s)=>f.code!=="invalid_type"?{message:s.defaultError}:typeof s.data>"u"?{message:o??s.defaultError}:{message:n??s.defaultError},description:u}}var X=class{constructor(r){this.spa=this.safeParseAsync,this._def=r,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(r){return Rt(r.data)}_getOrReturnCtx(r,e){return e||{common:r.parent.common,data:r.data,parsedType:Rt(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}_processInputParams(r){return{status:new Be,ctx:{common:r.parent.common,data:r.data,parsedType:Rt(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}}_parseSync(r){const e=this._parse(r);if(Ln(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(r){const e=this._parse(r);return Promise.resolve(e)}parse(r,e){const n=this.safeParse(r,e);if(n.success)return n.data;throw n.error}safeParse(r,e){var n;const o={common:{issues:[],async:(n=e==null?void 0:e.async)!==null&&n!==void 0?n:!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:Rt(r)},u=this._parseSync({data:r,path:o.path,parent:o});return _a(o,u)}async parseAsync(r,e){const n=await this.safeParseAsync(r,e);if(n.success)return n.data;throw n.error}async safeParseAsync(r,e){const n={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:Rt(r)},o=this._parse({data:r,path:n.path,parent:n}),u=await(Ln(o)?o:Promise.resolve(o));return _a(n,u)}refine(r,e){const n=o=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(o):e;return this._refinement((o,u)=>{const c=r(o),f=()=>u.addIssue({code:I.custom,...n(o)});return typeof Promise<"u"&&c instanceof Promise?c.then(s=>s?!0:(f(),!1)):c?!0:(f(),!1)})}refinement(r,e){return this._refinement((n,o)=>r(n)?!0:(o.addIssue(typeof e=="function"?e(n,o):e),!1))}_refinement(r){return new Je({schema:this,typeName:z.ZodEffects,effect:{type:"refinement",refinement:r}})}superRefine(r){return this._refinement(r)}optional(){return ft.create(this,this._def)}nullable(){return qt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wt.create(this,this._def)}promise(){return wr.create(this,this._def)}or(r){return Qr.create([this,r],this._def)}and(r){return en.create(this,r,this._def)}transform(r){return new Je({...H(this._def),schema:this,typeName:z.ZodEffects,effect:{type:"transform",transform:r}})}default(r){const e=typeof r=="function"?r:()=>r;return new an({...H(this._def),innerType:this,defaultValue:e,typeName:z.ZodDefault})}brand(){return new xo({typeName:z.ZodBranded,type:this,...H(this._def)})}catch(r){const e=typeof r=="function"?r:()=>r;return new Pn({...H(this._def),innerType:this,catchValue:e,typeName:z.ZodCatch})}describe(r){const e=this.constructor;return new e({...this._def,description:r})}pipe(r){return Gi.create(this,r)}readonly(){return $n.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Bf=/^c[^\s-]{8,}$/i,If=/^[a-z][a-z0-9]*$/,Cf=/^[0-9A-HJKMNP-TV-Z]{26}$/,Uf=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Of=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Rf="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",ci,kf=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Lf=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,jf=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Ff(r,e){return!!((e==="v4"||!e)&&kf.test(r)||(e==="v6"||!e)&&Lf.test(r))}var gr=class Dr extends X{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==L.string){const c=this._getOrReturnCtx(e);return j(c,{code:I.invalid_type,expected:L.string,received:c.parsedType}),Y}const o=new Be;let u;for(const c of this._def.checks)if(c.kind==="min")e.data.length<c.value&&(u=this._getOrReturnCtx(e,u),j(u,{code:I.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),o.dirty());else if(c.kind==="max")e.data.length>c.value&&(u=this._getOrReturnCtx(e,u),j(u,{code:I.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),o.dirty());else if(c.kind==="length"){const f=e.data.length>c.value,s=e.data.length<c.value;(f||s)&&(u=this._getOrReturnCtx(e,u),f?j(u,{code:I.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):s&&j(u,{code:I.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),o.dirty())}else if(c.kind==="email")Of.test(e.data)||(u=this._getOrReturnCtx(e,u),j(u,{validation:"email",code:I.invalid_string,message:c.message}),o.dirty());else if(c.kind==="emoji")ci||(ci=new RegExp(Rf,"u")),ci.test(e.data)||(u=this._getOrReturnCtx(e,u),j(u,{validation:"emoji",code:I.invalid_string,message:c.message}),o.dirty());else if(c.kind==="uuid")Uf.test(e.data)||(u=this._getOrReturnCtx(e,u),j(u,{validation:"uuid",code:I.invalid_string,message:c.message}),o.dirty());else if(c.kind==="cuid")Bf.test(e.data)||(u=this._getOrReturnCtx(e,u),j(u,{validation:"cuid",code:I.invalid_string,message:c.message}),o.dirty());else if(c.kind==="cuid2")If.test(e.data)||(u=this._getOrReturnCtx(e,u),j(u,{validation:"cuid2",code:I.invalid_string,message:c.message}),o.dirty());else if(c.kind==="ulid")Cf.test(e.data)||(u=this._getOrReturnCtx(e,u),j(u,{validation:"ulid",code:I.invalid_string,message:c.message}),o.dirty());else if(c.kind==="url")try{new URL(e.data)}catch{u=this._getOrReturnCtx(e,u),j(u,{validation:"url",code:I.invalid_string,message:c.message}),o.dirty()}else c.kind==="regex"?(c.regex.lastIndex=0,c.regex.test(e.data)||(u=this._getOrReturnCtx(e,u),j(u,{validation:"regex",code:I.invalid_string,message:c.message}),o.dirty())):c.kind==="trim"?e.data=e.data.trim():c.kind==="includes"?e.data.includes(c.value,c.position)||(u=this._getOrReturnCtx(e,u),j(u,{code:I.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),o.dirty()):c.kind==="toLowerCase"?e.data=e.data.toLowerCase():c.kind==="toUpperCase"?e.data=e.data.toUpperCase():c.kind==="startsWith"?e.data.startsWith(c.value)||(u=this._getOrReturnCtx(e,u),j(u,{code:I.invalid_string,validation:{startsWith:c.value},message:c.message}),o.dirty()):c.kind==="endsWith"?e.data.endsWith(c.value)||(u=this._getOrReturnCtx(e,u),j(u,{code:I.invalid_string,validation:{endsWith:c.value},message:c.message}),o.dirty()):c.kind==="datetime"?jf(c).test(e.data)||(u=this._getOrReturnCtx(e,u),j(u,{code:I.invalid_string,validation:"datetime",message:c.message}),o.dirty()):c.kind==="ip"?Ff(e.data,c.version)||(u=this._getOrReturnCtx(e,u),j(u,{validation:"ip",code:I.invalid_string,message:c.message}),o.dirty()):ee.assertNever(c);return{status:o.value,value:e.data}}_regex(e,n,o){return this.refinement(u=>e.test(u),{validation:n,code:I.invalid_string,...D.errToObj(o)})}_addCheck(e){return new Dr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...D.errToObj(e)})}url(e){return this._addCheck({kind:"url",...D.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...D.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...D.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...D.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...D.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...D.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...D.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...D.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...D.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...D.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...D.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...D.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...D.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...D.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...D.errToObj(n)})}nonempty(e){return this.min(1,D.errToObj(e))}trim(){return new Dr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Dr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Dr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};gr.create=r=>{var e;return new gr({checks:[],typeName:z.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...H(r)})};function Nf(r,e){const n=(r.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,u=n>o?n:o,c=parseInt(r.toFixed(u).replace(".","")),f=parseInt(e.toFixed(u).replace(".",""));return c%f/Math.pow(10,u)}var Gr=class Ai extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==L.number){const c=this._getOrReturnCtx(e);return j(c,{code:I.invalid_type,expected:L.number,received:c.parsedType}),Y}let o;const u=new Be;for(const c of this._def.checks)c.kind==="int"?ee.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{code:I.invalid_type,expected:"integer",received:"float",message:c.message}),u.dirty()):c.kind==="min"?(c.inclusive?e.data<c.value:e.data<=c.value)&&(o=this._getOrReturnCtx(e,o),j(o,{code:I.too_small,minimum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),u.dirty()):c.kind==="max"?(c.inclusive?e.data>c.value:e.data>=c.value)&&(o=this._getOrReturnCtx(e,o),j(o,{code:I.too_big,maximum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),u.dirty()):c.kind==="multipleOf"?Nf(e.data,c.value)!==0&&(o=this._getOrReturnCtx(e,o),j(o,{code:I.not_multiple_of,multipleOf:c.value,message:c.message}),u.dirty()):c.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),j(o,{code:I.not_finite,message:c.message}),u.dirty()):ee.assertNever(c);return{status:u.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,D.toString(n))}gt(e,n){return this.setLimit("min",e,!1,D.toString(n))}lte(e,n){return this.setLimit("max",e,!0,D.toString(n))}lt(e,n){return this.setLimit("max",e,!1,D.toString(n))}setLimit(e,n,o,u){return new Ai({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:o,message:D.toString(u)}]})}_addCheck(e){return new Ai({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:D.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:D.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:D.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:D.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:D.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ee.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(n===null||o.value>n)&&(n=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(n)&&Number.isFinite(e)}};Gr.create=r=>new Gr({checks:[],typeName:z.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...H(r)});var Yr=class xi extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==L.bigint){const c=this._getOrReturnCtx(e);return j(c,{code:I.invalid_type,expected:L.bigint,received:c.parsedType}),Y}let o;const u=new Be;for(const c of this._def.checks)c.kind==="min"?(c.inclusive?e.data<c.value:e.data<=c.value)&&(o=this._getOrReturnCtx(e,o),j(o,{code:I.too_small,type:"bigint",minimum:c.value,inclusive:c.inclusive,message:c.message}),u.dirty()):c.kind==="max"?(c.inclusive?e.data>c.value:e.data>=c.value)&&(o=this._getOrReturnCtx(e,o),j(o,{code:I.too_big,type:"bigint",maximum:c.value,inclusive:c.inclusive,message:c.message}),u.dirty()):c.kind==="multipleOf"?e.data%c.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),j(o,{code:I.not_multiple_of,multipleOf:c.value,message:c.message}),u.dirty()):ee.assertNever(c);return{status:u.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,D.toString(n))}gt(e,n){return this.setLimit("min",e,!1,D.toString(n))}lte(e,n){return this.setLimit("max",e,!0,D.toString(n))}lt(e,n){return this.setLimit("max",e,!1,D.toString(n))}setLimit(e,n,o,u){return new xi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:o,message:D.toString(u)}]})}_addCheck(e){return new xi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:D.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};Yr.create=r=>{var e;return new Yr({checks:[],typeName:z.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...H(r)})};var Hr=class extends X{_parse(r){if(this._def.coerce&&(r.data=!!r.data),this._getType(r)!==L.boolean){const n=this._getOrReturnCtx(r);return j(n,{code:I.invalid_type,expected:L.boolean,received:n.parsedType}),Y}return Ae(r.data)}};Hr.create=r=>new Hr({typeName:z.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...H(r)});var Kr=class mo extends X{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==L.date){const c=this._getOrReturnCtx(e);return j(c,{code:I.invalid_type,expected:L.date,received:c.parsedType}),Y}if(isNaN(e.data.getTime())){const c=this._getOrReturnCtx(e);return j(c,{code:I.invalid_date}),Y}const o=new Be;let u;for(const c of this._def.checks)c.kind==="min"?e.data.getTime()<c.value&&(u=this._getOrReturnCtx(e,u),j(u,{code:I.too_small,message:c.message,inclusive:!0,exact:!1,minimum:c.value,type:"date"}),o.dirty()):c.kind==="max"?e.data.getTime()>c.value&&(u=this._getOrReturnCtx(e,u),j(u,{code:I.too_big,message:c.message,inclusive:!0,exact:!1,maximum:c.value,type:"date"}),o.dirty()):ee.assertNever(c);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new mo({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:D.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:D.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};Kr.create=r=>new Kr({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:z.ZodDate,...H(r)});var jn=class extends X{_parse(r){if(this._getType(r)!==L.symbol){const n=this._getOrReturnCtx(r);return j(n,{code:I.invalid_type,expected:L.symbol,received:n.parsedType}),Y}return Ae(r.data)}};jn.create=r=>new jn({typeName:z.ZodSymbol,...H(r)});var Xr=class extends X{_parse(r){if(this._getType(r)!==L.undefined){const n=this._getOrReturnCtx(r);return j(n,{code:I.invalid_type,expected:L.undefined,received:n.parsedType}),Y}return Ae(r.data)}};Xr.create=r=>new Xr({typeName:z.ZodUndefined,...H(r)});var Jr=class extends X{_parse(r){if(this._getType(r)!==L.null){const n=this._getOrReturnCtx(r);return j(n,{code:I.invalid_type,expected:L.null,received:n.parsedType}),Y}return Ae(r.data)}};Jr.create=r=>new Jr({typeName:z.ZodNull,...H(r)});var mr=class extends X{constructor(){super(...arguments),this._any=!0}_parse(r){return Ae(r.data)}};mr.create=r=>new mr({typeName:z.ZodAny,...H(r)});var Zt=class extends X{constructor(){super(...arguments),this._unknown=!0}_parse(r){return Ae(r.data)}};Zt.create=r=>new Zt({typeName:z.ZodUnknown,...H(r)});var pt=class extends X{_parse(r){const e=this._getOrReturnCtx(r);return j(e,{code:I.invalid_type,expected:L.never,received:e.parsedType}),Y}};pt.create=r=>new pt({typeName:z.ZodNever,...H(r)});var Fn=class extends X{_parse(r){if(this._getType(r)!==L.undefined){const n=this._getOrReturnCtx(r);return j(n,{code:I.invalid_type,expected:L.void,received:n.parsedType}),Y}return Ae(r.data)}};Fn.create=r=>new Fn({typeName:z.ZodVoid,...H(r)});var Wt=class xn extends X{_parse(e){const{ctx:n,status:o}=this._processInputParams(e),u=this._def;if(n.parsedType!==L.array)return j(n,{code:I.invalid_type,expected:L.array,received:n.parsedType}),Y;if(u.exactLength!==null){const f=n.data.length>u.exactLength.value,s=n.data.length<u.exactLength.value;(f||s)&&(j(n,{code:f?I.too_big:I.too_small,minimum:s?u.exactLength.value:void 0,maximum:f?u.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:u.exactLength.message}),o.dirty())}if(u.minLength!==null&&n.data.length<u.minLength.value&&(j(n,{code:I.too_small,minimum:u.minLength.value,type:"array",inclusive:!0,exact:!1,message:u.minLength.message}),o.dirty()),u.maxLength!==null&&n.data.length>u.maxLength.value&&(j(n,{code:I.too_big,maximum:u.maxLength.value,type:"array",inclusive:!0,exact:!1,message:u.maxLength.message}),o.dirty()),n.common.async)return Promise.all([...n.data].map((f,s)=>u.type._parseAsync(new it(n,f,n.path,s)))).then(f=>Be.mergeArray(o,f));const c=[...n.data].map((f,s)=>u.type._parseSync(new it(n,f,n.path,s)));return Be.mergeArray(o,c)}get element(){return this._def.type}min(e,n){return new xn({...this._def,minLength:{value:e,message:D.toString(n)}})}max(e,n){return new xn({...this._def,maxLength:{value:e,message:D.toString(n)}})}length(e,n){return new xn({...this._def,exactLength:{value:e,message:D.toString(n)}})}nonempty(e){return this.min(1,e)}};Wt.create=(r,e)=>new Wt({type:r,minLength:null,maxLength:null,exactLength:null,typeName:z.ZodArray,...H(e)});function tr(r){if(r instanceof Ne){const e={};for(const n in r.shape){const o=r.shape[n];e[n]=ft.create(tr(o))}return new Ne({...r._def,shape:()=>e})}else return r instanceof Wt?new Wt({...r._def,type:tr(r.element)}):r instanceof ft?ft.create(tr(r.unwrap())):r instanceof qt?qt.create(tr(r.unwrap())):r instanceof Lt?Lt.create(r.items.map(e=>tr(e))):r}var Ne=class $e extends X{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ee.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==L.object){const y=this._getOrReturnCtx(e);return j(y,{code:I.invalid_type,expected:L.object,received:y.parsedType}),Y}const{status:o,ctx:u}=this._processInputParams(e),{shape:c,keys:f}=this._getCached(),s=[];if(!(this._def.catchall instanceof pt&&this._def.unknownKeys==="strip"))for(const y in u.data)f.includes(y)||s.push(y);const d=[];for(const y of f){const _=c[y],w=u.data[y];d.push({key:{status:"valid",value:y},value:_._parse(new it(u,w,u.path,y)),alwaysSet:y in u.data})}if(this._def.catchall instanceof pt){const y=this._def.unknownKeys;if(y==="passthrough")for(const _ of s)d.push({key:{status:"valid",value:_},value:{status:"valid",value:u.data[_]}});else if(y==="strict")s.length>0&&(j(u,{code:I.unrecognized_keys,keys:s}),o.dirty());else if(y!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const y=this._def.catchall;for(const _ of s){const w=u.data[_];d.push({key:{status:"valid",value:_},value:y._parse(new it(u,w,u.path,_)),alwaysSet:_ in u.data})}}return u.common.async?Promise.resolve().then(async()=>{const y=[];for(const _ of d){const w=await _.key;y.push({key:w,value:await _.value,alwaysSet:_.alwaysSet})}return y}).then(y=>Be.mergeObjectSync(o,y)):Be.mergeObjectSync(o,d)}get shape(){return this._def.shape()}strict(e){return D.errToObj,new $e({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,o)=>{var u,c,f,s;const d=(f=(c=(u=this._def).errorMap)===null||c===void 0?void 0:c.call(u,n,o).message)!==null&&f!==void 0?f:o.defaultError;return n.code==="unrecognized_keys"?{message:(s=D.errToObj(e).message)!==null&&s!==void 0?s:d}:{message:d}}}:{}})}strip(){return new $e({...this._def,unknownKeys:"strip"})}passthrough(){return new $e({...this._def,unknownKeys:"passthrough"})}extend(e){return new $e({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new $e({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:z.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new $e({...this._def,catchall:e})}pick(e){const n={};return ee.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(n[o]=this.shape[o])}),new $e({...this._def,shape:()=>n})}omit(e){const n={};return ee.objectKeys(this.shape).forEach(o=>{e[o]||(n[o]=this.shape[o])}),new $e({...this._def,shape:()=>n})}deepPartial(){return tr(this)}partial(e){const n={};return ee.objectKeys(this.shape).forEach(o=>{const u=this.shape[o];e&&!e[o]?n[o]=u:n[o]=u.optional()}),new $e({...this._def,shape:()=>n})}required(e){const n={};return ee.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])n[o]=this.shape[o];else{let c=this.shape[o];for(;c instanceof ft;)c=c._def.innerType;n[o]=c}}),new $e({...this._def,shape:()=>n})}keyof(){return Ao(ee.objectKeys(this.shape))}};Ne.create=(r,e)=>new Ne({shape:()=>r,unknownKeys:"strip",catchall:pt.create(),typeName:z.ZodObject,...H(e)});Ne.strictCreate=(r,e)=>new Ne({shape:()=>r,unknownKeys:"strict",catchall:pt.create(),typeName:z.ZodObject,...H(e)});Ne.lazycreate=(r,e)=>new Ne({shape:r,unknownKeys:"strip",catchall:pt.create(),typeName:z.ZodObject,...H(e)});var Qr=class extends X{_parse(r){const{ctx:e}=this._processInputParams(r),n=this._def.options;function o(u){for(const f of u)if(f.result.status==="valid")return f.result;for(const f of u)if(f.result.status==="dirty")return e.common.issues.push(...f.ctx.common.issues),f.result;const c=u.map(f=>new Fe(f.ctx.common.issues));return j(e,{code:I.invalid_union,unionErrors:c}),Y}if(e.common.async)return Promise.all(n.map(async u=>{const c={...e,common:{...e.common,issues:[]},parent:null};return{result:await u._parseAsync({data:e.data,path:e.path,parent:c}),ctx:c}})).then(o);{let u;const c=[];for(const s of n){const d={...e,common:{...e.common,issues:[]},parent:null},y=s._parseSync({data:e.data,path:e.path,parent:d});if(y.status==="valid")return y;y.status==="dirty"&&!u&&(u={result:y,ctx:d}),d.common.issues.length&&c.push(d.common.issues)}if(u)return e.common.issues.push(...u.ctx.common.issues),u.result;const f=c.map(s=>new Fe(s));return j(e,{code:I.invalid_union,unionErrors:f}),Y}}get options(){return this._def.options}};Qr.create=(r,e)=>new Qr({options:r,typeName:z.ZodUnion,...H(e)});var Tn=r=>r instanceof tn?Tn(r.schema):r instanceof Je?Tn(r.innerType()):r instanceof rn?[r.value]:r instanceof yn?r.options:r instanceof nn?Object.keys(r.enum):r instanceof an?Tn(r._def.innerType):r instanceof Xr?[void 0]:r instanceof Jr?[null]:null,wo=class vo extends X{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==L.object)return j(n,{code:I.invalid_type,expected:L.object,received:n.parsedType}),Y;const o=this.discriminator,u=n.data[o],c=this.optionsMap.get(u);return c?n.common.async?c._parseAsync({data:n.data,path:n.path,parent:n}):c._parseSync({data:n.data,path:n.path,parent:n}):(j(n,{code:I.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,o){const u=new Map;for(const c of n){const f=Tn(c.shape[e]);if(!f)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const s of f){if(u.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);u.set(s,c)}}return new vo({typeName:z.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:u,...H(o)})}};function Ti(r,e){const n=Rt(r),o=Rt(e);if(r===e)return{valid:!0,data:r};if(n===L.object&&o===L.object){const u=ee.objectKeys(e),c=ee.objectKeys(r).filter(s=>u.indexOf(s)!==-1),f={...r,...e};for(const s of c){const d=Ti(r[s],e[s]);if(!d.valid)return{valid:!1};f[s]=d.data}return{valid:!0,data:f}}else if(n===L.array&&o===L.array){if(r.length!==e.length)return{valid:!1};const u=[];for(let c=0;c<r.length;c++){const f=r[c],s=e[c],d=Ti(f,s);if(!d.valid)return{valid:!1};u.push(d.data)}return{valid:!0,data:u}}else return n===L.date&&o===L.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var en=class extends X{_parse(r){const{status:e,ctx:n}=this._processInputParams(r),o=(u,c)=>{if(bi(u)||bi(c))return Y;const f=Ti(u.value,c.value);return f.valid?((Ei(u)||Ei(c))&&e.dirty(),{status:e.value,value:f.data}):(j(n,{code:I.invalid_intersection_types}),Y)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([u,c])=>o(u,c)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};en.create=(r,e,n)=>new en({left:r,right:e,typeName:z.ZodIntersection,...H(n)});var Lt=class _o extends X{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==L.array)return j(o,{code:I.invalid_type,expected:L.array,received:o.parsedType}),Y;if(o.data.length<this._def.items.length)return j(o,{code:I.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&o.data.length>this._def.items.length&&(j(o,{code:I.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const c=[...o.data].map((f,s)=>{const d=this._def.items[s]||this._def.rest;return d?d._parse(new it(o,f,o.path,s)):null}).filter(f=>!!f);return o.common.async?Promise.all(c).then(f=>Be.mergeArray(n,f)):Be.mergeArray(n,c)}get items(){return this._def.items}rest(e){return new _o({...this._def,rest:e})}};Lt.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Lt({items:r,typeName:z.ZodTuple,rest:null,...H(e)})};var bo=class Si extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==L.object)return j(o,{code:I.invalid_type,expected:L.object,received:o.parsedType}),Y;const u=[],c=this._def.keyType,f=this._def.valueType;for(const s in o.data)u.push({key:c._parse(new it(o,s,o.path,s)),value:f._parse(new it(o,o.data[s],o.path,s))});return o.common.async?Be.mergeObjectAsync(n,u):Be.mergeObjectSync(n,u)}get element(){return this._def.valueType}static create(e,n,o){return n instanceof X?new Si({keyType:e,valueType:n,typeName:z.ZodRecord,...H(o)}):new Si({keyType:gr.create(),valueType:e,typeName:z.ZodRecord,...H(n)})}},Nn=class extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){const{status:e,ctx:n}=this._processInputParams(r);if(n.parsedType!==L.map)return j(n,{code:I.invalid_type,expected:L.map,received:n.parsedType}),Y;const o=this._def.keyType,u=this._def.valueType,c=[...n.data.entries()].map(([f,s],d)=>({key:o._parse(new it(n,f,n.path,[d,"key"])),value:u._parse(new it(n,s,n.path,[d,"value"]))}));if(n.common.async){const f=new Map;return Promise.resolve().then(async()=>{for(const s of c){const d=await s.key,y=await s.value;if(d.status==="aborted"||y.status==="aborted")return Y;(d.status==="dirty"||y.status==="dirty")&&e.dirty(),f.set(d.value,y.value)}return{status:e.value,value:f}})}else{const f=new Map;for(const s of c){const d=s.key,y=s.value;if(d.status==="aborted"||y.status==="aborted")return Y;(d.status==="dirty"||y.status==="dirty")&&e.dirty(),f.set(d.value,y.value)}return{status:e.value,value:f}}}};Nn.create=(r,e,n)=>new Nn({valueType:e,keyType:r,typeName:z.ZodMap,...H(n)});var Mn=class Bi extends X{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.parsedType!==L.set)return j(o,{code:I.invalid_type,expected:L.set,received:o.parsedType}),Y;const u=this._def;u.minSize!==null&&o.data.size<u.minSize.value&&(j(o,{code:I.too_small,minimum:u.minSize.value,type:"set",inclusive:!0,exact:!1,message:u.minSize.message}),n.dirty()),u.maxSize!==null&&o.data.size>u.maxSize.value&&(j(o,{code:I.too_big,maximum:u.maxSize.value,type:"set",inclusive:!0,exact:!1,message:u.maxSize.message}),n.dirty());const c=this._def.valueType;function f(d){const y=new Set;for(const _ of d){if(_.status==="aborted")return Y;_.status==="dirty"&&n.dirty(),y.add(_.value)}return{status:n.value,value:y}}const s=[...o.data.values()].map((d,y)=>c._parse(new it(o,d,o.path,y)));return o.common.async?Promise.all(s).then(d=>f(d)):f(s)}min(e,n){return new Bi({...this._def,minSize:{value:e,message:D.toString(n)}})}max(e,n){return new Bi({...this._def,maxSize:{value:e,message:D.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};Mn.create=(r,e)=>new Mn({valueType:r,minSize:null,maxSize:null,typeName:z.ZodSet,...H(e)});var Eo=class Sn extends X{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==L.function)return j(n,{code:I.invalid_type,expected:L.function,received:n.parsedType}),Y;function o(s,d){return kn({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Rn(),qr].filter(y=>!!y),issueData:{code:I.invalid_arguments,argumentsError:d}})}function u(s,d){return kn({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Rn(),qr].filter(y=>!!y),issueData:{code:I.invalid_return_type,returnTypeError:d}})}const c={errorMap:n.common.contextualErrorMap},f=n.data;if(this._def.returns instanceof wr){const s=this;return Ae(async function(...d){const y=new Fe([]),_=await s._def.args.parseAsync(d,c).catch(b=>{throw y.addIssue(o(d,b)),y}),w=await Reflect.apply(f,this,_);return await s._def.returns._def.type.parseAsync(w,c).catch(b=>{throw y.addIssue(u(w,b)),y})})}else{const s=this;return Ae(function(...d){const y=s._def.args.safeParse(d,c);if(!y.success)throw new Fe([o(d,y.error)]);const _=Reflect.apply(f,this,y.data),w=s._def.returns.safeParse(_,c);if(!w.success)throw new Fe([u(_,w.error)]);return w.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Sn({...this._def,args:Lt.create(e).rest(Zt.create())})}returns(e){return new Sn({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,o){return new Sn({args:e||Lt.create([]).rest(Zt.create()),returns:n||Zt.create(),typeName:z.ZodFunction,...H(o)})}},tn=class extends X{get schema(){return this._def.getter()}_parse(r){const{ctx:e}=this._processInputParams(r);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};tn.create=(r,e)=>new tn({getter:r,typeName:z.ZodLazy,...H(e)});var rn=class extends X{_parse(r){if(r.data!==this._def.value){const e=this._getOrReturnCtx(r);return j(e,{received:e.data,code:I.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:r.data}}get value(){return this._def.value}};rn.create=(r,e)=>new rn({value:r,typeName:z.ZodLiteral,...H(e)});function Ao(r,e){return new yn({values:r,typeName:z.ZodEnum,...H(e)})}var yn=class Ii extends X{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),o=this._def.values;return j(n,{expected:ee.joinValues(o),received:n.parsedType,code:I.invalid_type}),Y}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),o=this._def.values;return j(n,{received:n.data,code:I.invalid_enum_value,options:o}),Y}return Ae(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Ii.create(e)}exclude(e){return Ii.create(this.options.filter(n=>!e.includes(n)))}};yn.create=Ao;var nn=class extends X{_parse(r){const e=ee.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(r);if(n.parsedType!==L.string&&n.parsedType!==L.number){const o=ee.objectValues(e);return j(n,{expected:ee.joinValues(o),received:n.parsedType,code:I.invalid_type}),Y}if(e.indexOf(r.data)===-1){const o=ee.objectValues(e);return j(n,{received:n.data,code:I.invalid_enum_value,options:o}),Y}return Ae(r.data)}get enum(){return this._def.values}};nn.create=(r,e)=>new nn({values:r,typeName:z.ZodNativeEnum,...H(e)});var wr=class extends X{unwrap(){return this._def.type}_parse(r){const{ctx:e}=this._processInputParams(r);if(e.parsedType!==L.promise&&e.common.async===!1)return j(e,{code:I.invalid_type,expected:L.promise,received:e.parsedType}),Y;const n=e.parsedType===L.promise?e.data:Promise.resolve(e.data);return Ae(n.then(o=>this._def.type.parseAsync(o,{path:e.path,errorMap:e.common.contextualErrorMap})))}};wr.create=(r,e)=>new wr({type:r,typeName:z.ZodPromise,...H(e)});var Je=class extends X{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===z.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(r){const{status:e,ctx:n}=this._processInputParams(r),o=this._def.effect||null,u={addIssue:c=>{j(n,c),c.fatal?e.abort():e.dirty()},get path(){return n.path}};if(u.addIssue=u.addIssue.bind(u),o.type==="preprocess"){const c=o.transform(n.data,u);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(c).then(f=>this._def.schema._parseAsync({data:f,path:n.path,parent:n})):this._def.schema._parseSync({data:c,path:n.path,parent:n})}if(o.type==="refinement"){const c=f=>{const s=o.refinement(f,u);if(n.common.async)return Promise.resolve(s);if(s instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return f};if(n.common.async===!1){const f=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return f.status==="aborted"?Y:(f.status==="dirty"&&e.dirty(),c(f.value),{status:e.value,value:f.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(f=>f.status==="aborted"?Y:(f.status==="dirty"&&e.dirty(),c(f.value).then(()=>({status:e.value,value:f.value}))))}if(o.type==="transform")if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Vr(c))return c;const f=o.transform(c.value,u);if(f instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:f}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>Vr(c)?Promise.resolve(o.transform(c.value,u)).then(f=>({status:e.value,value:f})):c);ee.assertNever(o)}};Je.create=(r,e,n)=>new Je({schema:r,typeName:z.ZodEffects,effect:e,...H(n)});Je.createWithPreprocess=(r,e,n)=>new Je({schema:e,effect:{type:"preprocess",transform:r},typeName:z.ZodEffects,...H(n)});var ft=class extends X{_parse(r){return this._getType(r)===L.undefined?Ae(void 0):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}};ft.create=(r,e)=>new ft({innerType:r,typeName:z.ZodOptional,...H(e)});var qt=class extends X{_parse(r){return this._getType(r)===L.null?Ae(null):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}};qt.create=(r,e)=>new qt({innerType:r,typeName:z.ZodNullable,...H(e)});var an=class extends X{_parse(r){const{ctx:e}=this._processInputParams(r);let n=e.data;return e.parsedType===L.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};an.create=(r,e)=>new an({innerType:r,typeName:z.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...H(e)});var Pn=class extends X{_parse(r){const{ctx:e}=this._processInputParams(r),n={...e,common:{...e.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ln(o)?o.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new Fe(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Fe(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Pn.create=(r,e)=>new Pn({innerType:r,typeName:z.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...H(e)});var Dn=class extends X{_parse(r){if(this._getType(r)!==L.nan){const n=this._getOrReturnCtx(r);return j(n,{code:I.invalid_type,expected:L.nan,received:n.parsedType}),Y}return{status:"valid",value:r.data}}};Dn.create=r=>new Dn({typeName:z.ZodNaN,...H(r)});var Mf=Symbol("zod_brand"),xo=class extends X{_parse(r){const{ctx:e}=this._processInputParams(r),n=e.data;return this._def.type._parse({data:n,path:e.path,parent:e})}unwrap(){return this._def.type}},Gi=class To extends X{_parse(e){const{status:n,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{const c=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return c.status==="aborted"?Y:c.status==="dirty"?(n.dirty(),go(c.value)):this._def.out._parseAsync({data:c.value,path:o.path,parent:o})})();{const u=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return u.status==="aborted"?Y:u.status==="dirty"?(n.dirty(),{status:"dirty",value:u.value}):this._def.out._parseSync({data:u.value,path:o.path,parent:o})}}static create(e,n){return new To({in:e,out:n,typeName:z.ZodPipeline})}},$n=class extends X{_parse(r){const e=this._def.innerType._parse(r);return Vr(e)&&(e.value=Object.freeze(e.value)),e}};$n.create=(r,e)=>new $n({innerType:r,typeName:z.ZodReadonly,...H(e)});var So=(r,e={},n)=>r?mr.create().superRefine((o,u)=>{var c,f;if(!r(o)){const s=typeof e=="function"?e(o):typeof e=="string"?{message:e}:e,d=(f=(c=s.fatal)!==null&&c!==void 0?c:n)!==null&&f!==void 0?f:!0,y=typeof s=="string"?{message:s}:s;u.addIssue({code:"custom",...y,fatal:d})}}):mr.create(),Pf={object:Ne.lazycreate},z;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(z||(z={}));var Df=(r,e={message:`Input not instance of ${r.name}`})=>So(n=>n instanceof r,e),Bo=gr.create,Io=Gr.create,$f=Dn.create,Zf=Yr.create,Co=Hr.create,zf=Kr.create,Wf=jn.create,qf=Xr.create,Vf=Jr.create,Gf=mr.create,Yf=Zt.create,Hf=pt.create,Kf=Fn.create,Xf=Wt.create,Jf=Ne.create,Qf=Ne.strictCreate,eh=Qr.create,th=wo.create,rh=en.create,nh=Lt.create,ih=bo.create,ah=Nn.create,oh=Mn.create,sh=Eo.create,uh=tn.create,ch=rn.create,lh=yn.create,fh=nn.create,hh=wr.create,ba=Je.create,ph=ft.create,dh=qt.create,yh=Je.createWithPreprocess,gh=Gi.create,mh=()=>Bo().optional(),wh=()=>Io().optional(),vh=()=>Co().optional(),_h={string:r=>gr.create({...r,coerce:!0}),number:r=>Gr.create({...r,coerce:!0}),boolean:r=>Hr.create({...r,coerce:!0}),bigint:r=>Yr.create({...r,coerce:!0}),date:r=>Kr.create({...r,coerce:!0})},bh=Y,x=Object.freeze({__proto__:null,defaultErrorMap:qr,setErrorMap:Tf,getErrorMap:Rn,makeIssue:kn,EMPTY_PATH:Sf,addIssueToContext:j,ParseStatus:Be,INVALID:Y,DIRTY:go,OK:Ae,isAborted:bi,isDirty:Ei,isValid:Vr,isAsync:Ln,get util(){return ee},get objectUtil(){return _i},ZodParsedType:L,getParsedType:Rt,ZodType:X,ZodString:gr,ZodNumber:Gr,ZodBigInt:Yr,ZodBoolean:Hr,ZodDate:Kr,ZodSymbol:jn,ZodUndefined:Xr,ZodNull:Jr,ZodAny:mr,ZodUnknown:Zt,ZodNever:pt,ZodVoid:Fn,ZodArray:Wt,ZodObject:Ne,ZodUnion:Qr,ZodDiscriminatedUnion:wo,ZodIntersection:en,ZodTuple:Lt,ZodRecord:bo,ZodMap:Nn,ZodSet:Mn,ZodFunction:Eo,ZodLazy:tn,ZodLiteral:rn,ZodEnum:yn,ZodNativeEnum:nn,ZodPromise:wr,ZodEffects:Je,ZodTransformer:Je,ZodOptional:ft,ZodNullable:qt,ZodDefault:an,ZodCatch:Pn,ZodNaN:Dn,BRAND:Mf,ZodBranded:xo,ZodPipeline:Gi,ZodReadonly:$n,custom:So,Schema:X,ZodSchema:X,late:Pf,get ZodFirstPartyTypeKind(){return z},coerce:_h,any:Gf,array:Xf,bigint:Zf,boolean:Co,date:zf,discriminatedUnion:th,effect:ba,enum:lh,function:sh,instanceof:Df,intersection:rh,lazy:uh,literal:ch,map:ah,nan:$f,nativeEnum:fh,never:Hf,null:Vf,nullable:dh,number:Io,object:Jf,oboolean:vh,onumber:wh,optional:ph,ostring:mh,pipeline:gh,preprocess:yh,promise:hh,record:ih,set:oh,strictObject:Qf,string:Bo,symbol:Wf,transformer:ba,tuple:nh,undefined:qf,union:eh,unknown:Yf,void:Kf,NEVER:bh,ZodIssueCode:I,quotelessJson:xf,ZodError:Fe});function Eh({fetch:r,GATEWAY_URL:e}){const n=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            owner {
              address
            }
            tags {
              name
              value
            }
            block {
              id
              height
              timestamp
            }
          }
        }
      }
    }`,o=x.object({data:x.object({transactions:x.object({edges:x.array(x.object({node:x.record(x.any())}))})})});return u=>J(u).chain(ue(c=>r(`${e}/graphql`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n,variables:{transactionIds:[c]}})}).then(f=>f.json()).then(o.parse).then(gf(["data","transactions","edges","0","node"])))).toPromise()}var Ah=ki(Ms(),1),Uo=(r="@permaweb/aoconnect")=>{const e=(0,Ah.default)(r);return e.child=n=>Uo(`${e.namespace}:${n}`),e.tap=(n,...o)=>Af((...u)=>e(n,...o,...u)),e};function xh(r){return yr(Jn([]),dr((e,n)=>yr(vf([],n.name),Wi(n.value),Xe(n.name,ht,e))(e),{}),Kn(e=>e.length>1?e:e[0]))(r)}function je(r,e){return n=>ro(Sl([va(r,"name"),Vi(zi(e),va(e,"value"),Di)]),n)}function Ea(r){return ho([[zr(String),nr(r)],[zr(Array),of(r)],[Di,jc]])}function br(r){let e;return zr(Fe,r)?(e=new Error(Th(r)),e.stack+=r.stack):zr(Error,r)?e=r:rf("message",r)?e=new Error(r.message):zr(String,r)?e=new Error(r):e=new Error("An error occurred"),e}function Th(r){return yr(e=>function n(o,u,c){return dr((f,s)=>yr(ho([[nr(I.invalid_arguments),()=>n(s.argumentsError,422,"Invalid Arguments")],[nr(I.invalid_return_type),()=>n(s.returnTypeError,500,"Invalid Return")],[nr(I.invalid_union),()=>Zl(d=>n(d,400,"Invalid Union"),s.unionErrors)],[Di,()=>[{...s,status:u,contextCode:c}]]]),qi(f))(s.code),[],o.issues)}(e,400,""),e=>dr((n,o)=>{const{message:u,path:c,contextCode:f}=o,s=c[1]||c[0],d=f?`${f} `:"";return n.push(`${d}'${s}': ${u}.`),n},[],e),hf(" | "))(r)}var Sh=x.object({id:x.string().min(1,{message:"message is required to be a message id"}),processId:x.string().min(1,{message:"process is required to be a process id"})});function Bh(){return r=>J(r).map(Sh.parse).map(()=>r)}var gn=x.object({name:x.string(),value:x.string()}),Ih=x.function().args(x.object({Id:x.string(),Target:x.string(),Owner:x.string(),Anchor:x.string().optional(),Data:x.any().default("1234"),Tags:x.array(x.object({name:x.string(),value:x.string()}))})).returns(x.promise(x.any())),Ch=x.function().args(x.object({id:x.string().min(1,{message:"message id is required"}),processId:x.string().min(1,{message:"process id is required"})})).returns(x.promise(x.any())),Uh=x.function().args(x.object({process:x.string().min(1,{message:"process id is required"}),from:x.string().optional(),to:x.string().optional(),sort:x.enum(["ASC","DESC"]).default("ASC"),limit:x.string().optional()})).returns(x.promise(x.object({edges:x.array(x.object({cursor:x.string(),node:x.object({Output:x.any().optional(),Messages:x.array(x.any()).optional(),Spawns:x.array(x.any()).optional(),Error:x.any().optional()})}))}))),Oo=x.function().args(x.object({processId:x.string(),data:x.any(),tags:x.array(gn),anchor:x.string().optional(),signer:x.any()})).returns(x.promise(x.object({messageId:x.string()}).passthrough())),Oh=x.function().args(x.object({data:x.any(),tags:x.array(gn),signer:x.any()})).returns(x.promise(x.object({processId:x.string()}).passthrough())),Ro=Oo;x.function().args(x.object({suUrl:x.string().url(),processId:x.string()})).returns(x.promise(x.object({tags:x.array(gn)}).passthrough()));x.function().args(x.string()).returns(x.promise(x.object({url:x.string()})));var Rh=x.function().args(x.string()).returns(x.promise(x.boolean())),kh=x.function().args(x.string()).returns(x.promise(x.object({tags:x.array(gn)}).passthrough())),Qn=x.function().args(x.object({data:x.any(),tags:x.array(gn),target:x.string().optional(),anchor:x.string().optional()})).returns(x.promise(x.object({id:x.string(),raw:x.any()})));function Lh({loadResult:r}){return r=ue(Ch.implement(r)),e=>J({id:e.id,processId:e.processId}).chain(r)}function jh(r){const e=Bh(),n=Lh(r);return({message:o,process:u})=>J({id:o,processId:u}).chain(e).chain(n).map(r.logger.tap('readResult result for message "%s": %O',o)).map(c=>c).bimap(br,_r).toPromise()}var Fh=x.array(x.object({name:x.string(),value:x.string()}));function Nh(){return r=>J(r.tags).map(Jn([])).map(je("Data-Protocol","ao")).map(je("Variant")).map(je("Type")).map(je("SDK")).map(qi(ht,[{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Message"},{name:"SDK",value:"aoconnect"}])).map(Fh.parse).map(Xe("tags",ht,r))}function Mh({logger:r}){return e=>J(e).chain(Vi(zi(e.data),()=>zt(e),()=>zt(Math.random().toString().slice(-4)).map(Xe("data",ht,e)).map(n=>yr(Ht("tags"),je("Content-Type"),Wi({name:"Content-Type",value:"text/plain"}),Xe("tags",ht,n))(n)).map(r.tap('added pseudo-random string as message "data"'))))}function Ph(r){const e=Nh(),n=Mh(r),o=Oo.implement(r.deployMessage);return u=>J(u).chain(e).chain(n).chain(ue(({id:c,data:f,tags:s,anchor:d,signer:y})=>o({processId:c,data:f,tags:s,anchor:d,signer:Qn.implement(y)}))).map(c=>Xe("messageId",c.messageId,u))}function Dh(r){const e=Ph(r);return({process:n,data:o,tags:u,anchor:c,signer:f})=>J({id:n,data:o,tags:u,anchor:c,signer:f}).chain(e).map(s=>s.messageId).bimap(br,_r).toPromise()}var Nr=(r,e,n)=>o=>e(o[r])?zt(o):Gt(`Tag '${r}': ${n}`);function $h({loadTransactionMeta:r,logger:e}){return r=ue(kh.implement(r)),n=>J(n).chain(r).map(Ht("tags")).map(xh).chain(Nr("Data-Protocol",Ea("ao"),"value 'ao' was not found on module")).chain(Nr("Type",Ea("Module"),"value 'Module' was not found on module")).chain(Nr("Module-Format",ui,"was not found on module")).chain(Nr("Input-Encoding",ui,"was not found on module")).chain(Nr("Output-Encoding",ui,"was not found on module")).bimap(e.tap("Verifying module source failed: %s"),e.tap("Verified module source"))}function Zh({logger:r,validateScheduler:e}){return e=ue(Rh.implement(e)),n=>J(n).chain(o=>e(o).chain(u=>u?zt(o):Gt(`Valid Scheduler-Location owned by ${o} not found`))).bimap(r.tap("Verifying scheduler failed: %s"),r.tap("Verified scheduler"))}function zh({logger:r}){return e=>J(e).map(r.tap("Checking for signer")).chain(n=>n?zt(n):Gt("signer not found"))}function Wh(r){const e=r.logger.child("verifyInput");r={...r,logger:e};const n=$h(r),o=Zh(r),u=zh(r);return c=>J(c).chain(f=>n(f.module).map(()=>f)).chain(f=>o(f.scheduler)).map(()=>c).chain(f=>u(f.signer).map(()=>f)).bimap(e.tap("Error when verify input: %s"),e.tap("Successfully verified inputs"))}var qh=x.array(x.object({name:x.string(),value:x.string()}));function Vh(){return r=>J(r).map(Ht("tags")).map(Jn([])).map(je("Data-Protocol","ao")).map(je("Variant")).map(je("Type")).map(je("Module")).map(je("Scheduler")).map(je("SDK")).map(qi(ht,[{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Process"},{name:"Module",value:r.module},{name:"Scheduler",value:r.scheduler},{name:"SDK",value:"aoconnect"}])).map(qh.parse).map(Xe("tags",ht,r))}function Gh({logger:r}){return e=>J(e).chain(Vi(zi(e.data),()=>zt(e),()=>zt(Math.random().toString().slice(-4)).map(Xe("data",ht,e)).map(n=>yr(Ht("tags"),je("Content-Type"),Wi({name:"Content-Type",value:"text/plain"}),Xe("tags",ht,n))(n)).map(r.tap('added pseudo-random string as process "data"'))))}function Yh(r){const e=r.logger.child("uploadProcess");r={...r,logger:e};const n=Vh(),o=Gh(r),u=Oh.implement(r.deployProcess);return c=>J(c).chain(n).chain(o).chain(ue(({data:f,tags:s,signer:d})=>u({data:f,tags:s,signer:Qn.implement(d)}))).map(f=>Xe("processId",f.processId,c))}function Hh(r){const e=Wh(r),n=Yh(r);return({module:o,scheduler:u,signer:c,tags:f,data:s})=>J({module:o,scheduler:u,signer:c,tags:f,data:s}).chain(e).chain(n).map(d=>d.processId).bimap(br,_r).toPromise()}function Kh(r){const e=Ro.implement(r.deployMonitor);return n=>J(n).chain(ue(({id:o,signer:u})=>e({processId:o,signer:Qn.implement(u),data:Math.random().toString().slice(-4),tags:[]}))).map(o=>Xe("monitorId",o.messageId,n))}function Xh(r){const e=Kh(r);return({process:n,signer:o})=>J({id:n,signer:o}).chain(e).map(u=>u.monitorId).bimap(br,_r).toPromise()}function Jh(r){const e=Ro.implement(r.deployUnmonitor);return n=>J(n).chain(ue(({id:o,signer:u})=>e({processId:o,signer:Qn.implement(u),data:Math.random().toString().slice(-4),tags:[]}))).map(o=>Xe("monitorId",o.messageId,n))}function Qh(r){const e=Jh(r);return({process:n,signer:o})=>J({id:n,signer:o}).chain(e).map(u=>u.monitorId).bimap(br,_r).toPromise()}var ep=x.object({process:x.string().min(1,{message:"process identifier is required"}),from:x.string().optional(),to:x.string().optional(),sort:x.enum(["ASC","DESC"]).default("ASC"),limit:x.string().optional()});function tp(){return r=>J(r).map(ep.parse).map(()=>r)}function rp({queryResults:r}){return r=ue(Uh.implement(r)),e=>J({process:e.process,from:e.from,to:e.to,sort:e.sort}).chain(r)}function np(r){const e=tp(),n=rp(r);return({process:o,from:u,to:c,sort:f})=>J({process:o,from:u,to:c,sort:f}).chain(e).chain(n).map(r.logger.tap('readResults result for message "%s": %O',o)).map(s=>s).bimap(br,_r).toPromise()}var ip=x.object({Id:x.string(),Target:x.string(),Owner:x.string(),Anchor:x.string().optional(),Data:x.any().default("1234"),Tags:x.array(x.object({name:x.string(),value:x.string()}))});function ap(){return r=>J(r).map(ip.parse).map(e=>(e.Tags=e.Tags.concat([{name:"Data-Protocol",value:"ao"},{name:"Type",value:"Message"},{name:"Variant",value:"ao.TN.1"}]),e))}function op({dryrunFetch:r}){return ue(Ih.implement(r))}function sp(r){const e=ap(),n=op(r);return o=>J(o).map(up).chain(e).chain(n).toPromise()}function up({process:r,data:e,tags:n,anchor:o,...u}){return{Id:"1234",Owner:"1234",...u,Target:r,Data:e||"1234",Tags:n||[],Anchor:o||"0"}}var cp="https://arweave.net",lp="https://mu.ao-testnet.xyz",fp="https://cu.ao-testnet.xyz";function hp({GATEWAY_URL:r=cp,MU_URL:e=lp,CU_URL:n=fp}={}){const o=Uo(),{locate:u,validate:c}=Ja({cacheSize:100,GATEWAY_URL:r}),f=kc({MAX_SIZE:25}),s=o.child("result"),d=jh({loadResult:Uc({fetch,CU_URL:n,logger:s}),logger:s}),y=o.child("message"),_=Dh({loadProcessMeta:ai({fetch,cache:f,logger:y}),deployMessage:Tc({fetch,MU_URL:e,logger:y}),logger:y}),w=o.child("spawn"),E=Hh({loadTransactionMeta:Eh({fetch,GATEWAY_URL:r}),validateScheduler:c,deployProcess:Sc({fetch,MU_URL:e,logger:w}),logger:w}),b=o.child("monitor"),v=Xh({loadProcessMeta:ai({fetch,cache:f,logger:b}),deployMonitor:Bc({fetch,MU_URL:e,logger:b}),logger:b}),A=o.child("unmonitor"),S=Qh({loadProcessMeta:ai({fetch,cache:f,logger:A}),deployUnmonitor:Ic({fetch,MU_URL:e,logger:A}),logger:b}),B=o.child("results"),k=np({queryResults:Oc({fetch,CU_URL:n,logger:B}),logger:B}),C=o.child("dryrun"),N=sp({dryrunFetch:Cc({fetch,CU_URL:n,logger:C}),logger:C});return{result:d,results:k,message:_,spawn:E,monitor:v,unmonitor:S,dryrun:N}}var ko={};Ra(ko,{createDataItemSigner:()=>Np});var Lo=ki($s(),1),jo={};Ra(jo,{AVSCTap:()=>mn,ArweaveSigner:()=>Ki,DataItem:()=>on,MAX_TAG_BYTES:()=>ei,MIN_BINARY_SIZE:()=>Qi,SIG_CONFIG:()=>vr,SignatureConfig:()=>Te,Signer:()=>Po,createData:()=>zo,default:()=>Lp,deserializeTags:()=>Zn,indexToType:()=>Xi,serializeTags:()=>Ji,tagsExceedLimit:()=>Zo,warparbundles:()=>jp});var pp=Object.create,Yi=Object.defineProperty,dp=Object.getOwnPropertyDescriptor,yp=Object.getOwnPropertyNames,gp=Object.getPrototypeOf,mp=Object.prototype.hasOwnProperty,dt=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),wp=(r,e)=>{for(var n in e)Yi(r,n,{get:e[n],enumerable:!0})},vp=(r,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of yp(e))!mp.call(r,u)&&u!==n&&Yi(r,u,{get:()=>e[u],enumerable:!(o=dp(e,u))||o.enumerable});return r},Kt=(r,e,n)=>(n=r!=null?pp(gp(r)):{},vp(e||!r||!r.__esModule?Yi(n,"default",{value:r,enumerable:!0}):n,r)),_p=dt(r=>{Object.defineProperty(r,"__esModule",{value:!0});function e(n){var o=4,u=n.length,c=u%o;if(!c)return n;var f=u,s=o-c,d=u+s,y=Se.Buffer.alloc(d);for(y.write(n);s--;)y.write("=",f++);return y.toString()}r.default=e}),bp=dt(r=>{Object.defineProperty(r,"__esModule",{value:!0});var e=_p();function n(d,y){return y===void 0&&(y="utf8"),Se.Buffer.isBuffer(d)?c(d.toString("base64")):c(Se.Buffer.from(d,y).toString("base64"))}function o(d,y){return y===void 0&&(y="utf8"),Se.Buffer.from(u(d),"base64").toString(y)}function u(d){return d=d.toString(),e.default(d).replace(/\-/g,"+").replace(/_/g,"/")}function c(d){return d.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(d){return Se.Buffer.from(u(d),"base64")}var s=n;s.encode=n,s.decode=o,s.toBase64=u,s.fromBase64=c,s.toBuffer=f,r.default=s}),Hi=dt((r,e)=>{e.exports=bp().default,e.exports.default=e.exports}),Fo=dt(r=>{r.byteLength=d,r.toByteArray=_,r.fromByteArray=b;var e=[],n=[],o=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(c=0,f=u.length;c<f;++c)e[c]=u[c],n[u.charCodeAt(c)]=c;var c,f;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;function s(v){var A=v.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=v.indexOf("=");S===-1&&(S=A);var B=S===A?0:4-S%4;return[S,B]}function d(v){var A=s(v),S=A[0],B=A[1];return(S+B)*3/4-B}function y(v,A,S){return(A+S)*3/4-S}function _(v){var A,S=s(v),B=S[0],k=S[1],C=new o(y(v,B,k)),N=0,$=k>0?B-4:B,q;for(q=0;q<$;q+=4)A=n[v.charCodeAt(q)]<<18|n[v.charCodeAt(q+1)]<<12|n[v.charCodeAt(q+2)]<<6|n[v.charCodeAt(q+3)],C[N++]=A>>16&255,C[N++]=A>>8&255,C[N++]=A&255;return k===2&&(A=n[v.charCodeAt(q)]<<2|n[v.charCodeAt(q+1)]>>4,C[N++]=A&255),k===1&&(A=n[v.charCodeAt(q)]<<10|n[v.charCodeAt(q+1)]<<4|n[v.charCodeAt(q+2)]>>2,C[N++]=A>>8&255,C[N++]=A&255),C}function w(v){return e[v>>18&63]+e[v>>12&63]+e[v>>6&63]+e[v&63]}function E(v,A,S){for(var B,k=[],C=A;C<S;C+=3)B=(v[C]<<16&16711680)+(v[C+1]<<8&65280)+(v[C+2]&255),k.push(w(B));return k.join("")}function b(v){for(var A,S=v.length,B=S%3,k=[],C=16383,N=0,$=S-B;N<$;N+=C)k.push(E(v,N,N+C>$?$:N+C));return B===1?(A=v[S-1],k.push(e[A>>2]+e[A<<4&63]+"==")):B===2&&(A=(v[S-2]<<8)+v[S-1],k.push(e[A>>10]+e[A>>4&63]+e[A<<2&63]+"=")),k.join("")}}),No=dt(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.b64UrlDecode=r.b64UrlEncode=r.bufferTob64Url=r.bufferTob64=r.b64UrlToBuffer=r.stringToB64Url=r.stringToBuffer=r.bufferToString=r.b64UrlToString=r.concatBuffers=void 0;var e=Fo();function n(E){let b=0;for(let S=0;S<E.length;S++)b+=E[S].byteLength;let v=new Uint8Array(b),A=0;v.set(new Uint8Array(E[0]),A),A+=E[0].byteLength;for(let S=1;S<E.length;S++)v.set(new Uint8Array(E[S]),A),A+=E[S].byteLength;return v}r.concatBuffers=n;function o(E){let b=s(E);return u(b)}r.b64UrlToString=o;function u(E){return new TextDecoder("utf-8",{fatal:!0}).decode(E)}r.bufferToString=u;function c(E){return new TextEncoder().encode(E)}r.stringToBuffer=c;function f(E){return y(c(E))}r.stringToB64Url=f;function s(E){return new Uint8Array(e.toByteArray(w(E)))}r.b64UrlToBuffer=s;function d(E){return e.fromByteArray(new Uint8Array(E))}r.bufferTob64=d;function y(E){return _(d(E))}r.bufferTob64Url=y;function _(E){return E.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}r.b64UrlEncode=_;function w(E){E=E.replace(/\-/g,"+").replace(/\_/g,"/");let b;return E.length%4==0?b=0:b=4-E.length%4,E.concat("=".repeat(b))}r.b64UrlDecode=w}),Ep=dt(r=>{Object.defineProperty(r,"__esModule",{value:!0});var e=No(),n=class{constructor(){W(this,"keyLength",4096);W(this,"publicExponent",65537);W(this,"hashAlgorithm","sha256");W(this,"driver");if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let o=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),u=await this.driver.exportKey("jwk",o.privateKey);return{kty:u.kty,e:u.e,n:u.n,d:u.d,p:u.p,q:u.q,dp:u.dp,dq:u.dq,qi:u.qi}}async sign(o,u,{saltLength:c}={}){let f=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(o),u);return new Uint8Array(f)}async hash(o,u="SHA-256"){let c=await this.driver.digest(u,o);return new Uint8Array(c)}async verify(o,u,c){let f={kty:"RSA",e:"AQAB",n:o},s=await this.jwkToPublicCryptoKey(f),d=await this.driver.digest("SHA-256",u),y=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,c,u),_=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,c,u),w=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-d.byteLength-2},s,c,u);return y||_||w}async jwkToCryptoKey(o){return this.driver.importKey("jwk",o,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(o){return this.driver.importKey("jwk",o,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let o=crypto==null?void 0:crypto.subtle;return o===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(u=>typeof o[u]=="function")}async encrypt(o,u,c){let f=await this.driver.importKey("raw",typeof u=="string"?e.stringToBuffer(u):u,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:c?e.stringToBuffer(c):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},f,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),d=new Uint8Array(16);crypto.getRandomValues(d);let y=await this.driver.encrypt({name:"AES-CBC",iv:d},s,o);return e.concatBuffers([d,y])}async decrypt(o,u,c){let f=await this.driver.importKey("raw",typeof u=="string"?e.stringToBuffer(u):u,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:c?e.stringToBuffer(c):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},f,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),d=o.slice(0,16),y=await this.driver.decrypt({name:"AES-CBC",iv:d},s,o.slice(16));return e.concatBuffers([y])}};r.default=n}),Ap=dt(r=>{r.read=function(e,n,o,u,c){var f,s,d=c*8-u-1,y=(1<<d)-1,_=y>>1,w=-7,E=o?c-1:0,b=o?-1:1,v=e[n+E];for(E+=b,f=v&(1<<-w)-1,v>>=-w,w+=d;w>0;f=f*256+e[n+E],E+=b,w-=8);for(s=f&(1<<-w)-1,f>>=-w,w+=u;w>0;s=s*256+e[n+E],E+=b,w-=8);if(f===0)f=1-_;else{if(f===y)return s?NaN:(v?-1:1)*(1/0);s=s+Math.pow(2,u),f=f-_}return(v?-1:1)*s*Math.pow(2,f-u)},r.write=function(e,n,o,u,c,f){var s,d,y,_=f*8-c-1,w=(1<<_)-1,E=w>>1,b=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=u?0:f-1,A=u?1:-1,S=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(d=isNaN(n)?1:0,s=w):(s=Math.floor(Math.log(n)/Math.LN2),n*(y=Math.pow(2,-s))<1&&(s--,y*=2),s+E>=1?n+=b/y:n+=b*Math.pow(2,1-E),n*y>=2&&(s++,y/=2),s+E>=w?(d=0,s=w):s+E>=1?(d=(n*y-1)*Math.pow(2,c),s=s+E):(d=n*Math.pow(2,E-1)*Math.pow(2,c),s=0));c>=8;e[o+v]=d&255,v+=A,d/=256,c-=8);for(s=s<<c|d,_+=c;_>0;e[o+v]=s&255,v+=A,s/=256,_-=8);e[o+v-A]|=S*128}}),Ci=dt(r=>{var e=Fo(),n=Ap(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=k,r.INSPECT_MAX_BYTES=50;var u=2147483647;r.kMaxLength=u,s.TYPED_ARRAY_SUPPORT=c(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{let a=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(a,t),a.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function f(a){if(a>u)throw new RangeError('The value "'+a+'" is invalid for option "size"');let t=new Uint8Array(a);return Object.setPrototypeOf(t,s.prototype),t}function s(a,t,i){if(typeof a=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(a)}return d(a,t,i)}s.poolSize=8192;function d(a,t,i){if(typeof a=="string")return E(a,t);if(ArrayBuffer.isView(a))return v(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(Q(a,ArrayBuffer)||a&&Q(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Q(a,SharedArrayBuffer)||a&&Q(a.buffer,SharedArrayBuffer)))return A(a,t,i);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let l=a.valueOf&&a.valueOf();if(l!=null&&l!==a)return s.from(l,t,i);let h=S(a);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return s.from(a[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}s.from=function(a,t,i){return d(a,t,i)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function y(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function _(a,t,i){return y(a),a<=0?f(a):t!==void 0?typeof i=="string"?f(a).fill(t,i):f(a).fill(t):f(a)}s.alloc=function(a,t,i){return _(a,t,i)};function w(a){return y(a),f(a<0?0:B(a)|0)}s.allocUnsafe=function(a){return w(a)},s.allocUnsafeSlow=function(a){return w(a)};function E(a,t){if((typeof t!="string"||t==="")&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let i=C(a,t)|0,l=f(i),h=l.write(a,t);return h!==i&&(l=l.slice(0,h)),l}function b(a){let t=a.length<0?0:B(a.length)|0,i=f(t);for(let l=0;l<t;l+=1)i[l]=a[l]&255;return i}function v(a){if(Q(a,Uint8Array)){let t=new Uint8Array(a);return A(t.buffer,t.byteOffset,t.byteLength)}return b(a)}function A(a,t,i){if(t<0||a.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');let l;return t===void 0&&i===void 0?l=new Uint8Array(a):i===void 0?l=new Uint8Array(a,t):l=new Uint8Array(a,t,i),Object.setPrototypeOf(l,s.prototype),l}function S(a){if(s.isBuffer(a)){let t=B(a.length)|0,i=f(t);return i.length===0||a.copy(i,0,0,t),i}if(a.length!==void 0)return typeof a.length!="number"||De(a.length)?f(0):b(a);if(a.type==="Buffer"&&Array.isArray(a.data))return b(a.data)}function B(a){if(a>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return a|0}function k(a){return+a!=a&&(a=0),s.alloc(+a)}s.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==s.prototype},s.compare=function(a,t){if(Q(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),Q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(a)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===t)return 0;let i=a.length,l=t.length;for(let h=0,p=Math.min(i,l);h<p;++h)if(a[h]!==t[h]){i=a[h],l=t[h];break}return i<l?-1:l<i?1:0},s.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(a,t){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return s.alloc(0);let i;if(t===void 0)for(t=0,i=0;i<a.length;++i)t+=a[i].length;let l=s.allocUnsafe(t),h=0;for(i=0;i<a.length;++i){let p=a[i];if(Q(p,Uint8Array))h+p.length>l.length?(s.isBuffer(p)||(p=s.from(p)),p.copy(l,h)):Uint8Array.prototype.set.call(l,p,h);else if(s.isBuffer(p))p.copy(l,h);else throw new TypeError('"list" argument must be an Array of Buffers');h+=p.length}return l};function C(a,t){if(s.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||Q(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let i=a.length,l=arguments.length>2&&arguments[2]===!0;if(!l&&i===0)return 0;let h=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Pe(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Tt(a).length;default:if(h)return l?-1:Pe(a).length;t=(""+t).toLowerCase(),h=!0}}s.byteLength=C;function N(a,t,i){let l=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,t>>>=0,i<=t))return"";for(a||(a="utf8");;)switch(a){case"hex":return Sr(this,t,i);case"utf8":case"utf-8":return gt(this,t,i);case"ascii":return xr(this,t,i);case"latin1":case"binary":return Tr(this,t,i);case"base64":return Er(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Br(this,t,i);default:if(l)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),l=!0}}s.prototype._isBuffer=!0;function $(a,t,i){let l=a[t];a[t]=a[i],a[i]=l}s.prototype.swap16=function(){let a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<a;t+=2)$(this,t,t+1);return this},s.prototype.swap32=function(){let a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<a;t+=4)$(this,t,t+3),$(this,t+1,t+2);return this},s.prototype.swap64=function(){let a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<a;t+=8)$(this,t,t+7),$(this,t+1,t+6),$(this,t+2,t+5),$(this,t+3,t+4);return this},s.prototype.toString=function(){let a=this.length;return a===0?"":arguments.length===0?gt(this,0,a):N.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(a){if(!s.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:s.compare(this,a)===0},s.prototype.inspect=function(){let a="",t=r.INSPECT_MAX_BYTES;return a=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(a+=" ... "),"<Buffer "+a+">"},o&&(s.prototype[o]=s.prototype.inspect),s.prototype.compare=function(a,t,i,l,h){if(Q(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),!s.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(t===void 0&&(t=0),i===void 0&&(i=a?a.length:0),l===void 0&&(l=0),h===void 0&&(h=this.length),t<0||i>a.length||l<0||h>this.length)throw new RangeError("out of range index");if(l>=h&&t>=i)return 0;if(l>=h)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,l>>>=0,h>>>=0,this===a)return 0;let p=h-l,g=i-t,T=Math.min(p,g),F=this.slice(l,h),O=a.slice(t,i);for(let R=0;R<T;++R)if(F[R]!==O[R]){p=F[R],g=O[R];break}return p<g?-1:g<p?1:0};function q(a,t,i,l,h){if(a.length===0)return-1;if(typeof i=="string"?(l=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,De(i)&&(i=h?0:a.length-1),i<0&&(i=a.length+i),i>=a.length){if(h)return-1;i=a.length-1}else if(i<0)if(h)i=0;else return-1;if(typeof t=="string"&&(t=s.from(t,l)),s.isBuffer(t))return t.length===0?-1:ce(a,t,i,l,h);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(a,t,i):Uint8Array.prototype.lastIndexOf.call(a,t,i):ce(a,[t],i,l,h);throw new TypeError("val must be string, number or Buffer")}function ce(a,t,i,l,h){let p=1,g=a.length,T=t.length;if(l!==void 0&&(l=String(l).toLowerCase(),l==="ucs2"||l==="ucs-2"||l==="utf16le"||l==="utf-16le")){if(a.length<2||t.length<2)return-1;p=2,g/=2,T/=2,i/=2}function F(R,U){return p===1?R[U]:R.readUInt16BE(U*p)}let O;if(h){let R=-1;for(O=i;O<g;O++)if(F(a,O)===F(t,R===-1?0:O-R)){if(R===-1&&(R=O),O-R+1===T)return R*p}else R!==-1&&(O-=O-R),R=-1}else for(i+T>g&&(i=g-T),O=i;O>=0;O--){let R=!0;for(let U=0;U<T;U++)if(F(a,O+U)!==F(t,U)){R=!1;break}if(R)return O}return-1}s.prototype.includes=function(a,t,i){return this.indexOf(a,t,i)!==-1},s.prototype.indexOf=function(a,t,i){return q(this,a,t,i,!0)},s.prototype.lastIndexOf=function(a,t,i){return q(this,a,t,i,!1)};function at(a,t,i,l){i=Number(i)||0;let h=a.length-i;l?(l=Number(l),l>h&&(l=h)):l=h;let p=t.length;l>p/2&&(l=p/2);let g;for(g=0;g<l;++g){let T=parseInt(t.substr(g*2,2),16);if(De(T))return g;a[i+g]=T}return g}function ke(a,t,i,l){return xe(Pe(t,a.length-i),a,i,l)}function jt(a,t,i,l){return xe(Or(t),a,i,l)}function yt(a,t,i,l){return xe(Tt(t),a,i,l)}function Ft(a,t,i,l){return xe(Rr(t,a.length-i),a,i,l)}s.prototype.write=function(a,t,i,l){if(t===void 0)l="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")l=t,i=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(i)?(i=i>>>0,l===void 0&&(l="utf8")):(l=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((i===void 0||i>h)&&(i=h),a.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");l||(l="utf8");let p=!1;for(;;)switch(l){case"hex":return at(this,a,t,i);case"utf8":case"utf-8":return ke(this,a,t,i);case"ascii":case"latin1":case"binary":return jt(this,a,t,i);case"base64":return yt(this,a,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ft(this,a,t,i);default:if(p)throw new TypeError("Unknown encoding: "+l);l=(""+l).toLowerCase(),p=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Er(a,t,i){return t===0&&i===a.length?e.fromByteArray(a):e.fromByteArray(a.slice(t,i))}function gt(a,t,i){i=Math.min(a.length,i);let l=[],h=t;for(;h<i;){let p=a[h],g=null,T=p>239?4:p>223?3:p>191?2:1;if(h+T<=i){let F,O,R,U;switch(T){case 1:p<128&&(g=p);break;case 2:F=a[h+1],(F&192)===128&&(U=(p&31)<<6|F&63,U>127&&(g=U));break;case 3:F=a[h+1],O=a[h+2],(F&192)===128&&(O&192)===128&&(U=(p&15)<<12|(F&63)<<6|O&63,U>2047&&(U<55296||U>57343)&&(g=U));break;case 4:F=a[h+1],O=a[h+2],R=a[h+3],(F&192)===128&&(O&192)===128&&(R&192)===128&&(U=(p&15)<<18|(F&63)<<12|(O&63)<<6|R&63,U>65535&&U<1114112&&(g=U))}}g===null?(g=65533,T=1):g>65535&&(g-=65536,l.push(g>>>10&1023|55296),g=56320|g&1023),l.push(g),h+=T}return Ar(l)}var mt=4096;function Ar(a){let t=a.length;if(t<=mt)return String.fromCharCode.apply(String,a);let i="",l=0;for(;l<t;)i+=String.fromCharCode.apply(String,a.slice(l,l+=mt));return i}function xr(a,t,i){let l="";i=Math.min(a.length,i);for(let h=t;h<i;++h)l+=String.fromCharCode(a[h]&127);return l}function Tr(a,t,i){let l="";i=Math.min(a.length,i);for(let h=t;h<i;++h)l+=String.fromCharCode(a[h]);return l}function Sr(a,t,i){let l=a.length;(!t||t<0)&&(t=0),(!i||i<0||i>l)&&(i=l);let h="";for(let p=t;p<i;++p)h+=kr[a[p]];return h}function Br(a,t,i){let l=a.slice(t,i),h="";for(let p=0;p<l.length-1;p+=2)h+=String.fromCharCode(l[p]+l[p+1]*256);return h}s.prototype.slice=function(a,t){let i=this.length;a=~~a,t=t===void 0?i:~~t,a<0?(a+=i,a<0&&(a=0)):a>i&&(a=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<a&&(t=a);let l=this.subarray(a,t);return Object.setPrototypeOf(l,s.prototype),l};function M(a,t,i){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+t>i)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(a,t,i){a=a>>>0,t=t>>>0,i||M(a,t,this.length);let l=this[a],h=1,p=0;for(;++p<t&&(h*=256);)l+=this[a+p]*h;return l},s.prototype.readUintBE=s.prototype.readUIntBE=function(a,t,i){a=a>>>0,t=t>>>0,i||M(a,t,this.length);let l=this[a+--t],h=1;for(;t>0&&(h*=256);)l+=this[a+--t]*h;return l},s.prototype.readUint8=s.prototype.readUInt8=function(a,t){return a=a>>>0,t||M(a,1,this.length),this[a]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(a,t){return a=a>>>0,t||M(a,2,this.length),this[a]|this[a+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(a,t){return a=a>>>0,t||M(a,2,this.length),this[a]<<8|this[a+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(a,t){return a=a>>>0,t||M(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(a,t){return a=a>>>0,t||M(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},s.prototype.readBigUInt64LE=ne(function(a){a=a>>>0,he(a,"offset");let t=this[a],i=this[a+7];(t===void 0||i===void 0)&&we(a,this.length-8);let l=t+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,h=this[++a]+this[++a]*2**8+this[++a]*2**16+i*2**24;return BigInt(l)+(BigInt(h)<<BigInt(32))}),s.prototype.readBigUInt64BE=ne(function(a){a=a>>>0,he(a,"offset");let t=this[a],i=this[a+7];(t===void 0||i===void 0)&&we(a,this.length-8);let l=t*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],h=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+i;return(BigInt(l)<<BigInt(32))+BigInt(h)}),s.prototype.readIntLE=function(a,t,i){a=a>>>0,t=t>>>0,i||M(a,t,this.length);let l=this[a],h=1,p=0;for(;++p<t&&(h*=256);)l+=this[a+p]*h;return h*=128,l>=h&&(l-=Math.pow(2,8*t)),l},s.prototype.readIntBE=function(a,t,i){a=a>>>0,t=t>>>0,i||M(a,t,this.length);let l=t,h=1,p=this[a+--l];for(;l>0&&(h*=256);)p+=this[a+--l]*h;return h*=128,p>=h&&(p-=Math.pow(2,8*t)),p},s.prototype.readInt8=function(a,t){return a=a>>>0,t||M(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},s.prototype.readInt16LE=function(a,t){a=a>>>0,t||M(a,2,this.length);let i=this[a]|this[a+1]<<8;return i&32768?i|4294901760:i},s.prototype.readInt16BE=function(a,t){a=a>>>0,t||M(a,2,this.length);let i=this[a+1]|this[a]<<8;return i&32768?i|4294901760:i},s.prototype.readInt32LE=function(a,t){return a=a>>>0,t||M(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},s.prototype.readInt32BE=function(a,t){return a=a>>>0,t||M(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},s.prototype.readBigInt64LE=ne(function(a){a=a>>>0,he(a,"offset");let t=this[a],i=this[a+7];(t===void 0||i===void 0)&&we(a,this.length-8);let l=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(i<<24);return(BigInt(l)<<BigInt(32))+BigInt(t+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),s.prototype.readBigInt64BE=ne(function(a){a=a>>>0,he(a,"offset");let t=this[a],i=this[a+7];(t===void 0||i===void 0)&&we(a,this.length-8);let l=(t<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(l)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+i)}),s.prototype.readFloatLE=function(a,t){return a=a>>>0,t||M(a,4,this.length),n.read(this,a,!0,23,4)},s.prototype.readFloatBE=function(a,t){return a=a>>>0,t||M(a,4,this.length),n.read(this,a,!1,23,4)},s.prototype.readDoubleLE=function(a,t){return a=a>>>0,t||M(a,8,this.length),n.read(this,a,!0,52,8)},s.prototype.readDoubleBE=function(a,t){return a=a>>>0,t||M(a,8,this.length),n.read(this,a,!1,52,8)};function V(a,t,i,l,h,p){if(!s.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>h||t<p)throw new RangeError('"value" argument is out of bounds');if(i+l>a.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(a,t,i,l){if(a=+a,t=t>>>0,i=i>>>0,!l){let g=Math.pow(2,8*i)-1;V(this,a,t,i,g,0)}let h=1,p=0;for(this[t]=a&255;++p<i&&(h*=256);)this[t+p]=a/h&255;return t+i},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(a,t,i,l){if(a=+a,t=t>>>0,i=i>>>0,!l){let g=Math.pow(2,8*i)-1;V(this,a,t,i,g,0)}let h=i-1,p=1;for(this[t+h]=a&255;--h>=0&&(p*=256);)this[t+h]=a/p&255;return t+i},s.prototype.writeUint8=s.prototype.writeUInt8=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,1,255,0),this[t]=a&255,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,2,65535,0),this[t]=a&255,this[t+1]=a>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,2,65535,0),this[t]=a>>>8,this[t+1]=a&255,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,4,4294967295,0),this[t+3]=a>>>24,this[t+2]=a>>>16,this[t+1]=a>>>8,this[t]=a&255,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,4,4294967295,0),this[t]=a>>>24,this[t+1]=a>>>16,this[t+2]=a>>>8,this[t+3]=a&255,t+4};function wt(a,t,i,l,h){xt(t,l,h,a,i,7);let p=Number(t&BigInt(4294967295));a[i++]=p,p=p>>8,a[i++]=p,p=p>>8,a[i++]=p,p=p>>8,a[i++]=p;let g=Number(t>>BigInt(32)&BigInt(4294967295));return a[i++]=g,g=g>>8,a[i++]=g,g=g>>8,a[i++]=g,g=g>>8,a[i++]=g,i}function vt(a,t,i,l,h){xt(t,l,h,a,i,7);let p=Number(t&BigInt(4294967295));a[i+7]=p,p=p>>8,a[i+6]=p,p=p>>8,a[i+5]=p,p=p>>8,a[i+4]=p;let g=Number(t>>BigInt(32)&BigInt(4294967295));return a[i+3]=g,g=g>>8,a[i+2]=g,g=g>>8,a[i+1]=g,g=g>>8,a[i]=g,i+8}s.prototype.writeBigUInt64LE=ne(function(a,t=0){return wt(this,a,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=ne(function(a,t=0){return vt(this,a,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(a,t,i,l){if(a=+a,t=t>>>0,!l){let T=Math.pow(2,8*i-1);V(this,a,t,i,T-1,-T)}let h=0,p=1,g=0;for(this[t]=a&255;++h<i&&(p*=256);)a<0&&g===0&&this[t+h-1]!==0&&(g=1),this[t+h]=(a/p>>0)-g&255;return t+i},s.prototype.writeIntBE=function(a,t,i,l){if(a=+a,t=t>>>0,!l){let T=Math.pow(2,8*i-1);V(this,a,t,i,T-1,-T)}let h=i-1,p=1,g=0;for(this[t+h]=a&255;--h>=0&&(p*=256);)a<0&&g===0&&this[t+h+1]!==0&&(g=1),this[t+h]=(a/p>>0)-g&255;return t+i},s.prototype.writeInt8=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,1,127,-128),a<0&&(a=255+a+1),this[t]=a&255,t+1},s.prototype.writeInt16LE=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,2,32767,-32768),this[t]=a&255,this[t+1]=a>>>8,t+2},s.prototype.writeInt16BE=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,2,32767,-32768),this[t]=a>>>8,this[t+1]=a&255,t+2},s.prototype.writeInt32LE=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,4,2147483647,-2147483648),this[t]=a&255,this[t+1]=a>>>8,this[t+2]=a>>>16,this[t+3]=a>>>24,t+4},s.prototype.writeInt32BE=function(a,t,i){return a=+a,t=t>>>0,i||V(this,a,t,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[t]=a>>>24,this[t+1]=a>>>16,this[t+2]=a>>>8,this[t+3]=a&255,t+4},s.prototype.writeBigInt64LE=ne(function(a,t=0){return wt(this,a,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=ne(function(a,t=0){return vt(this,a,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _t(a,t,i,l,h,p){if(i+l>a.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function bt(a,t,i,l,h){return t=+t,i=i>>>0,h||_t(a,t,i,4),n.write(a,t,i,l,23,4),i+4}s.prototype.writeFloatLE=function(a,t,i){return bt(this,a,t,!0,i)},s.prototype.writeFloatBE=function(a,t,i){return bt(this,a,t,!1,i)};function Et(a,t,i,l,h){return t=+t,i=i>>>0,h||_t(a,t,i,8),n.write(a,t,i,l,52,8),i+8}s.prototype.writeDoubleLE=function(a,t,i){return Et(this,a,t,!0,i)},s.prototype.writeDoubleBE=function(a,t,i){return Et(this,a,t,!1,i)},s.prototype.copy=function(a,t,i,l){if(!s.isBuffer(a))throw new TypeError("argument should be a Buffer");if(i||(i=0),!l&&l!==0&&(l=this.length),t>=a.length&&(t=a.length),t||(t=0),l>0&&l<i&&(l=i),l===i||a.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("sourceEnd out of bounds");l>this.length&&(l=this.length),a.length-t<l-i&&(l=a.length-t+i);let h=l-i;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,i,l):Uint8Array.prototype.set.call(a,this.subarray(i,l),t),h},s.prototype.fill=function(a,t,i,l){if(typeof a=="string"){if(typeof t=="string"?(l=t,t=0,i=this.length):typeof i=="string"&&(l=i,i=this.length),l!==void 0&&typeof l!="string")throw new TypeError("encoding must be a string");if(typeof l=="string"&&!s.isEncoding(l))throw new TypeError("Unknown encoding: "+l);if(a.length===1){let p=a.charCodeAt(0);(l==="utf8"&&p<128||l==="latin1")&&(a=p)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t=t>>>0,i=i===void 0?this.length:i>>>0,a||(a=0);let h;if(typeof a=="number")for(h=t;h<i;++h)this[h]=a;else{let p=s.isBuffer(a)?a:s.from(a,l),g=p.length;if(g===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(h=0;h<i-t;++h)this[h+t]=p[h%g]}return this};var fe={};function Me(a,t,i){fe[a]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(l){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:l,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}Me("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Me("ERR_INVALID_ARG_TYPE",function(a,t){return`The "${a}" argument must be of type number. Received type ${typeof t}`},TypeError),Me("ERR_OUT_OF_RANGE",function(a,t,i){let l=`The value of "${a}" is out of range.`,h=i;return Number.isInteger(i)&&Math.abs(i)>2**32?h=At(String(i)):typeof i=="bigint"&&(h=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(h=At(h)),h+="n"),l+=` It must be ${t}. Received ${h}`,l},RangeError);function At(a){let t="",i=a.length,l=a[0]==="-"?1:0;for(;i>=l+4;i-=3)t=`_${a.slice(i-3,i)}${t}`;return`${a.slice(0,i)}${t}`}function Ir(a,t,i){he(t,"offset"),(a[t]===void 0||a[t+i]===void 0)&&we(t,a.length-(i+1))}function xt(a,t,i,l,h,p){if(a>i||a<t){let g=typeof t=="bigint"?"n":"",T;throw p>3?t===0||t===BigInt(0)?T=`>= 0${g} and < 2${g} ** ${(p+1)*8}${g}`:T=`>= -(2${g} ** ${(p+1)*8-1}${g}) and < 2 ** ${(p+1)*8-1}${g}`:T=`>= ${t}${g} and <= ${i}${g}`,new fe.ERR_OUT_OF_RANGE("value",T,a)}Ir(l,h,p)}function he(a,t){if(typeof a!="number")throw new fe.ERR_INVALID_ARG_TYPE(t,"number",a)}function we(a,t,i){throw Math.floor(a)!==a?(he(a,i),new fe.ERR_OUT_OF_RANGE(i||"offset","an integer",a)):t<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${t}`,a)}var Cr=/[^+/0-9A-Za-z-_]/g;function Ur(a){if(a=a.split("=")[0],a=a.trim().replace(Cr,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function Pe(a,t){t=t||1/0;let i,l=a.length,h=null,p=[];for(let g=0;g<l;++g){if(i=a.charCodeAt(g),i>55295&&i<57344){if(!h){if(i>56319){(t-=3)>-1&&p.push(239,191,189);continue}else if(g+1===l){(t-=3)>-1&&p.push(239,191,189);continue}h=i;continue}if(i<56320){(t-=3)>-1&&p.push(239,191,189),h=i;continue}i=(h-55296<<10|i-56320)+65536}else h&&(t-=3)>-1&&p.push(239,191,189);if(h=null,i<128){if((t-=1)<0)break;p.push(i)}else if(i<2048){if((t-=2)<0)break;p.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;p.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;p.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return p}function Or(a){let t=[];for(let i=0;i<a.length;++i)t.push(a.charCodeAt(i)&255);return t}function Rr(a,t){let i,l,h,p=[];for(let g=0;g<a.length&&!((t-=2)<0);++g)i=a.charCodeAt(g),l=i>>8,h=i%256,p.push(h),p.push(l);return p}function Tt(a){return e.toByteArray(Ur(a))}function xe(a,t,i,l){let h;for(h=0;h<l&&!(h+i>=t.length||h>=a.length);++h)t[h+i]=a[h];return h}function Q(a,t){return a instanceof t||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===t.name}function De(a){return a!==a}var kr=function(){let a="0123456789abcdef",t=new Array(256);for(let i=0;i<16;++i){let l=i*16;for(let h=0;h<16;++h)t[l+h]=a[i]+a[h]}return t}();function ne(a){return typeof BigInt>"u"?Lr:a}function Lr(){throw new Error("BigInt not supported")}}),xp=dt((r,e)=>{typeof window<"u"?(window.global=window,Wn.fetch=window.fetch,e.exports={Buffer:Ci().Buffer,Crypto:window.crypto}):e.exports={Buffer:Ci().Buffer,Crypto:crypto}}),Mo={};wp(Mo,{AVSCTap:()=>mn,ArweaveSigner:()=>Ki,DataItem:()=>on,MAX_TAG_BYTES:()=>ei,MIN_BINARY_SIZE:()=>Qi,SIG_CONFIG:()=>vr,SignatureConfig:()=>Te,Signer:()=>Po,createData:()=>zo,deserializeTags:()=>Zn,indexToType:()=>Xi,serializeTags:()=>Ji,tagsExceedLimit:()=>Zo});var Po=class{constructor(){W(this,"signer");W(this,"publicKey");W(this,"signatureType");W(this,"signatureLength");W(this,"ownerLength");W(this,"pem")}static verify(r,e,n,o){throw new Error("You must implement verify method on child")}},Tp=Kt(Hi(),1),Ke=Kt(No(),1);async function Do(r){if(Array.isArray(r)){let u=(0,Ke.concatBuffers)([(0,Ke.stringToBuffer)("list"),(0,Ke.stringToBuffer)(r.length.toString())]);return await $o(r,await ct().hash(u,"SHA-384"))}let e=r,n=(0,Ke.concatBuffers)([(0,Ke.stringToBuffer)("blob"),(0,Ke.stringToBuffer)(e.byteLength.toString())]),o=(0,Ke.concatBuffers)([await ct().hash(n,"SHA-384"),await ct().hash(e,"SHA-384")]);return await ct().hash(o,"SHA-384")}async function $o(r,e){if(r.length<1)return e;let n=(0,Ke.concatBuffers)([e,await Do(r[0])]),o=await ct().hash(n,"SHA-384");return await $o(r.slice(1),o)}var li=Kt(Ep(),1),Sp=li.default.default?li.default.default:li.default,Bp=class extends Sp{getPublicKey(r){throw new Error("Unimplemented")}},Ip;function ct(){return Ip??(Ip=new Bp)}var Te;(function(r){r[r.ARWEAVE=1]="ARWEAVE",r[r.ED25519=2]="ED25519",r[r.ETHEREUM=3]="ETHEREUM",r[r.SOLANA=4]="SOLANA",r[r.INJECTEDAPTOS=5]="INJECTEDAPTOS",r[r.MULTIAPTOS=6]="MULTIAPTOS",r[r.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(Te||(Te={}));var vr={[Te.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[Te.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[Te.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[Te.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[Te.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[Te.MULTIAPTOS]:{sigLength:64*32+4,pubLength:32*32+1,sigName:"multiAptos"},[Te.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}},Ki=class{constructor(r){W(this,"signatureType",1);W(this,"ownerLength",vr[1].pubLength);W(this,"signatureLength",vr[1].sigLength);W(this,"jwk");W(this,"pk");this.pk=r.n,this.jwk=r}get publicKey(){return Tp.default.toBuffer(this.pk)}sign(r){return ct().sign(this.jwk,r)}static async verify(r,e,n){return await ct().verify(r,e,n)}},Xi={1:Ki},Qe=Kt(Hi(),1);async function Ui(r){return Do([(0,Ke.stringToBuffer)("dataitem"),(0,Ke.stringToBuffer)("1"),(0,Ke.stringToBuffer)(r.signatureType.toString()),r.rawOwner,r.rawTarget,r.rawAnchor,r.rawTags,r.rawData])}async function Cp(r,e){let n=await Ui(r),o=await e.sign(n),u=await ct().hash(o);return{signature:Se.Buffer.from(o),id:Se.Buffer.from(u)}}async function Up(r,e){let{signature:n,id:o}=await Cp(r,e);return r.getRaw().set(n,2),o}var mn=class{constructor(r=Se.Buffer.alloc(ei),e=0){W(this,"buf");W(this,"pos");this.buf=r,this.pos=e}writeTags(r){if(!Array.isArray(r))throw new Error("input must be array");let e=r.length,n;if(e)for(this.writeLong(e),n=0;n<e;n++){let o=r[n];if((o==null?void 0:o.name)===void 0||(o==null?void 0:o.value)===void 0)throw new Error(`Invalid tag format for ${o}, expected {name:string, value: string}`);this.writeString(o.name),this.writeString(o.value)}this.writeLong(0)}toBuffer(){let r=Se.Buffer.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(r,0,0,this.pos),r}tagsExceedLimit(){return this.pos>this.buf.length}writeLong(r){let e=this.buf,n,o;if(r>=-1073741824&&r<1073741824){o=r>=0?r<<1:~r<<1|1;do e[this.pos]=o&127,o>>=7;while(o&&(e[this.pos++]|=128))}else{n=r>=0?r*2:-r*2-1;do e[this.pos]=n&127,n/=128;while(n>=1&&(e[this.pos++]|=128))}this.pos++,this.buf=e}writeString(r){let e=Se.Buffer.byteLength(r),n=this.buf;this.writeLong(e);let o=this.pos;if(this.pos+=e,!(this.pos>n.length)){if(e>64)this.buf.write(r,this.pos-e,e,"utf8");else{let u,c,f,s;for(u=0,c=e;u<c;u++)f=r.charCodeAt(u),f<128?n[o++]=f:f<2048?(n[o++]=f>>6|192,n[o++]=f&63|128):(f&64512)===55296&&((s=r.charCodeAt(u+1))&64512)===56320?(f=65536+((f&1023)<<10)+(s&1023),u++,n[o++]=f>>18|240,n[o++]=f>>12&63|128,n[o++]=f>>6&63|128,n[o++]=f&63|128):(n[o++]=f>>12|224,n[o++]=f>>6&63|128,n[o++]=f&63|128)}this.buf=n}}readLong(){let r=0,e=0,n=this.buf,o,u,c,f;do o=n[this.pos++],u=o&128,r|=(o&127)<<e,e+=7;while(u&&e<28);if(u){c=r,f=268435456;do o=n[this.pos++],c+=(o&127)*f,f*=128;while(o&128);return(c%2?-(c+1):c)/2}return r>>1^-(r&1)}skipLong(){let r=this.buf;for(;r[this.pos++]&128;);}readTags(){let r=[],e;for(;e=this.readLong();)for(e<0&&(e=-e,this.skipLong());e--;){let n=this.readString(),o=this.readString();r.push({name:n,value:o})}return r}readString(){let r=this.readLong(),e=this.pos,n=this.buf;if(this.pos+=r,!(this.pos>n.length))return this.buf.slice(e,e+r).toString()}};function Ji(r){let e=new mn;return e.writeTags(r),e.toBuffer()}function Zo(r){let e=new mn;return e.writeTags(r),e.tagsExceedLimit()}function Zn(r){return new mn(r).readTags()}function St(r){let e=0;for(let n=r.length-1;n>=0;n--)e=e*256+r[n];return e}function Op(r){if(r>(2^32-1))throw new Error("Short too long");let e=[0,0];for(let n=0;n<e.length;n++){let o=r&255;e[n]=o,r=(r-o)/256}return Uint8Array.from(e)}function Aa(r){let e=[0,0,0,0,0,0,0,0];for(let n=0;n<e.length;n++){let o=r&255;e[n]=o,r=(r-o)/256}return Uint8Array.from(e)}var Rp=Kt(xp(),1),Qt=Kt(Ci(),1),ei=4096,Qi=80,on=class{constructor(r){W(this,"binary");W(this,"_id");this.binary=r}static isDataItem(r){return r.binary!==void 0}get signatureType(){let r=St(this.binary.subarray(0,2));if((Te==null?void 0:Te[r])!==void 0)return r;throw new Error("Unknown signature type: "+r)}async isValid(){return on.verify(this.binary)}get id(){return(async()=>Qe.default.encode(await this.rawId))()}set id(r){this._id=Qe.default.toBuffer(r)}get rawId(){return(async()=>Qt.Buffer.from(await Rp.Crypto.subtle.digest("SHA-256",this.rawSignature)))()}set rawId(r){this._id=r}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return Qe.default.encode(this.rawSignature)}set rawOwner(r){if(r.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${r.byteLength} bytes.`);this.binary.set(r,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return vr[this.signatureType].sigLength}get owner(){return Qe.default.encode(this.rawOwner)}get ownerLength(){return vr[this.signatureType].pubLength}get rawTarget(){let r=this.getTargetStart();return this.binary[r]==1?this.binary.subarray(r+1,r+33):Qt.Buffer.alloc(0)}get target(){return Qe.default.encode(this.rawTarget)}get rawAnchor(){let r=this.getAnchorStart();return this.binary[r]==1?this.binary.subarray(r+1,r+33):Qt.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){let r=this.getTagsStart(),e=St(this.binary.subarray(r+8,r+16));return this.binary.subarray(r+16,r+16+e)}get tags(){let r=this.getTagsStart();if(St(this.binary.subarray(r,r+8))==0)return[];let e=St(this.binary.subarray(r+8,r+16));return Zn(Qt.Buffer.from(this.binary.subarray(r+16,r+16+e)))}get tagsB64Url(){return this.tags.map(r=>({name:Qe.default.encode(r.name),value:Qe.default.encode(r.value)}))}getStartOfData(){let r=this.getTagsStart(),e=this.binary.subarray(r+8,r+16),n=St(e);return r+16+n}get rawData(){let r=this.getTagsStart(),e=this.binary.subarray(r+8,r+16),n=St(e),o=r+16+n;return this.binary.subarray(o,this.binary.length)}get data(){return Qe.default.encode(this.rawData)}getRaw(){return this.binary}async sign(r){return this._id=await Up(this,r),this.rawId}async setSignature(r){this.binary.set(r,2),this._id=Qt.Buffer.from(await ct().hash(r))}isSigned(){var r;return(((r=this._id)==null?void 0:r.length)??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(r=>({name:Qe.default.encode(r.name),value:Qe.default.encode(r.value)})),data:this.data}}static async verify(r){if(r.byteLength<Qi)return!1;let e=new on(r),n=e.signatureType,o=e.getTagsStart(),u=St(r.subarray(o,o+8)),c=r.subarray(o+8,o+16),f=St(c);if(f>ei)return!1;if(u>0)try{if(Zn(Qt.Buffer.from(r.subarray(o+16,o+16+f))).length!==u)return!1}catch{return!1}let s=Xi[n],d=await Ui(e);return await s.verify(e.rawOwner,d,e.rawSignature)}async getSignatureData(){return Ui(this)}getTagsStart(){let r=this.getTargetStart(),e=this.binary[r]==1,n=r+(e?33:1),o=this.binary[n]==1;return n+=o?33:1,n}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let r=this.getTargetStart()+1,e=this.binary[this.getTargetStart()]==1;return r+=e?32:0,r}},kp=Kt(Hi(),1);function zo(r,e,n){var C,N;let o=e.publicKey,u=n!=null&&n.target?kp.default.toBuffer(n.target):null,c=1+((u==null?void 0:u.byteLength)??0),f=n!=null&&n.anchor?Se.Buffer.from(n.anchor):null,s=1+((f==null?void 0:f.byteLength)??0),d=(((C=n==null?void 0:n.tags)==null?void 0:C.length)??0)>0?Ji(n.tags):null,y=16+(d?d.byteLength:0),_=Se.Buffer.from(r),w=_.byteLength,E=2+e.signatureLength+e.ownerLength+c+s+y+w,b=Se.Buffer.alloc(E);if(b.set(Op(e.signatureType),0),b.set(new Uint8Array(e.signatureLength).fill(0),2),o.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${o.byteLength}`);b.set(o,2+e.signatureLength);let v=2+e.signatureLength+e.ownerLength;if(b[v]=u?1:0,u){if(u.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${u.byteLength}`);b.set(u,v+1)}let A=v+c,S=A+1;if(b[A]=f?1:0,f){if(S+=f.byteLength,f.byteLength!==32)throw new Error("Anchor must be 32 bytes");b.set(f,A+1)}b.set(Aa(((N=n==null?void 0:n.tags)==null?void 0:N.length)??0),S);let B=Aa((d==null?void 0:d.byteLength)??0);b.set(B,S+8),d&&b.set(d,S+16);let k=S+y;return b.set(_,k),new on(b)}var ea={...Mo};globalThis.arbundles??(globalThis.arbundles=ea);var Lp=ea,jp=ea,{DataItem:Fp}=jo;globalThis.Buffer||(globalThis.Buffer=Lo.Buffer);function Np(r){return async({data:n,tags:o,target:u,anchor:c,createDataItem:f=s=>new Fp(s)})=>{const s=await r.signDataItem({data:n,tags:o,target:u,anchor:c}),d=f(Lo.Buffer.from(s));return{id:await d.id,raw:await d.getRaw()}}}var Mp=globalThis.GATEWAY_URL||void 0,Pp=globalThis.MU_URL||void 0,Dp=globalThis.CU_URL||void 0,{result:Gp,results:Yp,message:Hp,spawn:Kp,monitor:Xp,unmonitor:Jp,dryrun:Qp}=hp({GATEWAY_URL:Mp,MU_URL:Pp,CU_URL:Dp}),ed=ko.createDataItemSigner;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

warp-arbundles/build/web/esm/bundle.js:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/export{zp as a,$r as b,Zp as c,Wn as d,Se as e,qn as f,Wp as g,ed as h,hp as i,Hp as m,Gp as r};
